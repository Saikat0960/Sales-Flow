var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.Symbol=function(){var a=0;function Symbol(b){return $jscomp.SYMBOL_PREFIX+(b||'')+a++}return Symbol}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var d=[];var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;while(!(h=b.next()).done){d.push(c.call(g,h.value))}}else {var i=b.length;for(var e=0;e<i;e++){d.push(c.call(g,b[e]))}}return d};return b},'es6','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,e){var b=this;if(b instanceof String){b=String(b)}var f=b.length;for(var c=e||0;c<f;c++){if(b[c]==d||Object.is(b[c],d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es6','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];delete b[a];try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a|'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){b[a].call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};function resolvingPromise(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}}a['resolve']=resolvingPromise;a['reject']=function(b){return new a(function(d,a){a(b)})};a['race']=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var a=d.next();!a.done;a=d.next()){resolvingPromise(a.value).callWhenSettled_(e,f)}})};a['all']=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return resolvingPromise([])}else {return new a(function(g,h){var a=[];var f=0;function onFulfilled(b){return function(d){a[b]=d;f--;if(f==0){g(a)}}}do{a.push(undefined);f++;resolvingPromise(b.value).callWhenSettled_(onFulfilled(a.length-1),h);b=d.next()}while(!b.done)})}};return a},'es6','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.polyfill('Map',function(b){var g=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(j){return !1}}();if(g){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(e,d){var a=c(this,e);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:d};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=d}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=i(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var h=0;var i=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++h;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(c,d,h){c=Number(c);d=Number(d);var b,g,f;var e=Math.max(Math.abs(c),Math.abs(d));for(b=2;b<arguments.length;b++){e=Math.max(e,Math.abs(arguments[b]))}if(e>1.0E100||e<1.0E-100){c=c/e;d=d/e;f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/e;f+=g*g}return Math.sqrt(f)*e}else {f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(e,f){for(var d=1;d<arguments.length;d++){var b=arguments[d];if(!b){continue}for(var c in b){if($jscomp.owns(b,c)){e[c]=b[c]}}}return e};return b},'es6','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0};var a={};try{a.__proto__=b;return a.a}catch(c){}return !1};$jscomp.setPrototypeOf=typeof Object.setPrototypeOf=='function'?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a}:null;$jscomp.polyfill('Object.setPrototypeOf',function(a){return a||$jscomp.setPrototypeOf},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=='function'?Object.create:function(b){var a=function(){};a.prototype=b;return new a()};$jscomp.construct=function(){function reflectConstructWorks(){function Base(){}function Derived(){}new Base();Reflect.construct(Base,[],Derived);return new Base() instanceof Base}if(typeof Reflect!='undefined'&&Reflect.construct){if(reflectConstructWorks()){return Reflect.construct}var b=Reflect.construct;var a=function(e,d,a){var c=b(e,d);if(a){Reflect.setPrototypeOf(c,a.prototype)}return c};return a}function construct(b,d,a){if(a===undefined){a=b}var f=a.prototype||Object.prototype;var c=$jscomp.objectCreate(f);var e=Function.prototype.apply;var g=e.call(b,c,d);return g||c}return construct}();$jscomp.polyfill('Reflect.construct',function(a){return $jscomp.construct},'es6','es3');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if($jscomp.ASSUME_ES5||typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(!($jscomp.ASSUME_ES5||typeof Object.preventExtensions=='function')){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}else {if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;var c=function(c,d){try{b(c,d);return !0}catch(e){return !1}};return c}else {return null}}},'es6','es5');$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,b)}else {for(var c in b){if(c=='prototype'){continue}if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}}a.superClass_=b.prototype};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new b([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}Ext.define('Overrides.Button',{override:'Ext.Button',initialize:function(){this.__configureClassNames();this.callParent()},privates:{__configureClassNames:function(d){var a=this.iconCls&&this.iconCls.length>0?!0:!1;var c=this.text&&this.text.length>0?!0:!1;var b=this.menu?!0:!1;if(a){this.addCls('icon')}if(c){this.addCls('text')}if(b){this.addCls('menu')}}}});Ext.define('Ext.panel.Collapsible',{override:'Ext.Panel',config:{collapsed:null,collapsible:null},hasCollapsible:!0,defaultCollapserCls:'Ext.panel.Collapser',doDestroy:function(){this.setCollapsible(null);this.callParent()},collapse:function(a){return this.getCollapsible().collapse(a)},expand:function(a){return this.getCollapsible().expand(a)},toggleCollapsed:function(b,a){return this.getCollapsible().toggleCollapsed(b,a)},getCollapsed:function(){var a=this.getCollapsible();return a?a.getCollapsed():!1},updateCollapsed:function(b){var a=this.getCollapsible();if(a){a.setCollapsed(b)}},applyCollapsible:function(a,b){if(a===!0){a={direction:this.getHeaderPosition()}}else {if(typeof a==='string'){a={direction:a}}else {if(!a){return null}}}if(b){b.setConfig(a)}else {a=Ext.apply({xclass:this.defaultCollapserCls,target:this},a);b=Ext.create(a)}return b},updateCollapsible:function(b,a){if(a){if(!this.destroying){a.doExpandCollapse(!1)}a.destroy()}if(b&&this.rendered){this.initCollapsible(b)}},updateHeader:function(c,b){var a=this.getCollapsible();this.callParent([c,b]);if(this.isConfiguring&&a){a.toggleCollapsed(a.getCollapsed(),!1)}},updateHeaderPosition:function(b,c){var a=this.getCollapsible();if(a&&a.getCollapsed()){b=a.getDirection()}this.moveHeaderPosition(b,c)},privates:{initCollapsible:function(a){this.ensureHeader();a.initialize()},onCollapsibleRendered:function(){var a=this.getCollapsible();if(a){this.initCollapsible(a)}},reattachBodyWrap:function(){var a=this,c=a._header,d=a.maxHeightElement||a.element,b=a.bodyWrapElement;if(b.parent()!==d){if(c){b.insertAfter(c.element)}else {d.insertFirst(b)}}}}});Ext.define('Overrides.field.Number',{override:'Ext.field.Number',allowThousandSeparator:!1,thousandSeparator:null,initialize:function(){var a=this;if(a.allowThousandSeparator){a.thousandSeparator=a.thousandSeparator?a.thousandSeparator:Ext.util.Format.thousandSeparator}a.callParent()},updateDecimals:function(c){var a=this,b=a.allowThousandSeparator?'0,0':'0',e=a.getTrim()?'#':'0',d;if(a.formatString){b=a.formatString}else {if(c){if(a.allowThousandSeparator){b+='.'+Ext.String.repeat('0',c)}else {b+='.'+Ext.String.repeat(e,c)}}}a.numberFormat=b;if(!a.isConfiguring){d=a.getValue();if(Ext.isDate(d)){a.setInputValue(d)}}}});Ext.define('Overrides.menu.Menu',{override:'Ext.menu.Menu',initialize:function(){this.callParent();this.mon(this,'show',this.__addIconClass)},privates:{__addIconClass:function(){var c=!1,d=this.getInnerItems(),a=0,e=d.length;for(a;a<e;a++){var b=d[a];if(b.baseCls==='x-menuitem'&&b.getIconCls()||b.baseCls==='x-menucheckitem'&&b.hasOwnProperty('checkboxElement')){a=e;c=!0}}if(!c){this.addCls('no-icons')}}}});Ext.define('Ext.data.validator.Time',{extend:'Ext.data.validator.AbstractDate',alias:'data.validator.time',type:'time',isTimeValidator:!0,message:'Is not a valid time',privates:{getDefaultFormat:function(){return Ext.Date.defaultTimeFormat}}});Ext.define('Ext.field.trigger.Time',{extend:'Ext.field.trigger.Expand',xtype:'timetrigger',alias:'trigger.time',classCls:Ext.baseCSSPrefix+'timetrigger'});Ext.define('Ext.panel.TimeHeader',{extend:'Ext.Component',xtype:'analogtimeheader',classCls:Ext.baseCSSPrefix+'analogtimeheader',config:{position:null},template:[{reference:'headerEl',cls:Ext.baseCSSPrefix+'header-el',children:[{reference:'timeEl',cls:Ext.baseCSSPrefix+'time-wrapper-el',children:[{cls:Ext.baseCSSPrefix+'time-el '+Ext.baseCSSPrefix+'hour-el',reference:'hoursEl',listeners:{click:'onHoursClick'}},{cls:Ext.baseCSSPrefix+'time-el',html:':'},{cls:Ext.baseCSSPrefix+'time-el '+Ext.baseCSSPrefix+'minute-el',reference:'minutesEl',listeners:{click:'onMinutesClick'}}]},{reference:'meridiemEl',cls:Ext.baseCSSPrefix+'meridiem-wrapper-el',children:[{cls:Ext.baseCSSPrefix+'am-el '+Ext.baseCSSPrefix+'meridiem-el',reference:'amEl',html:'AM',listeners:{click:'onAmClick'}},{cls:Ext.baseCSSPrefix+'pm-el '+Ext.baseCSSPrefix+'meridiem-el',reference:'pmEl',html:'PM',listeners:{click:'onPmClick'}}]}]}],onHoursClick:function(a){this.ownerCmp.onHoursClick(a)},onMinutesClick:function(a){this.ownerCmp.onMinutesClick(a)},onAmClick:function(a){this.ownerCmp.onAmClick(a)},onPmClick:function(a){this.ownerCmp.onPmClick(a)}});Ext.define('Ext.panel.TimeView',{extend:'Ext.Panel',xtype:'analogtime',requires:['Ext.panel.TimeHeader'],config:{value:'now',autoAdvance:!0,vertical:!0,confirmable:!1,confirmHandler:null,declineHandler:null,scope:'this',buttonAlign:'right',defaultButtons:{ok:'up.onConfirm',cancel:'up.onDecline'},mode:'hour'},platformConfig:{'phone || tablet':{vertical:'auto'}},classCls:Ext.baseCSSPrefix+'analogtime',dotIndicatorCls:Ext.baseCSSPrefix+'analog-picker-dot-indicator',animationTimeDelay:200,initDate:'1/1/1970',header:{xtype:'analogtimeheader'},listeners:{painted:'onPainted',scope:'this'},MAX_MINUTES:24*60+59,getTemplate:function(){var a=this.callParent(),b=a[0].children[0];b.children=[{reference:'pickerWrapEl',cls:Ext.baseCSSPrefix+'picker-wrap-el',children:[{cls:Ext.baseCSSPrefix+'analog-picker-el',reference:'analogPickerEl',children:[{cls:Ext.baseCSSPrefix+'analog-picker-hand-el',reference:'handEl'},{cls:Ext.baseCSSPrefix+'analog-picker-face-el',reference:'faceEl'}],listeners:{mousedown:'onFaceMouseDown',mouseup:'onFaceMouseUp'}}]}];return a},activateHours:function(a,g){var b=this,d=b.getHeader(),h=this.getAm(),f=d.hoursEl,e=d.minutesEl,c=b.getHours();b.setMode('hour');a=a!=null?a:(c>=12?c-12:c)+(!h?12:0);f.addCls('active');e.removeCls('active');b.setHours(a,g)},activateMinutes:function(a,f){var b=this,c=b.getHeader(),e=c.hoursEl,d=c.minutesEl;b.setMode('minute');a=a!=null?a:b.getMinutes();d.addCls('active');e.removeCls('active');b.setMinutes(a,f)},applyValue:function(a){var b;if(Ext.isDate(a)){a=a.getHours()*60+a.getMinutes()}else {if(a==='now'||!Ext.isNumber(a)||isNaN(a)||a<0||a>this.MAX_MINUTES){b=new Date();a=b.getHours()*60+b.getMinutes()}}return a},getAngleFromTime:function(e,f){var b=f!=='hour',d=b?60:12,a=360/d,c=b?a*15:a*3;return e*a-c},getCenter:function(){var a=this,b,c;if(!a._center){a._center=b=a.analogPickerEl.getXY();c=a.analogPickerEl.measure();b[0]+=Math.floor(c.width/2);b[1]+=Math.floor(c.height/2)}return a._center},getTimeFromAngle:function(a){var g=this,f=g.getMode(),c=f!=='hour',d=c?60:12,b=360/d,e=c?b*15:b*3;a=b*Math.round(a/b);a+=e;if(a>=360){a-=360}if(!c&&a===0){return d}else {return a/b}},getElementByValue:function(a){var b=this,c=this.getMode();a=parseInt(a);if(c==='hour'&&a===0){a=12}if(!b.itemValueMap){b.layoutFace()}return b.itemValueMap[a]},getHours:function(){var a=this.getValue();return Math.floor(a/60)},getMinutes:function(){var b=this,a=b.getValue(),c=b.getHours();return a!=null?a-c*60:0},getAm:function(){var a=this.getValue(),b=Math.floor(a/60);return b<12},layoutFace:function(){if(!this.rendered){return}var d=this,g=d.getParent(),m=d.getMode(),h=d.faceEl,j=h.measure('w'),e=m==='minute',i=e?'minute':'hour',k=50,l=e?60:12,b,a,c,f;h.setHtml('');d.itemValueMap={};for(b=1;b<=l;b++){a=Ext.Element.create();f=d.getAngleFromTime(b,i);c=b;if(e){c=b;if(b%5!==0){a.setStyle('opacity',0)}if(b===60){c='0'}a.addCls('minute-picker-el')}else {a.addCls('hour-picker-el')}a.type=i;a.value=parseInt(c);a.rotation=f;a.setText(e?Ext.String.leftPad(c,2,'0'):c);d.itemValueMap[a.value]=a;a.setStyle('transform','rotate('+f+'deg) translateX('+(j-k)/2+'px) rotate('+-f+'deg)');h.appendChild(a)}if(g&&g.isHeighted()){g.updateHeight()}},onConfirm:function(b){var a=this;a.updateField();Ext.callback(a.getConfirmHandler(),a.getScope(),[a,b],0,a)},onDecline:function(b){var a=this;a.collapsePanel();Ext.callback(a.getDeclineHandler(),a.getScope(),[a,b],0,a)},onFaceElementClick:function(c,d){c=Ext.fly(c);if(!c){return}var b=this,f=b.getAm(),a=c.value,e=c.type;if(e){if(e==='hour'){a=f?a:a+12;a=f&&a===12?0:a;b.setHours(a,d)}else {b.setMinutes(a,d);if(!b.getConfirmable()){b.updateField()}}}if(b.getAutoAdvance()&&b.getMode()==='hour'){b.activateMinutes(null,{delayed:!0,animate:!0})}},onFaceMouseDown:function(b){var a=this;if(!a.dragging){b.preventDefault();a.startDrag()}},onFaceMouseUp:function(b){var c=this,a;if(b.pointerType==='touch'){a=document.elementFromPoint.apply(document,b.getXY())}else {a=b.target}c.stopDrag();c.onFaceElementClick(a)},onHoursClick:function(){this.activateHours(null,{animate:!0})},onMouseMove:function(k){var b=this,g={disableAnimation:!0},j=b.getMode(),h=b.getAm(),c,d,e,i,f,a;if(b.dragging){d=b.getCenter();e=k.getXY();i=e[0]-d[0];f=e[1]-d[1];c=Math.atan2(f,i);c=c*(180/Math.PI);if(f<0){c+=360}a=b.getTimeFromAngle(c);if(j==='hour'){a=h?a:a+12;a=h&&a===12?0:a;b.setHours(a,g)}else {b.setMinutes(a,g)}}},onAmClick:function(){this.setAm(!0)},onMinutesClick:function(){this.activateMinutes(null,{animate:!0})},onOrientationChange:function(){this.setVerticalByOrientation()},onPainted:function(){var a=this;a.layoutFace();a.updateValue(a.getValue());a.activateHours()},onPmClick:function(){this.setAm(!1)},setAm:function(b){var a=this,c=a.getAm(),g=a.getHours(),d=a.getHeader(),e=d.amEl,f=d.pmEl,h=b?e:f;if(!a.hasSetAm||c!==b){e.removeCls('active');f.removeCls('active');h.addCls('active');a.hasSetAm=!0}if(c!==b){a.setHours(g+(b?-12:12))}},setClockHand:function(b){var a=this,d=b.type==='minute',i=a.getMode(),j=d?'minute':'hour',h=!d&&b.value>12?b.value-12:b.value,f=a.getAngleFromTime(h,b.type),e=a.analogPickerEl,g=a.handEl,c;e.removeCls(['animated','animated-delayed']);e.toggleCls(a.dotIndicatorCls,d&&h%5!==0);if(i!==j){this.setMode(d?'minute':'hour')}c=a.getElementByValue(h);if(c&&(!a.activeElement||a.activeElement!==c)){if(a.activeElement){a.activeElement.removeCls('active')}a.activeElement=c;if(b.disableAnimation){c.addCls('active')}else {Ext.defer(function(){c.addCls('active')},a.animationTimeDelay)}}if(g.rotation!==f){e.toggleCls('animated'+(b.delayed?'-delayed':''),!!b.animate);g.setStyle('transform','rotate('+f+'deg)');g.rotation=f}},setHours:function(a,e){var b=this,f=b.getHeader(),g=b.getMode(),d=b.getMinutes(),c=a>12?a-12:a;c=c===0?12:c;f.hoursEl.setText(c);if(g==='hour'){b.setClockHand(Ext.apply({value:a,type:'hour'},e))}b.setValue(a*60+d)},setMinutes:function(b,c){var a=this,d=a.getHeader(),f=a.getMode(),e=a.getHours();d.minutesEl.setText(Ext.String.leftPad(b,2,'0'));if(f==='minute'){a.setClockHand(Ext.apply({value:b,type:'minute'},c))}a.setValue(e*60+b)},setTime:function(c,b,d){var a=this;a.setHours(c);a.setMinutes(b);a.setAm(d)},startDrag:function(){var a=this;a.el.on({mousemove:'onMouseMove',scope:a});a.dragging=!0},stopDrag:function(){var a=this;a.el.un({mousemove:'onMouseMove',scope:a});a._center=null;a.dragging=!1},updateConfirmable:function(a){this.setButtons(a&&this.getDefaultButtons())},updateMode:function(){this.layoutFace()},updateValue:function(){var a=this,c=a.getHours(),b=a.getMinutes(),d=a.getAm();if(this.rendered){a.setHours(c);a.setMinutes(b);a.hasSetAm=!1;a.setAm(d)}},updateField:function(){var a=this,c=a.getHours(),d=a.getMinutes(),b=new Date(a.initDate);b.setHours(c>23?c-12:c);b.setMinutes(d);a.fireEvent('select',a.parent,b)},collapsePanel:function(){this.fireEvent('collapsePanel',this)},setVerticalByOrientation:function(){this.updateVertical('auto')},updateVertical:function(c){var b=this,a=Ext.Viewport;if(a){if(c==='auto'){c=a.getOrientation()===a.PORTRAIT;a.on('orientationchange','onOrientationChange',b)}else {a.un('orientationchange','onOrientationChange',b)}}b.toggleCls(Ext.baseCSSPrefix+'vertical',c);b.setHeaderPosition(c?'top':'left');b.layoutFace()},doDestroy:function(){var a=Ext.Viewport;if(a){a.un('orientationchange','onOrientationChange',this)}this.callParent()}});Ext.define('Ext.panel.Time',{extend:'Ext.Panel',xtype:'timepanel',mixins:['Ext.mixin.ConfigProxy'],config:{view:{xtype:'analogtime'}},proxyConfig:{view:{configs:['value','autoAdvance','vertical','confirmable','confirmHandler','declineHandler','scope','defaultButtons','mode'],methods:['getHours','getMinutes','getMeridiem','updateField']}},autoSize:null,initialize:function(){var a=this;a.callParent();if(a.getFloated()){a.el.dom.setAttribute('tabIndex',-1);a.el.on('mousedown',a.onMouseDown,a)}a.relayEvents(a.getView(),['collapsePanel','select'])},applyView:function(a,b){return Ext.updateWidget(b,a,this,'createView')},createView:function(a){return this.mergeProxiedConfigs('view',a)},updateView:function(b,a){if(a){Ext.destroy(a)}this.add(b)},updateButtonAlign:function(a){this.getView().setButtonAlign(a)},onMouseDown:function(a){}});Ext.define('Ext.field.Time',{extend:'Ext.field.Picker',xtype:'timefield',requires:['Ext.field.trigger.Time','Ext.panel.Time','Ext.data.validator.Time'],config:{triggers:{expand:{type:'time'}},format:'',altFormats:'g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A'},platformConfig:{'phone || tablet':{floatedPicker:{modal:!0,centered:!0},errorTarget:'under'}},picker:'floated',floatedPicker:{xtype:'timepanel',floated:!0,confirmable:!0,listeners:{select:'onPickerChange',collapsePanel:'collapse',scope:'owner'}},initDate:'1970-01-01',initDateFormat:'Y-m-d',matchFieldWidth:!1,createFloatedPicker:function(b){var a=this.getFloatedPicker();return Ext.apply(a,b)},getAutoPickerType:function(){return 'floated'},onPickerChange:function(c,b){var a=this;a.forceInputChange=!0;a.setValue(b);a.forceInputChange=!1;a.fireEvent('select',a,b);a.collapse()},parseValue:function(d,j){var b=this,a=d,h=b.getFormat(),i=b.getAltFormats(),e=[h].concat(i),c,g,f;if(a){if(!Ext.isDate(a)){for(c=0,g=e.length;c<g;c++){f=e[c];a=Ext.Date.parse(b.initDate+' '+d,b.initDateFormat+' '+f);if(a){return a}}}if(a){return a}}return this.callParent([d,j])},realignFloatedPicker:function(a){a=a||this.getPicker();if(a.isCentered()){a.center()}else {return this.callParent([a])}},showPicker:function(){var a=this,b;a.callParent();b=a.getPicker();b.setValue(a.getValue());if(b.getModal()){a.getFocusTrap().focus()}},transformValue:function(a){if(Ext.isDate(a)){if(isNaN(a.getTime())){a=null}}return a},applyInputValue:function(a,b){if(Ext.isDate(a)){return Ext.Date.format(a,this.getFormat())}return this.callParent([a,b])},applyPicker:function(a,c){var b=this;if(a==='edge'){a='floated'}a=b.callParent([a,c]);if(a){a.ownerCmp=b}return a},applyAltFormats:function(a){if(!a){return []}else {if(!Ext.isArray(a)){return a.split('|')}}return a},applyFormat:function(a){return a||Ext.Date.defaultTimeFormat},updateFormat:function(a){this.setParseValidator({type:'time',format:a})},applyValue:function(a,b){if(!(a||a===0)){a=null}a=this.callParent([a,b]);if(a){if(this.isConfiguring){this.originalValue=a}}return a},updateValue:function(b,c){var a=this._picker;if(a){a.setValue(b)}this.callParent([b,c])}});Ext.define('Ext.panel.Collapser',{requires:['Ext.panel.Collapsible','Ext.fx.Animation','Ext.Deferred'],config:{animation:null,collapseAnimation:null,collapsed:!1,collapseToolText:'Collapse panel',direction:'top',drawer:{xtype:'panel',border:!0,top:0,left:0,cls:Ext.baseCSSPrefix+'drawer'},drawerHideDelay:500,dynamic:null,expandAnimation:null,expandToolText:'Expand panel',target:null,tool:{xtype:'tool',weight:900},useDrawer:!0},constructor:function(a){this.initConfig(a)},initialize:function(){var a=this;a.rendered=!0;a.ensureCollapseTool();a.initialized=!0;if(a.getCollapsed()){a.doExpandCollapse(!0,!0)}a.setupDrawerListeners()},destroy:function(){var a=this,b=a.activeOperation,c=a.drawerTask;a.destroying=!0;if(c){c.cancel()}if(b){b.anim.end()}if(!a.getTarget().destroying){a.reattachBodyWrap()}Ext.destroy(a.drawerHeaderListener,a.drawerListeners,a.drawer,a.collapsibleTool);a.destroying=!1;a.callParent()},collapse:function(a){return this.toggleCollapsed(!0,a)},expand:function(a){return this.toggleCollapsed(!1,a)},hideDrawer:function(b){var a=this,d=a.drawer,c;if(a.isSliding||!a.getCollapsed()||!d||!a.drawerVisible){return}b=a.parseAnimation(!1,b);if(b){a.getTarget().element.addCls(a.slidingCls);c=a.doAnimation(!1,a.getSlideOutCfg(a.getDirection(),a.afterDrawerHide,b));a.isSliding=!0}else {a.afterDrawerHide();c=Ext.Promise.resolve()}return c},isDynamic:function(){var a=this.getDynamic(),b;if(a===null){b=this.getTarget();a=b.getFloated()||!b.getRefOwner()}return a},showDrawer:function(c){var a=this,k=a.savedProps,d=a.getDirection(),l=a.getTarget(),e=a.getHeaderSize(),j=a.endDirection,m=a.verticalMap[d],b,i,h,g,f;if(a.isSliding||!a.getCollapsed()||!a.getDrawer()){return Ext.Promise.resolve()}b=a.createDrawer();if(m){h='100%';i=k.measuredWidth||a.defaultSize;b.setTop(0);b.setBottom(0);if(j[d]){b.setLeft(null);b.setRight(e)}else {b.setRight(null);b.setLeft(e)}}else {i='100%';h=k.measuredHeight||a.defaultSize;b.setRight(0);b.setLeft(0);if(j[d]){b.setTop(null);b.setBottom(e)}else {b.setBottom(null);b.setTop(e)}if(l.getHeader()&&l.getHeaderPosition()===d){f=b.ensureHeader();if(f){f.hide()}}}a.configureDrawer(b,i,h);b.show();c=a.parseAnimation(!1,c);a.isSliding=!0;if(c){c=a.getSlideInCfg(d,a.afterDrawerShow,c);c.preserveEndState=!0;a.getTarget().element.addCls(a.slidingCls);g=a.doAnimation(!1,c)}else {a.afterDrawerShow();g=Ext.Promise.resolve()}return g},toggleCollapsed:function(c,b){var a=this,d=a.getTarget(),g=a.getCollapsed(),e,f;if(c===g){return Ext.Promise.resolve()}e='before'+(c?'collapse':'expand');if(a.initialized&&d.hasListeners[e]&&d.fireEvent(e,d)===!1){return Ext.Promise.resolve()}if(a.rendered){b=a.parseAnimation(c,b)}else {b=null}a.hideDrawer(!1);if(b){f=a.doExpandCollapseAnimated(c,b)}else {f=a.doExpandCollapse(c)}return f},applyAnimation:function(a){if(a===!0){a={}}return a},updateCollapsed:function(b){var a=this;if(a.rendered&&!a.preventUpdate){a._collapsed=!b;a.toggleCollapsed(b)}},updateCollapseToolText:function(a){this.setToolTextIf(a,this.getCollapsed())},updateDirection:function(c,b){var a=this;if(!a.isConfiguring){if(a.getCollapsed()){a.getTarget().moveHeaderPosition(c,b)}a.ensureCollapseTool()}},updateDynamic:function(c){var a=this,b=a.drawer;if(c&&b){if(a.hasDetachedBody){a.reattachBodyWrap()}a.drawer=Ext.destroy(b)}},updateExpandToolText:function(a){this.setToolTextIf(a,!this.getCollapsed())},updateUseDrawer:function(){if(this.rendered){this.setupDrawerListeners()}},privates:{animateEndCls:Ext.baseCSSPrefix+'placeholder-animate-end',collapsingDirections:{top:['up','down'],left:['left','right'],bottom:['down','up'],right:['right','left']},defaultSize:300,endDirection:{right:1,bottom:1},headerChangePosition:{top:['top','bottom'],left:['left','right'],bottom:['bottom','top'],right:['right','left']},hasDetachedBody:!1,rendered:!1,slidingCls:Ext.baseCSSPrefix+'sliding',verticalMap:{right:1,left:1},afterAnimation:function(a){a.deferred.resolve();this.activeOperation=null},afterDrawerHide:function(){var a=this,c=a.getTarget(),d=a.activeOperation,e=a.drawer,b;c.element.removeCls(a.slidingCls);a.drawerVisible=a.isSliding=!1;if(!a.destroying){a.drawerListeners=Ext.destroy(a.drawerListeners);e.hide();b=e.getHeader();if(b){b.show()}c.fireEvent('drawerhide',c)}if(d){a.afterAnimation(d)}},afterDrawerShow:function(){var a=this,f=a.activeOperation,c,d,b=a.getTarget(),e;a.isSliding=!1;a.drawerVisible=!0;if(!a.destroying){b.element.removeCls(a.slidingCls);d={mouseleave:'handleElMouseLeave',mouseenter:'handleElMouseEnter',scope:a,destroyable:!0};c=[Ext.on('mousedown','handleGlobalDrawerEvent',a,{destroyable:!0}),Ext.getDoc().on('mousemove','handleGlobalDrawerEvent',a,{destroyable:!0}),a.drawer.element.on(d)];e=b.getHeader();if(e){c.push(e.element.on(d))}a.drawerListeners=c;b.fireEvent('drawershow',b)}if(f){a.afterAnimation(f)}},afterExpandCollapseAnimation:function(){var b=this,c=b.activeOperation,d=b.getTarget(),f=c.animCls,a,e;if(!b.destroying){a=d.getHeader();if(c.placeHolder){b.drawer.hide()}if(c.reattach){b.reattachBodyWrap()}if(a&&c.restoreHeaderVis){a.element.setVisibility(!0)}if(f){d.element.removeCls(f)}if(c.restore){b.restoreProps();e=d.bodyWrapElement;e.setWidth(null).setHeight(null);a=a&&a.element;if(a){a.setWidth(null).setHeight(null)}}b.afterExpandCollapse(c.collapsed,!0)}b.afterAnimation(c)},afterExpandCollapse:function(c){var a=this,b=a.getTarget(),g=a.headerChangePosition,e=a.getDirection(),d=b.getHeaderPosition(),f=c?'collapse':'expand';b.bodyWrapElement.setVisible(!c);if(g[d].indexOf(e)<0){b.moveHeaderPosition(c?e:d,!c?e:d)}a.preventUpdate=!0;a.setCollapsed(c);a.preventUpdate=!1;a.ensureCollapseTool();if(a.initialized&&b.hasListeners[f]){b.fireEvent(f,b)}},createDrawer:function(){var b=this,a=b.drawer;if(!a){b.drawer=a=Ext.create(b.getDrawer());a.bodyWrapElement.hide()}return a},configureDrawer:function(a,g,f,e){var b=this,d=b.getTarget(),c=d.bodyWrapElement;a.setTitle(d.getTitle());a.setWidth(g);a.setHeight(f);if(e){a.setTop(0);a.setRight(null);a.setBottom(null);a.setLeft(0)}a.element.append(c);b.getContainerTarget().appendChild(a.element);c.show();a.show();b.hasDetachedBody=!0},doAnimation:function(e,d,a){a=a||{};var b=a.deferred||new Ext.Deferred(),c=new Ext.fx.Animation(d);a.anim=c;a.deferred=b;a.collapsed=e;this.activeOperation=a;Ext.Animator.run(c);return b.promise},doExpandCollapse:function(d,e){var a=this,c=a.getTarget(),b;if(a.rendered){if(d){a.saveProps();c.setFlex(null);b=a.getDirection();if(b==='top'||b==='bottom'){c.setHeight(null)}else {c.setWidth(null)}}else {a.reattachBodyWrap();a.restoreProps()}a.afterExpandCollapse(d)}return e?null:Ext.Promise.resolve()},doExpandCollapseAnimated:function(b,a){if(this.isDynamic()){return this.doExpandCollapseDynamic(b,a)}return this.doExpandCollapsePlaceholder(b,a)},doExpandCollapseDynamic:function(f,t){var a=this,b=a.getTarget(),c=b.getHeaderPosition(),d=a.getDirection(),m=b.element,l=b.bodyWrapElement,s=b.getHeader(),g=s&&s.element,h={},i={},e=d==='top'||d==='bottom',r=c==='top'||c==='bottom',k=a.getHeaderSize(),j=c!==d,n,o,p,q;if(f){p=a.saveProps();n=p.measuredHeight;o=p.measuredWidth;if(e){a.measureAndSet(l,'Height');if(j){a.measureAndSet(g,'Height')}h.height=n;i.height=r?k:0;b.setHeight(null);b.setMinHeight(null)}else {a.measureAndSet(l,'Width');if(j){a.measureAndSet(g,'Width')}h.width=o;i.width=r?k:0;b.setWidth(null);b.setMinWidth(null)}b.setFlex(null)}else {j=c!==d;a.reattachBodyWrap();if(e){m.setHeight(null)}else {m.setWidth(null)}a.restoreProps(!0);if(j){b.moveHeaderPosition(f?d:c,!f?d:c)}l.show();if(g){g.setWidth(null).setHeight(null)}a.measureAndSet(l,e?'Height':'Width',!0);q=m.measure();n=q.height;o=q.width;b.setFlex(null);a.measureAndSet(g,e?'Height':'Width');if(e){h.height=k;i.height=n;b.setHeight(null)}else {h.width=k;i.width=o;b.setWidth(null)}}return a.doAnimation(f,Ext.apply({scope:a,callback:a.afterExpandCollapseAnimation,element:m,preserveEndState:!0,from:h,to:i},t),{restore:!f})},doExpandCollapsePlaceholder:function(d,s){var a=this,u=a.collapsingDirections,c=a.getTarget(),h=c.element,f=c.getHeaderPosition(),b=a.getDirection(),o=b==='top'||b==='bottom',t=f==='top'||f==='bottom',e=c.getHeader(),q=o!==t,r=a.getContainerTarget().getBox(),k,l,g,m,j,p,i,n;g=a.createDrawer();if(d){i=a.saveProps();k=i.measuredHeight;l=i.measuredWidth}else {a.reattachBodyWrap();a.restoreProps(!0);n=h.measure();k=n.height;l=n.width}a.configureDrawer(g,l,k,!0);g.setLeft(h.getLeft()-r.left);g.setTop(h.getTop()-r.top);if(o){c.setHeight(null);c.setMinHeight(null)}else {c.setWidth(null);c.setMinWidth(null)}c.setFlex(null);if(d){if(q&&u[f].indexOf(b)<0){c.moveHeaderPosition(d?b:f,!d?b:f)}if(e){e.element.setVisibility(!1)}m=a.getSlideOutCfg(b,function(){if(a.destroying){return}var c=a.activeOperation;g.hide();if(e){e.element.setVisibility(!0);a.doAnimation(d,{type:'slideIn',element:e.element,reverse:!0,direction:b,isElementBoxFit:!1,scope:a,callback:a.afterExpandCollapseAnimation},c)}else {a.afterExpandCollapseAnimation()}},s)}else {m=a.getSlideInCfg(b,a.afterExpandCollapseAnimation,s);if(a.endDirection[b]){j=a.animateEndCls;h.addCls(j)}if(!q){e.element.setVisibility(!1);p=!0}}return a.doAnimation(d,m,{placeHolder:!0,restore:!d,reattach:!0,animCls:j,restoreHeaderVis:p})},ensureCollapseTool:function(){var a=this,d=a.getTarget(),h=d.ensureHeader(),g=a.getDirection(),c=a.getCollapsed(),e=a.collapsingDirections,b=a.collapsibleTool,f=a.getTool();if(h&&f){if(!b){a.collapsibleTool=b=d.addTool(Ext.apply({handler:a.onToggleToolTap,scope:a,$internal:!0},f))[0]}b.setType(c?e[g][1]:e[g][0]);b.setTooltip(c?a.getExpandToolText():a.getCollapseToolText())}else {a.collapsibleTool=Ext.destroy(b)}},getAnimationFor:function(a){var b=a?this.getCollapseAnimation():this.getExpandAnimation();return b||this.getAnimation()},getContainerTarget:function(){return this.getTarget().element.parent()},getDrawerTask:function(){var a=this,b=a.drawerTask;if(!b){a.drawerTask=b=new Ext.util.DelayedTask(a.hideDrawer,a)}return b},getHeaderSize:function(){var b=this.getTarget().ensureHeader(),a=b&&b.element;return a?Math.min(a.measure('h'),a.measure('w')):0},getSlideInCfg:function(b,c,a){return Ext.apply({type:'slideIn',direction:b,reverse:!0,element:this.drawer.element,isElementBoxFit:!1,scope:this,callback:c},a)},getSlideOutCfg:function(b,c,a){return Ext.apply({type:'slideOut',direction:b,element:this.drawer.element,isElementBoxFit:!1,scope:this,callback:c},a)},handleElMouseEnter:function(){this.getDrawerTask().cancel()},handleElMouseLeave:function(d){var a=this,b=d.getRelatedTarget(),c=a.getTarget();if(b&&(c.owns(b)||a.drawer.owns(b))){return}a.getDrawerTask().delay(a.getDrawerHideDelay())},handleGlobalDrawerEvent:function(c){var a=this,d=a.drawer,e=a.getTarget(),b;b=a.getDrawerTask();if(e.owns(c)||d.owns(c)){b.cancel()}else {b.delay(a.getDrawerHideDelay())}},measureAndSet:function(a,b,e){if(!a){return}var c='set'+b,d='get'+b;if(e){a[c](null)}a[c](a[d](!1,!0))},onHeaderTap:function(d){var a=this,b=a.collapsibleTool,c=a.getCollapsed();if(!a.isDynamic()&&!(b&&b.owns(d))){a.toggleCollapsed(!c)}},onToggleToolTap:function(){this.toggleCollapsed(!this.getCollapsed())},parseAnimation:function(b,a){if(a===undefined){a=this.getAnimationFor(b)}else {if(a){if(typeof a==='boolean'){a={}}a=Ext.apply({},a,this.getAnimationFor(b))}}return a},reattachBodyWrap:function(){if(this.hasDetachedBody){this.getTarget().reattachBodyWrap();this.hasDetachedBody=!1}},restoreProps:function(d){var b=this.getTarget(),a=this.savedProps,c;if(a){c=a.flex;if(c){b.setFlex(c)}b.setMinHeight(a.minHeight);b.setMinWidth(a.minWidth);b.setHeight(a.height);b.setWidth(a.width)}if(!d){this.savedProps=null}},saveProps:function(){var b=this,a=b.getTarget(),c=a.element.measure();b.savedProps={flex:a.getFlex(),minHeight:a.getMinHeight(),minWidth:a.getMinWidth(),height:a.getHeight(),width:a.getWidth(),measuredWidth:c.width,measuredHeight:c.height};return b.savedProps},setToolTextIf:function(a,c){var b=this.collapsibleTool;if(a&&b&&c){b.setTooltip(a)}},setupDrawerListeners:function(){var a=this,b=a.getTarget().getHeader();a.drawerHeaderListener=Ext.destroy(a.drawerHeaderListener);if(b&&a.getUseDrawer()){a.drawerHeaderListener=b.element.on({destroyable:!0,scope:a,tap:'onHeaderTap'})}}}});Ext.define('ABPControlSet.base.view.contextmenu.plugin.ContextMenu',{extend:'Ext.plugin.Abstract',id:'abpcontextmenu',alias:'plugin.abpcontextmenu',cachedConfig:{contextMenu:1},applyContextMenu:function(a){a=Ext.widget({padding:0,relative:!0,xtype:'menu',floating:!0,header:!1,layout:'fit',items:[{xtype:'abpcontextmenu',listeners:{itemclick:this.onItemClick,scope:this},store:{type:'tree',rootVisible:!0,root:{}}}]});return a},constructor:function(a){a=a||{};this.callParent([a])},onItemClick:function(c,g){var b=c.getCurrentCmp?c.getCurrentCmp():null;var a=g.node;var d=c.getCurrentContext();if(b){var f=this.getContextMenu();b.fireEvent(ABPControlSet.common.types.Events.ContextMenuItemClick,b,d,a,a.get('checkbox')?!!a.get('checked'):null);var e=a.get('handler');if(Ext.isFunction(e)){e(b,d,a,a.get('checkbox')?!!a.get('checked'):null)}if(!a.get('checkbox')&&a.get('leaf')){f.hide()}}},init:function(a){if(Ext.toolkit==='classic'){var b=a.element?a.element:a.el;if(b){b.on({contextmenu:{fn:this.onContextMenu,scope:this}})}else {a.on({el:{contextmenu:{fn:this.onContextMenu,scope:this}}})}}else {a.on({contextmenu:{element:'element',preventDefault:!0,fn:this.onContextMenu,scope:this}})}},onContextMenu:function(a,g){var e=this.getContextMenu(),d=e?e.down('abpcontextmenu'):null;if(d){var h=d.getStore(),c=h.getRoot();if(c){c.removeAll();var b=this.cmp;if(b&&b.fireEvent){var f=b.getContextMenuData?b.getContextMenuData(a,g):{};d.setCurrentCmp(b);d.setCurrentContext(f);if(b.fireEvent(ABPControlSet.common.types.Events.ContextMenu,c,this.cmp,f,g,a)!==!1){if(c&&c.childNodes&&c.childNodes.length>0){if(a&&a.stopEvent){a.stopEvent()}if(Ext.toolkit==='modern'){e.showBy(b,'t-b')}else {e.showAt(a.pageX,a.pageY)}}}}}}}});Ext.define('ABPControlSet.common.types.Events',{singleton:!0,UserChanged:'userchanged',TriggerClick:'triggerclick',TriggerFocus:'triggerfocus',ContextMenu:'contextshow',ContextMenuItemClick:'contextmenuitemclick',ImageLongPress:'longpress',ImageClick:'click',ImageDoubleClick:'doubletap',RadioGroupFocus:'radiogroupfocus',AGGridRemove:'aggridremove',AGGridAdd:'aggridadd',AGGridUpdate:'aggridupdate'});Ext.define('ABPControlSet.base.view.field.plugin.Field',{extend:'Ext.plugin.Abstract',requires:['ABPControlSet.common.types.Events'],alias:'plugin.abpfield',focusValue:null,init:function(a){a.labelPad=a.labelAlign==='top'?5:14;if(a.xtype==='abpcheckbox'||a.xtype==='abpradiogroup'){return}else {var b={focus:this.userChangedFocus,blur:this.userChangedBlur,select:this.userChangedSelect,scope:this};a.userTyping=!1;this.registerInputListener(b,this.userInputFormat);a.on(b)}},registerInputListener:Ext.emptyFn,userInputFormat:function(d){var a=this.cmp;a.userTyping=!0;var b=a.getFieldFormatter();var c=a.getFieldFormat();if(Ext.isFunction(b)&&!a.getReadOnly()&&!a.getDisabled()){a.setFieldFormattedValue(b,c,!0)}},userChangedFocus:function(a,g){var j=this,c=a.getFieldFormatter(),h=a.getFieldFormat();if(Ext.isFunction(c)){a.setFieldFormattedValue(c,h,!0)}if(a instanceof Ext.form.field.ComboBox&&g){var d=g.relatedTarget;var f=d?Ext.fly(d):null;var b=f?f.component:null;var i=b?Ext.toolkit==='classic'?b instanceof Ext.view.BoundList:!1:!1;if(i){var e=b.ownerCmp;if(e&&e.id===a.id){return}}}j.focusValue=a.getValue()},userChangedBlur:function(a){var c=this;var b=a.getValue();a.userTyping=!1;if(Ext.valueFrom(b,null)==null&&Ext.valueFrom(c.focusValue,null)==null){return}if(!a.isEqual(b,c.focusValue)){a.__flushValueViewModel();a.fireEvent(ABPControlSet.common.types.Events.UserChanged,a,b,c.focusValue);c.focusValue=b}var d=a.getFieldFormatter();var e=a.getFieldFormat();if(Ext.isFunction(d)){a.setFieldFormattedValue(d,e,!1)}},userChangedSelect:function(a,e){var c=this;var b=a.getValue();if(Ext.valueFrom(b,null)==null&&Ext.valueFrom(a,c.focusValue,null)==null){return}if(!a.isEqual(b,c.focusValue)){var d=c.focusValue;c.focusValue=b;a.__inUserChangedHandler=!0;a.__flushValueViewModel();a.fireEvent(ABPControlSet.common.types.Events.UserChanged,a,b,d);delete a.__inUserChangedHandler}}});Ext.define('ABPControlSet.view.field.plugin.Field',{override:'ABPControlSet.base.view.field.plugin.Field',registerInputListener:function(a,b){Ext.apply(a,{keyup:{element:this.cmp.inputElement?'inputElement':'element',fn:b,scope:this}});return a}});Ext.define('ABPControlSet.base.view.field.plugin.LinkedLabel',{extend:'Ext.plugin.Abstract',alias:'plugin.abplinkedlabel',init:function(a){var e=a.inputId=a.inputId||Ext.id();var g=this.getLabelableRenderData(a);a.__hideLabel=a.hideLabel;a.__linkedLabel=Ext.widget({forId:e,xtype:'abplabel',required:Ext.isBoolean(a.required)?a.required:Ext.isBoolean(a.allowBlank)?!a.allowBlank:undefined,disabled:a.disabled,hidden:a.hidden===!0?!0:a.hideLabel===!0?!0:!1,responsiveCol:(a.responsiveCol||1)-1,width:a.labelWidth,disabledCls:'x-form-item-default x-item-disabled',cls:g.labelCls+' abp-linked-label',responsiveWidth:a.labelWidth,responsiveColSpan:1,responsiveRow:a.responsiveRow,responsiveRowSpan:1,field:a});var c={};var b=a.up('container');if(!b){c.added=this.onComponentAdded}else {var d=b.items;var f=d.indexOf(a);this.insertLabel(a,b,f)}this.hookIntoFieldLabel(a);Ext.apply(c,{disable:function(b){b.__linkedLabel.disable(!0)},enable:function(b){b.__linkedLabel.enable(!0)},hide:function(b){b.__linkedLabel.hide()},show:function(b){if(!b.__hideLabel){b.__linkedLabel.show()}},beforerender:function(b){if(!b.__hideLabel&&!b.hidden){b.__linkedLabel.show()}else {b.__linkedLabel.hide()}},removed:function(b,c){c.remove(b.__linkedLabel)},destroy:function(b){Ext.destroy(b.__linkedLabel)}});a.on(c)},getLabelableRenderData:Ext.emptyFn,onComponentAdded:function(a,b,c){this.insertLabel(a,b,c)},insertLabel:function(a,b,c){b.insert((c||1)-1,a.__linkedLabel)}});Ext.define('ABPControlSet.base.view.field.plugin.LinkedLabel',{extend:'Ext.plugin.Abstract',alias:'plugin.abplinkedlabel',getLabelableRenderData:function(a){return {}},hookIntoFieldLabel:function(a){var b=a.getLabel();a.setLabel(undefined);a.updateLabel=this.updateLabel;a.setLabel(b)},updateLabel:function(b){var a=this.__linkedLabel;if(a){a.setHtml(Ext.String.htmlEncode(b))}}});Ext.define('ABPControlSet.base.view.field.plugin.RadioGroup',{extend:'Ext.plugin.Abstract',requires:['ABPControlSet.common.types.Events'],alias:'plugin.abpradiogroup',focusValue:null,init:function(a){a.on({focusleave:this.onFocusLeave,focusenter:this.onFocusEnter,scope:this})},onFocusLeave:function(a){var c=this,b=a.getValue();if(Ext.valueFrom(b,null)==null&&Ext.valueFrom(c.focusValue,null)==null){return}if(!a.isEqual(b,c.focusValue)){a.__flushValueViewModel();a.fireEvent(ABPControlSet.common.types.Events.UserChanged,a,b,c.focusValue);c.focusValue=b}},onFocusEnter:function(a){a.fireEvent(ABPControlSet.common.types.Events.RadioGroupFocus,a);this.focusValue=a.getValue()}});Ext.define('ABPControlSet.view.field.plugin.RadioGroup',{override:'ABPControlSet.base.view.field.plugin.RadioGroup'});Ext.define('ABPControlSet.base.view.field.plugin.RelativeDateTime',{extend:'Ext.plugin.Abstract',alias:'plugin.abprelativedatetime',absoluteValue:null,relativeValue:null,maxRelativeValue:null,canBeRelative:!1,dateFormat:'jS F Y',init:function(a){if(a.xtype!=='abptime'&&a.xtype!=='abpdate'&&a.xtype!=='abpdatetime'){return}else {var c={disable:this.onFieldDisable,enable:this.onFieldEnable,writeablechange:this.onFieldWritable,change:this.onFieldValueChanged,afterrender:this.onFieldRender,scope:this};this.field=a;this.absoluteValue=a.getValue();this.maxRelativeValue=a.maxRelative?a.maxRelative.split('|'):['24','h'];this.field.relativeUpdate=a.relativeUpdate||60;a.on(c);if(a.disabled){this.onFieldDisable()}if(a.readOnly){this.onFieldWritable()}var b=this;b.updateRunner=new Ext.util.TaskRunner();b.updateTask=b.updateRunner.newTask({run:b.updateFieldRelative,interval:b.field.relativeUpdate*1000,scope:b})}},start:function(){if(this.updateTask){this.updateTask.start()}else {this.startAfterRender=!0}},stop:function(){if(this.updateTask){this.updateTask.stop()}},onFieldValueChanged:function(){this.absoluteValue=this.field.getValue();if(this.tip&&this.tip.isVisible()){this.tip.setConfig(this.getTipConfig())}if(this.field.disabled){this.onFieldDisable()}if(this.field.readOnly){this.onFieldWritable()}},onFieldRender:function(){if(this.startAfterRender){this.start();if(this.canBeRelative&&!this.tip){this.createToolTip()}}},onFieldDisable:function(){var a=this.field.getFocusEl();if(a){if(!this.savedTitle){this.savedTitle=a.dom.getAttribute('title')}a.dom.removeAttribute('title')}},onFieldEnable:function(){if(this.savedTitle&&!this.field.readOnly){var a=this.field.getFocusEl();if(a){a.dom.setAttribute('title',this.savedTitle)}}},createToolTip:function(){var b=this.field.getId(),c=this,a=this.getTipConfig();this.tip=Ext.create('Ext.tip.ToolTip',{target:b,title:a.title,minWidth:a.minWidth,html:a.html,cls:'abp-relative-tip',shadow:'drop',dismissDelay:0,listeners:{beforeshow:function(b){var a=c.getTipConfig();b.setMinWidth(a.minWidth);b.setTitle(a.title);b.setHtml(a.html)}}})},getTipConfig:function(){var a=Ext.Date.format(this.absoluteValue,this.dateFormat);var b=ABP.util.Common.actualMeasureText(a,'14px roboto');if(this.field.xtype==='abpdatetime'){var d=Ext.Date.format(this.absoluteValue,'g:i A');a='<span class="tip-date">'+a+'</span><span class="tip-time">'+d+'</span>'}var c={html:ABP.util.RelativeTime.format(this.absoluteValue,!0),title:a,minWidth:b.width+16};return c},onFieldWritable:function(){if(this.field.setValue){this.canBeRelative=this.field.readOnly;if(this.field.readOnly){this.field.addCls('abp-relative-readonly');this.fieldDisabled=this.field.getDisabled();this.field.setDisabled(!0);var a=this.field.getFocusEl();if(a&&!this.tip){this.createToolTip()}}else {this.field.removeCls('abp-relative-readonly');if(typeof this.fieldDisabled!==null){this.field.setDisabled(this.fieldDisabled)}}this.updateFieldRelative()}},checkRelativeValid:function(){var b=new Date();var a=Ext.Date.diff(this.absoluteValue,b,this.maxRelativeValue[1]);if(a>parseInt(this.maxRelativeValue[0])){return !1}return !0},updateFieldRelative:function(){var c=this.checkRelativeValid(),a=this.field.getFocusEl();if(this.field.setRawValue&&this.canBeRelative){if(c){this.relativeValue=ABP.util.RelativeTime.format(this.absoluteValue,!0)}else {this.relativeValue=Ext.Date.format(this.absoluteValue,this.dateFormat)}this.field.setRawValue(this.relativeValue);if(this.tip&&this.tip.isVisible()){var b=this.getTipConfig();this.tip.setMinWidth(b.minWidth);this.tip.setTitle(b.title);this.tip.setHtml(b.html)}if(a){if(!this.savedTitle){this.savedTitle=a.dom.getAttribute('title')}a.dom.removeAttribute('title')}this.start()}else {this.field.setValue(this.absoluteValue);if(this.savedTitle&&a){a.dom.setAttribute('title',this.savedTitle)}this.stop()}},destroy:function(){this.updateTask.destroy();this.updateRunner.destroy();this.callParent()}});Ext.define('ABPControlSet.base.view.grid.plugin.ListView',{extend:'Ext.AbstractPlugin',alias:'plugin.listview',mixins:['Ext.mixin.Observable'],showTitle:!0,autoFillMain:!0,autoFillBody:!1,allowMainDuplication:!1,allowBodyDuplication:!0,showHeaders:!1,gridId:null,config:{fullRow:null,template:null},listTemplateClsPreface:'abp-list-view-template-',cellColumnFieldsTpl:new Ext.XTemplate(['<td class="abp-list-view-cellColumn abp-list-view-cellColumn-{[values.cellColumn]}">','<tpl for="values.cellColumnPriorities">','{%','cellColumnParent=parent;','priorityIndex = xindex - 1;','%}','<table class="abp-list-view-field abp-list-view-field-{[priorityIndex + 1]}">','<tr>','<tpl if=".">','<tpl for=".">','<tpl if=".">','<tpl if="cellColumnParent.includeLabel">','<td class="abp-list-view-field-label abp-list-view-field-label-{[priorityIndex + 1]}">','{fieldLabel}','</td>','</tpl>','{%','values.listViewPlugin.renderCell(values, out, priorityIndex + xindex - 1, cellColumnParent)','%}','<tpl else>','<td class="abp-list-view-field abp-list-view-field-{[priorityIndex + 1]} abp-list-view-field-value abp-list-view-field-value-{[priorityIndex + 1]}">','</td>','</tpl>','</tpl>','</tpl>','</tr>','</table>','</tpl>','</td>',{definitions:'var priorityIndex;var cellColumnParent;',disableFormats:!0}]),namedGridAreaTpl:new Ext.XTemplate(['<tpl for=".">','{% values.listViewPlugin.renderAreaCell(values, out) %}','</tpl>']),gridcellColumnFieldsTpl:new Ext.XTemplate(['<td class="abp-list-view-cellColumn abp-list-view-cellColumn-{[values.cellColumn]} ','{[values.fillColumn === 1 ? values.fillCls : values.noFillCls]} ','abp-list-align-{[values.align]} ','abp-list-justify-{[values.justify]}" ','style="flex: {[values.flex]}">','<tpl for="values.cellColumnPriorities">','{%','cellColumnParent=parent;','priorityIndex = xindex - 1;','rowsToFill = parent.rowsToFill;','%}','<table class="abp-list-view-field abp-list-view-field-{[rowsToFill ? rowsToFill[parseInt(priorityIndex)] : priorityIndex + 1]}','">','<tr>','<tpl if=".">','<tpl for=".">','<tpl if=".">','<tpl if="cellColumnParent.includeLabel">','<td class="abp-list-view-field-label abp-list-view-field-label-{[rowsToFill ? rowsToFill[priorityIndex] : priorityIndex + 1]}">','{fieldLabel}','</td>','</tpl>','{%','values.listViewPlugin.renderCell(values, out, priorityIndex + xindex - 1, cellColumnParent)','%}','<tpl else>','<td class="abp-list-view-field abp-list-view-field-{[rowsToFill ? rowsToFill[priorityIndex] : "nio"]} abp-list-view-field-value abp-list-view-field-value-{[rowsToFill ? rowsToFill[priorityIndex + 1] : priorityIndex + 1]}">','</td>','</tpl>','</tpl>','</tpl>','</tr>','</table>','</tpl>','</td>',{definitions:'var priorityIndex;var cellColumnParent; var rowsToFill;',disableFormats:!0}]),templates:{triData:{tpl:['{%','values.listViewPlugin.renderCellColumn(1, 1, 2, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 3, 6, true, values.params, out, parent);','values.listViewPlugin.renderCellColumn(3, 7, 14, true, values.params, out, parent);','%}',{disableFormats:!0}],start:1,end:14},triImage:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 1, 2, true, values.params, out, parent);','values.listViewPlugin.renderCellColumn(3, 3, 6, true, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:6},duoImage:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 2, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:2},phoneNumberDisplay:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 1, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:1},phoneNumberDisplayInForm:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 1, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:1},emailDisplay:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 1, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:1},singleLineItem:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 1, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:1},singleLineItemWithTrigger:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 1, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 2, 2, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:2},twoLineItem:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 2, 2, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:2},twoLineItemWithTrigger:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 1, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 2, 2, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(3, 3, 3, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:3},threeLineItem:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 1, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 2, 2, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:3},threeLineItemWithTrigger:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 1, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 2, 2, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(3, 3, 3, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(4, 4, 4, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:4},headerLineItemWithThreeFields:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 1, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 2, 2, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(3, 3, 3, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:4},twoLineItemWithPhoneOrEmail:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 2, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:2},gridExample:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 0, false, values.params, out, parent, true);','values.listViewPlugin.renderGridCellColumn(1, 1, 2, false, values.params, out, parent, false, [1,2]);','values.listViewPlugin.renderGridCellColumn(2, 3, 3, false, values.params, out, parent, false, [1]);','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},gridExampleBottom:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 0, false, values.params, out, parent, true);','values.listViewPlugin.renderGridCellColumn(1, 1, 2, false, values.params, out, parent, false, [2,3]);','values.listViewPlugin.renderGridCellColumn(2, 3, 3, false, values.params, out, parent, false, [3]);','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},gridExampleSplit:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 0, false, values.params, out, parent, true);','values.listViewPlugin.renderGridCellColumn(1, 1, 2, false, values.params, out, parent, false, [1,3]);','values.listViewPlugin.renderGridCellColumn(2, 3, 4, false, values.params, out, parent, false, [1,3]);','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},gridExampleImageCenter:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(1, 0, 0, false, values.params, out, parent, true, null, "center");','values.listViewPlugin.renderGridCellColumn(0, 1, 2, false, values.params, out, parent, false, [1,3], "center");','values.listViewPlugin.renderGridCellColumn(2, 3, 4, false, values.params, out, parent, false, [1,3], "center");','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},gridExampleX:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 1, false, values.params, out, parent, false, [1, 3], "center", "bottom");','values.listViewPlugin.renderGridCellColumn(1, 2, 2, false, values.params, out, parent, false, [2], "center", null, 3);','values.listViewPlugin.renderGridCellColumn(2, 3, 4, false, values.params, out, parent, false, [1, 3], "center", "center");','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},gridExampleV:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 1, false, values.params, out, parent, false, [1, 2], "center", "bottom");','values.listViewPlugin.renderGridCellColumn(1, 2, 2, false, values.params, out, parent, false, [3], "center", null, 3);','values.listViewPlugin.renderGridCellColumn(2, 3, 4, false, values.params, out, parent, false, [1, 2], "center", "center");','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},namedAreaGrid:{tpl:['{%','values.listViewPlugin.renderNamedAreaGrid(values, out, parent);','%}',{disableFormats:!0,namedGridTemplate:!0}]},gridDefinedOneColumn:{tpl:['{%','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','%}',{disableFormats:!0,cssGridTemplate:!0}],start:0,end:0},gridDefinedTwoColumns:{tpl:['{%','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','%}',{disableFormats:!0,cssGridTemplate:!0}],start:0,end:2},gridDefinedThreeColumns:{tpl:['{%','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','%}',{disableFormats:!0,cssGridTemplate:!0}],start:0,end:2},gridDefinedFourColumns:{tpl:['{%','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','%}',{disableFormats:!0,cssGridTemplate:!0}],start:0,end:3},gridDefinedFiveColumns:{tpl:['{%','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','%}',{disableFormats:!0,cssGridTemplate:!0}],start:0,end:4},gridExampleFlex:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 0, false, values.params, out, parent, true, null, "left", "bottom");','values.listViewPlugin.renderGridCellColumn(1, 1, 2, false, values.params, out, parent, false, [1,2], null, null, 3);','values.listViewPlugin.renderGridCellColumn(2, 3, 3, false, values.params, out, parent, false, [1], null, "center");','%}',{disableFormats:!0,flexGridTemplate:!0,cols:3,rows:3}],start:0,end:2}},constructor:function(a){a=a||{};a.fullRow=a.fullRow||!1;this.callParent([a]);this.mixins.observable.constructor.call(this)},init:function(c){var a=this;a.gridId=c.controlId;var b=ABP.util.LocalStorage.getForLoggedInUser(a.gridId+'listtemplate');if(b){a.setTemplate(b)}else {var d=a.getTemplate();if(!d){a.setTemplate('triData')}}a.cmp.toggleListView=a.toggleListView.bind(a);c.listViewPlugin=a},toggleListSettings:function(){var c=this,a=c.listSettings;if(a){var b=a.isVisible();a[b?'hide':'show']()}},onListNodeDrop:function(n,l){var c=this,f=c.gridId,e=c.getTemplate(),d=c.templates[e],i=d?d.end:0,h=d?d.start:0,m=l.view,k=m.getStore(),g=k.getRange(),b,j=g.length;for(var a=0;a<j;a++){b=g[a];if(a>=h&&a<=i){b.set('listPriority',a);ABP.util.LocalStorage.setForLoggedInUser(f+e+'priority'+b.get('field'),a)}else {b.set('listPriority',undefined);ABP.util.LocalStorage.removeForLoggedInUser(f+e+'priority'+b.get('field'))}}c.doUpdateTemplate(c.getTemplate())},toggleListView:function(){this.setFullRow(!this.getFullRow())},templateListSorter:function(e,f){var b=e.get('listPriority'),d=f.get('listPriority'),a=e.get('fullColumnIndex'),c=f.get('fullColumnIndex');if(b<=d){return -1}else {if(b>d){return 1}else {if(a<=c){return -1}else {if(a>c){return 1}}}}},updateFullRow:function(a){this.doUpdateFullRow(a)},updateTemplate:function(d){var a=this,c=a.gridId,e=a.templates,b=e[d];a.listTemplate=Ext.destroy(a.listTemplate);if(b){b=new Ext.XTemplate(Ext.clone(b.tpl));a.listTemplate=b;if(c){ABP.util.LocalStorage.setForLoggedInUser(c+'listtemplate',d)}}else {ABP.util.LocalStorage.removeForLoggedInUser(c+'listtemplate')}a.doUpdateTemplate(d)},renderFullRow:function(b,f,e){var c=this,d=c.listTemplate,a={};a.listViewPlugin=c;a.params=b;a.record=b.record;a.recordIndex=b.recordIndex;a.rowIndex=b.rowIndex;d.applyOut(a,f,e);a.record=a.params=a.listViewPlugin=null},renderNamedAreaGrid:function(a,d,c){var e=this,b=e.namedGridAreaTpl;cellValues={};cellValues.listViewPlugin=a.listViewPlugin;cellValues.cells=a.params.cells;b.applyOut(cellValues,d,c)},renderCellColumn:function(k,m,n,j,e,p,l){var h=this,b={params:e},d=h.priorities||{},f=[],i=h.cellColumnFieldsTpl;for(var a=m;a<=n;a++){if(d[a]){for(var c in d[a]){c=d[a][c];if(!(c.column instanceof Ext.Base)){var o=e.columns.length;for(var a=0;a<o;a++){var g=e.columns[a];if(g.dataIndex===c.column.dataIndex){c.column=g;break}}}}}f.push(d[a])}b.cellColumn=k;b.includeLabel=j||!1;b.cellColumnPriorities=f;i.applyOut(b,p,l);b.cellColumn=b.cellColumnPriorities=b.params=null},renderGridCellColumn:function(k,q,s,j,e,u,o,l,m,n,p,r){var h=this,a={params:e},d=h.priorities||{},f=[],i=h.gridcellColumnFieldsTpl;for(var b=q;b<=s;b++){if(d[b]){for(var c in d[b]){c=d[b][c];if(!(c.column instanceof Ext.Base)){var t=e.columns.length;for(var b=0;b<t;b++){var g=e.columns[b];if(g.dataIndex===c.column.dataIndex){c.column=g;break}}}}}f.push(d[b])}a.cellColumn=k;a.rowsToFill=m;a.fillColumn=l?1:0;a.fillCls='abp-list-view-cellColumn-fill';a.noFillCls='abp-list-view-cellColumn-nofill';a.justify=n||'left';a.align=p||'left';a.flex=r||1;a.includeLabel=j||!1;a.cellColumnPriorities=f;i.applyOut(a,u,o);a.cellColumn=a.cellColumnPriorities=a.params=null},renderDefinedCellColumn:function(o,j,r,g){var m=this,b={params:j},f=m.priorities||{},k=[],n=m.gridcellColumnFieldsTpl,h=g.getParent().config.__data.listView.template,a=g.parent;if(a.cellColumnIndex!==0&&!a.cellColumnIndex){a.cellColumnIndex=0}var d=h.cellColumns[a.cellColumnIndex];var i=d.cells?[]:null;if(i){Ext.Array.each(d.cells,function(a){i.push(a.rowNumber+1)})}if(a.cellIndex!==0&&!a.cellIndex){a.cellIndex=0}var p=d.cells?d.cells.length+a.cellIndex:h.numRows+a.cellIndex;for(var c=a.cellIndex;c<p;c++){if(f[c]){for(var e in f[c]){e=f[c][e];if(!(e.column instanceof Ext.Base)){var q=j.columns.length;for(var c=0;c<q;c++){var l=j.columns[c];if(l.dataIndex===e.column.dataIndex){e.column=l;break}}}}a.cellIndex++}k.push(f[c])}b.cellColumn=a.cellColumnIndex;a.cellColumnIndex++;b.rowsToFill=i;b.fillColumn=d.fillColumn?1:0;b.fillCls='abp-list-view-cellColumn-fill';b.noFillCls='abp-list-view-cellColumn-nofill';b.justify=d.horizontalAlign||'left';b.align=d.verticalAlign||'left';b.flex=d.flex||1;b.includeLabel=o||!1;b.cellColumnPriorities=k;n.applyOut(b,r,g);b.cellColumn=b.cellColumnPriorities=b.params=null;if(a.cellIndex===g.cells.length&&a.cellColumnIndex===h.cellColumns.length){a.cellIndex=0;a.cellColumnIndex=0}},renderCell:function(a,f,e,d){var b=d.params;var c=a.column.tdCls;a.column.tdCls=(c||'')+' abp-list-view-field-value abp-list-view-field-value-'+e;b.view.renderCell(a.column,b.record,b.recordIndex,b.rowIndex,a.column.fullColumnIndex-1,f);a.column.tdCls=c},renderAreaCell:function(k,l){var d=k.cells,g=d.length;var h=['a','b','c','d','e'];for(var b=0;b<g;b++){var a=d[b],c=a.config,e=c.horizontalAlign,f=c.verticalAlign,i=h[a.colIdx],j=a.rowIdx;l.push('<td priority="'+b+'" data-index="'+a.name+'" class="cell-placeholder abp-list-view-field-value abp-grid-cell-type-'+a.xtype+'" style="grid-area: '+(i+j)+'; justify-self: '+e+'; align-self: '+f+';"></td>')}},onTemplateChange:function(c,b){var a=this;a.setTemplate(b);if(a.setListSettings){a.setListSettings()}},updatePriorities:function(o){var e=this,q=e.getTemplate(),n=e.cmp.columnApi,r=o.length,a,m,p,j,l,h,i=[],c=null,k,d=null;for(var b=0;b<r;b++){a=o[b];a=a.colDef?a.colDef:a;k=(n?n.getColumn(a.field):a)||a;l=a.dataIndex?a.dataIndex:a.getDataIndex?a.getDataIndex():Ext.isString(a.field)?a.field:null;p=a.text?a.text:a.getText?a.getText():a.headerName;m=a.getCell?a.getCell():null;if(m){if(m.xtype==='expandercell'){continue}}j=parseInt(ABP.util.LocalStorage.getForLoggedInUser(e.gridId+q+'priority'+l));a.listPriority=Ext.isNumber(j)?j:a.listPriority;h={listViewPlugin:e,fullColumnIndex:k.fullColumnIndex,column:k,fieldName:l,fieldLabel:p};if(Ext.isNumber(a.listPriority)||Ext.isString(a.listPriority)){if(!d){d={}}h.priority=a.listPriority;if(!d[a.listPriority]){d[a.listPriority]=[]}d[a.listPriority].splice(0,0,h)}else {if(e.autoFillMain||e.autoFillBody){i.push(h)}}if(Ext.isNumber(a.bodyPriority)||Ext.isString(a.bodyPriority)){if(!c){c={}}h.priority=a.bodyPriority;if(!c[a.bodyPriority]){c[a.bodyPriority]=[]}c[a.bodyPriority].splice(0,0,h)}}if(i.length>0){var f;var g=0;if(e.autoFillMain){for(var b=0;b<15;b++){if(d&&!Ext.isEmpty(d[b])){continue}else {f=i[g];if(Ext.isEmpty(f)){break}if(!Ext.isEmpty(f.bodyPriority)&&!e.allowBodyDuplication){g++;b--;continue}else {if(!d){d={}}f.priority=b;if(!d[b]){d[b]=[]}d[b].splice(0,0,f);g++}}}}if(e.autoFillBody&&g<i.length-1){var g=0;for(var b=0;b<10;b++){if(c&&!Ext.isEmpty(c[b])){continue}else {f=i[g];if(Ext.isEmpty(f)){break}if(!Ext.isEmpty(f.listPriority)&&!e.allowMainDuplication){g++;b--;continue}else {if(!c){c={}}f.priority=b;if(!c[b]){c[b]=[]}c[b].splice(0,0,f);g++}}}}}e.priorities=d;e.bodyPriorities=c},destroy:function(){delete this.bodyPriorities;delete this.priorities;delete this.listTemplate;this.callParent(arguments)}});Ext.define('ABPControlSet.view.listview.ListViewRow',{extend:'Ext.grid.Row',xtype:'listviewrow',requires:['Ext.grid.plugin.RowExpander'],config:{cellsElementStyle:null},setCellsElementStyle:function(a){var b=this;if(!Ext.isEmpty(b.cellsElement)&&!Ext.isEmpty(a)){b.cellsElement.setStyle(a)}},element:{reference:'element',tag:'table',children:[{tag:'tr',reference:'cellsElement',className:Ext.baseCSSPrefix+'cells-el'}]},cellPlaceholderSelector:null,getCellForField:function(d,e){var a,c,f=d.length;for(var b=0;b<f;b++){a=d[b];if(a){c=a.getColumn();if(c.getDataIndex()===e){return a}}}},onAdded:function(i){var a=this,j=[],f=i.listViewPlugin;a.callParent(arguments);if(f){f.renderFullRow({record:null,rowIndex:null,recordIndex:null,cells:a.cells,cellsElement:a.cellsElement},j,this);a.cellsElement.dom.innerHTML=j.join('');var m=a.cells,h=i.getPlugin('rowexpander'),b,c,d,k=a.cellsElement.dom,g=k.querySelectorAll('.'+a.cellPlaceholderSelector),l=g.length;for(var e=0;e<l;e++){b=g[e];if(b){d=b.getAttribute('data-index');if(!Ext.isEmpty(d)){c=a.getCellForField(m,d);if(c){b.appendChild(c.el.dom);c.setRendered(!0)}}}}if(h){a.addColumn(h.getColumn())}}else {a.callParent(arguments)}},toggleCollapsed:function(){var a=this,b=a.getCollapsed();this.setCollapsed(!b);if(b){body=a.getBody();if(body){if(body.isPainted()&&body.el&&body.el.dom&&body.el.dom.scrollIntoViewIfNeeded){Ext.defer(function(){body.el.dom.scrollIntoViewIfNeeded(!1)},50)}else {body.on('painted',function(){if(body.el&&body.el.dom&&body.el.dom.scrollIntoViewIfNeeded){body.el.dom.scrollIntoViewIfNeeded(!1)}},a)}}}},removeColumn:Ext.emptyFn,setColumnWidth:Ext.emptyFn,showColumn:Ext.emptyFn,hideColumn:Ext.emptyFn});Ext.define('ABPControlSet.view.grid.plugin.ListView',{override:'ABPControlSet.base.view.grid.plugin.ListView',requires:['ABPControlSet.view.listview.ListViewRow'],cellPlaceholderSelector:'cell-placeholder',originalItemConfig:null,constructor:function(a){a=a||{};var c=this,b=a.cmp;if(b&&!(b instanceof ABPControlSet.base.view.grid.AGGrid)){c.originalItemConfig=b.getItemConfig()}c.callParent([a])},init:function(){var a=this;a.callParent(arguments);a.addSettings();if(a.showTitle){a.toggleTool=Ext.widget({xtype:'tool',padding:'4px 8px 4px 8px',align:'right',iconCls:'icon icon-list-style-bullets',handler:this.toggleListView,scope:this});if(a.cmp.getTitleBar){a.cmp.getTitleBar().add(a.toggleTool)}else {a.cmp.addTool(a.toggleTool)}}},addSettings:function(){var a=this,e=a.getFullRow(),b=a.cmp;if(a.showTitle){a.settingsTool=Ext.widget({xtype:'tool',align:'right',padding:'4px 8px 4px 8px',iconCls:'icon icon-gearwheels',handler:this.toggleListSettings,hidden:!e,scope:this});if(b.getTitleBar){b.getTitleBar().add(a.settingsTool)}else {b.addTool(a.settingsTool)}}var d=ABP.util.LocalStorage.getForLoggedInUser(a.gridId+'listtemplate');a.listSettings=Ext.widget({xtype:'container',docked:'right',hidden:!0,width:'100%',padding:4,layout:{type:'vbox',align:'stretch'},cls:'abp-list-view-settings',listeners:{show:function(a){a.down('#listOrder').setHideHeaders(!0)}},items:[{xtype:'abpcombobox',fieldLabel:'Template',labelAlign:'top',displayField:'display',valueField:'value',itemId:'templateCombo',forceSelection:!0,listeners:{change:a.onTemplateChange,scope:a},store:Ext.create('ABPControlSet.store.ListViewTemplates'),value:d||'triData'},{xtype:'tree',itemId:'listOrder',flex:1,scrollable:'y',store:Ext.create('Ext.data.TreeStore'),columns:[{xtype:'gridcolumn',dataIndex:'text',flex:1}],rootVisible:!1}]});if(b.getHeaderContainer){var c=b.getHeaderContainer();if(c.endColumnUpdate){Ext.Function.interceptAfter(c,'endColumnUpdate',a.setListSettings,a)}}b.insert(2,a.listSettings);a.setListSettings()},setListSettings:function(){var d=this,e=d.listSettings,i=e.down('#listOrder'),g=i.getStore(),f=d.cmp,h=f.getColumns(),a,b,c=[];h.forEach(function(d){a=d.getText();a=(a||'').trim();b=d.getDataIndex();if(b){c.push({leaf:!0,text:Ext.isEmpty(a)||a!=='&nbsp'?b:a,field:b})}});g.setRoot({expanded:!0,children:c})},renderCell:function(a,c,b,d){c.push('<td priority="'+a.priority+'" data-index="'+a.fieldName+'" class="cell-placeholder abp-list-view-field-value abp-list-view-field-value-'+b+'"></td>')},renderAreaCell:function(l,m){var e=l.cells,h=e.length;var i=['a','b','c','d','e'];for(var b=0;b<h;b++){var a=e[b],c=a.config,f=c.horizontalAlign,g=c.verticalAlign,d=c.spacing,j=i[a.colIdx],k=a.rowIdx;m.push('<td priority="'+b+'" data-index="'+a.name+'" class="cell-placeholder abp-list-view-field-value abp-grid-cell-type-'+a.xtype+'" style="grid-area: '+(j+k)+'; justify-self: '+f+'; align-self: '+g+(Ext.isEmpty(d)?';"></td>':'; padding: '+d+';"></td>'))}},doUpdateFullRow:function(c){var a=this,b=a.cmp;if(b){var j=b.bodyElement,h=a.settingsTool,g=a.listSettings,d=b.config.__data.listView.template;b.setHideHeaders(c);if(c){var e=b.getColumns();a.updatePriorities(e);var i=a.listTemplate;var f={xtype:'listviewrow',cls:a.makeListViewClasses(a,i,d),style:a.makeListViewStyles(d,e),cellPlaceholderSelector:a.cellPlaceholderSelector,template:a.listTemplate,cellsElementStyle:i.namedGridTemplate?a.makeListViewStyles(d,e,!0):null};Ext.applyIf(f,a.originalItemConfig);b.setItemConfig(f)}else {if(g){g.hide()}b.setItemConfig(a.originalItemConfig)}if(h){h[c?'show':'hide']()}b.toggleCls('abp-panel-list-view',c);if(j){j.toggleCls('abp-list-view',c)}a.resetGrid(c,!1)}},makeListViewClasses:function(d,a,b){var c=d.listTemplateClsPreface+d.getTemplate();if(!b){if(a.cssGridTemplate||a.namedGridTemplate){c+=' abp-list-view-template-grid-rows-'+(a.rows?a.rows:1)+'-columns-'+(a.cols?a.cols:1)}if(a.flexGridTemplate){c+=' abp-list-view-template-grid-rows-'+(a.rows?a.rows:1)+'-columns-'+(a.cols?a.cols:1)+' abp-flex-grid'}}else {if(a.namedGridTemplate){c+=' abp-list-view-template-grid-rows-'+(b.numRows?b.numRows:1)+'-columns-'+(b.cellColumns.length||1)}else {if(a.cssGridTemplate){c+=' abp-list-view-template-grid-rows-'+(b.numRows?b.numRows:1)+'-columns-'+b.cellColumns.length}if(a.flexGridTemplate){c+=' abp-list-view-template-grid-rows-'+(b.numRows?b.numRows:1)+'-columns-'+b.cellColumns.length+' abp-flex-grid'}}}return c},makeListViewStyles:function(b,k,m){var e=this;if(!b){return null}else {var c={};var a=b.cellColumns;if(a){var f=[];var h=0;var g=!1;var i='';var l=a.length;for(var d=0;d<l;d++){if(a[d].columnWidth){if(a[d].columnWidth==='100%'){a[d].columnWidth='1fr'}g=!0;f.push(a[d].columnWidth);h++;i+=a[d].columnWidth+' '}else {f.push('auto')}}if(g){var j=e.calculateColumnWidths(f,i,h);if(j){if(!c){c={}}c['grid-template-columns']=j}}c['grid-template-areas']=e.calculateGridTemplateAreas(a,b);if(!Ext.isEmpty(b.rowSpacing)){e.setCellRowSpacing(c,b.rowSpacing)}if(!Ext.isEmpty(b.dataRowSpacing)){e.setDataRowSpacing(c,b.dataRowSpacing)}e.makeColumnCellStyles(a,k,f,a.length,b.numRows);return c?c:null}else {return null}}},setDataRowSpacing:function(f,g){var a=g.split(' ');var e,b,d,c;switch(a.length){case 1:e=a[0];c=a[0];b=a[0];d=a[0];break;case 2:e=a[0];c=a[1];b=a[0];d=a[1];break;case 3:e=a[0];c=a[1];b=a[2];d=a[1];break;case 4:e=a[0];c=a[1];b=a[2];d=a[3];break;}f['margin-left']=d+'px';f['margin-right']=c+'px';f['margin-top']=e+'px';f['margin-bottom']=b+'px'},setCellRowSpacing:function(d,g){var a=g.split(' ');var c,b,f,e;switch(a.length){case 1:c=a[0];e=a[0];b=a[0];f=a[0];break;case 2:c=a[0];e=a[1];b=a[0];f=a[1];break;case 3:c=a[0];e=a[1];b=a[2];f=a[1];break;case 4:c=a[0];e=a[1];b=a[2];f=a[3];break;}d['padding-left']=f+'px';d['padding-right']=e+'px';d['padding-top']=c+'px';d['padding-bottom']=b+'px';d['row-gap']=parseInt(c)+parseInt(b)+'px'},calculateGridTemplateAreas:function(j,n){var p=this;var i='';var o=j.length;var l=n.numRows;var g=[];var e={};var c=['a','b','c','d','e'];for(var a=0;a<o;a++){var k=j[a];var m=k.cells;if(k.fillColumn===!0){for(var h=1;h<=l;h++){e[c[a]+h]=c[a]+1}}for(var b=0;b<l;b++){var f;if(a===0){f=[];g.push(f)}else {f=g[b]}if(m){cell=Ext.Array.findBy(m,function(a){return a.rowNumber===b});if(!Ext.isEmpty(cell)){if(!Ext.isEmpty(cell.colSpan)){for(var d=1;d<=cell.colSpan;d++){if(Ext.isEmpty(e[c[a+d-1]+(b+1)])){e[c[a+d-1]+(b+1)]=c[a]+(b+1)}}}if(!Ext.isEmpty(cell.rowSpan)){for(var d=1;d<=cell.rowSpan;d++){if(Ext.isEmpty(e[c[a]+(b+1+d-1)])){e[c[a]+(b+1+d-1)]=c[a]+(b+1)}}}}}if(!e[c[a]+(b+1)]){f.push(c[a]+(b+1))}else {f.push(e[c[a]+(b+1)])}}}for(var a=0;a<g.length;a++){i+=p.joinTemplateRowArrayToString(g[a])}return i},joinTemplateRowArrayToString:function(a){return '"'+a.join(' ')+'"'},calculateColumnWidths:function(b,d,h){var i=this;var c='';var f=!1;if(d.indexOf('content')>-1){f=!0;if(d.indexOf('px')>-1||d.indexOf('%')>-1){ABP.util.Logger.logError('Cannot specify both match content ("max-content" or "min-content" for width) and numeric column widths in list view row');return !1}}var g=b.length;for(var a=0;a<g;a++){if(f){c+=b[a]+' '}else {if(b[a]==='auto'){var e='1fr ';b[a]=e;c+=e}else {c+=b[a]+' '}}}return c},makeColumnCellStyles:function(d,b,k,i,h){var j=this,a=0;for(var c=0;c<i;c++){var g=0;if(d[c].cells){g=d[c].cells.length}else {g=h}for(var f=0;f<g;f++){var e=null;if(d[c].cells){e=d[c].cells[f]}if(e){if(e.stretch){if(!b[a].config.cell.cls){b[a].config.cell.cls='abp-forms-width-inherit'}else {b[a].config.cell.cls+=' abp-forms-width-inherit'}}}if(d[c].fillColumn===!0){b[a].config.cell.minHeight=Math.max(h*1.1,2)+'rem'}if(!Ext.isEmpty(d[c].columnWidth)&&d[c].columnWidth.indexOf('px')>-1){b[a].config.cell.width=d[c].columnWidth}else {b[a].config.cell.width=null}if(!Ext.isEmpty(d[c].horizontalAlign)){b[a].config.cell.horizontalAlign=d[c].horizontalAlign}else {b[a].config.cell.horizontalAlign='left'}if(!Ext.isEmpty(d[c].verticalAlign)){b[a].config.cell.verticalAlign=d[c].verticalAlign}else {b[a].config.cell.verticalAlign='center'}if(!Ext.isEmpty(e)&&!Ext.isEmpty(e.spacing)){b[a].config.cell.spacing=j.calculateCellSpacing(e.spacing)}if(!Ext.isEmpty(e)&&!Ext.isEmpty(e.rowNumber)){b[a].config.cell.rowIdx=e.rowNumber+1}else {b[a].config.cell.rowIdx=f+1}b[a].config.cell.colIdx=c;a++;if(a>=b.length){break}}if(a>=b.length){break}}},calculateCellSpacing:function(c){var a=c.split(' ');var b='';for(var d in a){b+=a[d]+'px '}return b},doUpdateTemplate:function(){var a=this,b=a.cmp,c=a.getFullRow();if(b&&b.rendered){if(c){var d=b.getColumns();a.updatePriorities(d)}a.resetGrid(c,!0)}},resetGrid:function(b,d){var c=this,a=c.cmp;if(a){a.setVariableHeights(b);a.refresh()}},destroy:function(){delete this.listSettings;delete this.toggleTool;delete this.settingsTool;this.callParent(arguments)}});Ext.define('ABPControlSet.base.view.grid.plugin.AGListView',{extend:'ABPControlSet.base.view.grid.plugin.ListView',alias:'plugin.aglistview',init:function(b){var a=this;a.callParent(arguments);a.mon(b,{beforeembed:a.onBeforeEmbed,scope:a})},addSettings:Ext.emptyFn,onBeforeEmbed:function(h,d){if(d){var a=this;var g=d.components||{};var b=d.sideBar;if(b!==!1){var e=function(){};var c={toolPanels:Ext.isObject(b)?b.toolPanels||[]:[]};b=b===!0?'columns':b;if(Ext.isString(b)){c.defaultToolPanel=b;c.toolPanels.push(b)}var f=ABP.util.LocalStorage.getForLoggedInUser(a.gridId+'listtemplate');e.prototype.init=function(b){a.listSettings=Ext.widget({xtype:'container',padding:4,hidden:!0,cls:'abp-list-view-settings',layout:{type:'vbox',align:'stretch'},listeners:{el:{painted:{fn:function(a){a.component.setSize('100%','100%');a.component.updateLayout();a.component.down('#listOrder').setHideHeaders(!0)},single:!0}}},items:[{xtype:'abpcombobox',fieldLabel:'Template',labelAlign:'top',displayField:'display',valueField:'value',itemId:'templateCombo',forceSelection:!0,listeners:{change:a.onTemplateChange,scope:a},store:Ext.create('ABPControlSet.store.ListViewTemplates'),value:f||'triData'},{xtype:Ext.toolkit==='classic'?'treepanel':'tree',itemId:'listOrder',flex:1,scrollable:'y',hideHeaders:!0,store:Ext.create('Ext.data.TreeStore'),columns:[{xtype:'gridcolumn',dataIndex:'text',flex:1}],listeners:{drop:a.onListNodeDrop,scope:a},viewConfig:Ext.toolkit==='classic'?{plugins:{treeviewdragdrop:{containerScroll:!0}},getRowClass:a.getRowClass.bind(a)}:undefined,rootVisible:!1}],renderTo:Ext.getBody()});b.api.addEventListener('gridColumnsChanged',a.setListSettings.bind(a))};e.prototype.getGui=function(){a.listSettings.show();return a.listSettings.el.dom};c.toolPanels.push({id:'listViewSettings',labelDefault:'List View',labelKey:'listView',iconKey:'list-view',toolPanel:e})}Ext.apply(d,{embedFullWidthRows:!0,getRowStyle:a.getRowStyle.bind(a),sideBar:c,components:g,embedFullWidthRows:!0,getRowHeight:a.getRowHeight.bind(a),groupUseEntireRow:!0,groupRowRenderer:a.groupRowRenderer.bind(a),fullWidthCellRenderer:a.fullWidthRenderer.bind(a),isFullWidthCell:a.isFullWidthCell.bind(a)})}},setListSettings:function(g){if(this.listSettings){var f=this,c=f.cmp.columnApi,e=this.listSettings.down('#listOrder').getStore(),d=c.getAllColumns(),a,b=[];d.forEach(function(c){a=c.colDef.headerName;a=(a||'').trim();if(c.colDef.field){b.push({leaf:!0,text:Ext.isEmpty(a)?c.colDef.field:a,field:c.colDef.field})}});e.setRoot({expanded:!0,children:b})}},isFullWidthCell:function(a){return this.getFullRow()},getRowStyle:function(c){var b=this,a=b.getFullRow();if(a){return {display:'table'}}},getRowHeight:function(f){var c=this,d=c.getTemplate(),e=c.getFullRow();if(e){if(d==='duoImage'){return 80}else {var b=f.api.gridPanel.getGui(),a=b?b.clientWidth:0;if(a<700){return 240}else {if(a<900){return 180}else {return 105}}}}else {return 32}},fullWidthRenderer:function(a){var e=this,f=[],h=e.getTemplate(),d=a.api.rowRenderer.rowCompsByIndex[a.rowIndex];Ext.apply(a,{record:a.node,recordIndex:a.rowIndex,rowComp:d});e.renderFullRow(a,f,a);var b=document.createElement('tr');b.className=(b.className||'')+' abp-full-width-list-row '+e.listTemplateClsPreface+h;b.innerHTML=f.join('');var c=d.cellComps;var g=Object.values?Object.values(c):Object.keys(c).map(function(b){return c[b]});d.callAfterRowAttachedOnCells(g,b);return b},groupRowRenderer:function(a){},renderCell:function(l,n,m,k){var j=l.column,d=k.params,g=d.eGridCell,i=d.rowComp;var b=[];i.createNewCell(j,g,b,[]);if(b.length>0){var h=b.join('');var a=h.replace('div','td');var e=a.lastIndexOf('div');var c=a.substring(e);c=c.replace('div','td');var f=a.substring(0,e);n.push((f+c).replace('class="','class="abp-list-view-field-value abp-list-view-field-value-'+m+' '))}},doUpdateFullRow:function(b){var c=this,a=c.cmp;if(a&&a.gridApi){a.toggleCls('abp-ag-list-view',b);a.gridApi.headerRootComp.setVisible(!b);c.resetGrid(b)}},doUpdateTemplate:function(){var a=this;if(a.cmp&&a.cmp.rendered){this.resetGrid(this.getFullRow())}},resetGrid:function(c){var b=this,a=b.cmp;if(a){if(c){b.updatePriorities(a.columnApi.getAllColumns())}a.gridApi.resetRowHeights();a.gridApi.redrawRows()}}});Ext.define('ABPControlSet.view.grid.plugin.AGListView',{override:'ABPControlSet.base.view.grid.plugin.AGListView'});Ext.define('ABPControlSet.base.view.grid.AGGrid',{extend:'Ext.Panel',requires:['ABPControlSet.base.view.grid.plugin.AGListView'],layout:'fit',agGrid:null,columnDefs:null,rowData:null,gridApi:null,isUsingSenchaStore:!1,listOnTop:!1,listView:!1,gridHeight:null,cls:['ag-theme-balham'],bodyCls:'abp-ag-grid-body',border:!0,config:{store:null},constructor:function(a){a=a||{};a.items=[{xtype:'component',itemId:'agGrid',style:{maxWidth:'calc(100% - 1px)',height:'100%',minHeight:Ext.isNumber(a.gridHeight)?a.gridHeight+'px':Ext.isString(a.gridHeight)?a.gridHeight:'100%'}}];a.listView=Ext.isBoolean(a.listView)?a.listView:this.listView===!1?!1:!0;if(a.listView){a.plugins=a.plugins||{};a.plugins.aglistview=a.plugins.aglistview||!0}a.store=Ext.create('ABPControlSet.store.AGGrid');this.callParent([a])},beginEmbed:function(){var a=this,c=a.down('#agGrid'),g=a.getHidden(),d=c.getEl?c.getEl():c.el||c.element;if(g){a.on({show:a.beginEmbed,single:!0});return}if(d){a.on('destroy',a.destroyAGGrid);a.embeddedEl=d;if(typeof agGrid==='object'){var f=document.querySelector('#'+d.id);var b=a.getOptions()||{};b.parentComponent=a;b.onCellValueChanged=a.changeCellValue;b.suppressLoadingOverlay=!0;b.suppressNoRowsOverlay=!0;if(a.fireEvent('beforeembed',a,b)!==!1){a.agGrid=new agGrid.Grid(f,b);a.gridApi=b.api;a.columnApi=b.columnApi;var e=a.getStore();if(e instanceof ABPControlSet.store.AGGrid){e.setColumnApi(a.columnApi);e.setGridApi(a.gridApi)}a.fireEvent('embed',a,a.agGrid,a.gridApi,a.columnApi)}}else {d.setHtml('Necessary files to use the ag-grid were not initialized properly. Please review the AGGrid component documentation for details on how to include the proper files.')}a.afterEmbed(a.agGrid,a.gridApi,a.columnApi)}},afterEmbed:Ext.emptyFn,embeddedEl:null,copyDataFromStore:function(){var e=this;var d=e.getStore();var c=d.getData().items.map(function(a){return a.data});var b=[];var a=0;for(;a<c.length;a++){b[a]=JSON.parse(JSON.stringify(c[a]))}return b},changeCellValue:function(b){var a=this.parentComponent;var d=a.getStore();if(d){var c=d.findRecord('id',b.data.id);if(c){c.set(b.data);a.fireEvent(ABPControlSet.common.types.Events.AGGridUpdate,a,c)}}else {a._update(null,b.data,null,null,null,null)}},addRowValue:function(d){var a=this;var c=a.getStore();var b=Ext.create('Ext.data.Model',d.data);if(c){c.add(b);a.fireEvent(ABPControlSet.common.types.Events.AGGridAdd,a,a.up('container'),c.indexOf(b))}else {a._add(null,b,null,null)}},removeRowValue:function(e){var a=this;var b=a.getStore();var f=e.data.map(function(a){return a.id});var d=0;var c;if(b){for(;d<f.length;d++){c=b.findRecord('id',f[d]);b.remove(c)}a.fireEvent(ABPControlSet.common.types.Events.AGGridRemove,a,a.up('container'),b.indexOf(c))}else {a._remove(null,e,null,null,null)}},getOptions:Ext.emptyFn,onChange:Ext.emptyFn,destroyAGGrid:function(){var a=this;delete a.embeddedEl;a.agGrid.destroy();delete a.agGrid;delete a.gridApi;delete a.columnApi}});Ext.define('ABPControlSet.base.mixin.Column',{extend:'Ext.Mixin',mixinConfig:{id:'abpcolumn'},config:{fieldFormatter:null,fieldFormat:null},constructor:function(){this.callParent(arguments);this.hookFormatRenderer()},hookFormatRenderer:Ext.EmptyFn,columnFormatRenderer:Ext.emptyFn});Ext.define('ABPControlSet.mixin.Column',{override:'ABPControlSet.base.mixin.Column',hookFormatRenderer:function(){var a=this.getCell(),b=this.getRenderer?this.getRenderer():this.renderer,c=a?a.getRenderer?a.getRenderer():a.renderer:null;if(!b&&!c){if(a){if(a.setRenderer){a.setRenderer(this.columnFormatRenderer)}else {a.renderer=this.columnFormatRenderer}}else {this.setRenderer(this.columnFormatRenderer)}}},columnFormatRenderer:function(a,f,e,g,b){var c=b.getFieldFormatter(),d=b.getFieldFormat();if(Ext.isFunction(c)){return c(b,d,(Ext.isEmpty(a)?'':a).toString(),!1,a)}else {return a}}});Ext.define('ABPControlSet.base.view.grid.Column',{extend:'Ext.grid.column.Column',xtype:'abpcolumn',requires:['ABPControlSet.base.mixin.Column'],mixins:['ABPControlSet.base.mixin.Column'],constructor:function(a){a=a||{};this.callParent([a]);this.mixins.abpcolumn.constructor.call(this)}});Ext.define('ABPControlSet.common.Constants',{statics:{COLUMN_WIDTH_SAMPLE_PERCENTAGE:0.05,MINIMUM_COLUMN_WIDTH:40,COLUMN_HEADER_RIGHT_ALIGN_PADDING:6,COLUMN_HEADER_REQUIRED_PADDING:12,COLUMN_HEADER_EXTRA_PADDING:4,COLUMN_MENU_TRIGGER_PADDING:15,COLUMN_SORT_ARROW_PADDING:15,COLUMN_FILTER_ICON_PADDING:10,RESPONSIVE_SNAPPOINT_WIDTH_1:510,MAP_URL_FORMAT_STRING:'https://www.google.com/maps/search/?api=1&query={0}'}});Ext.define('ABPControlSet.base.view.grid.plugin.Grid',{extend:'Ext.plugin.Abstract',requires:['ABPControlSet.common.Constants'],id:'abpgrid',alias:'plugin.abpgrid',getTableView:Ext.emptyFn,getHeaderContainer:Ext.emptyFn,getNecessaryCells:Ext.emptyFn,sizeToContent:function(){var a=this.cmp;var d=a.recordsPerPage;if(a.recordsPerPageSizing&&Ext.isNumber(d)&&!a.hidden&&!a.destroyed&&!a.destroying){var b=a.getStore();var g=this.getTableView();if(b&&g){var k=b.isBufferedStore?b.getTotalCount():b.getCount();var j=b.isBufferedStore?b.data.getCount():b.getCount();var h=k<j?j:k;var e=0;var c=d;var l=a.currentRecordsPerPageCalc;if(d>h){c=h}if(c===l){return}if(a.fireEvent('beforesizetocontent',a)!==!1){var i=Ext.getScrollbarSize(!0);if(i){e=i.height||0}a.fireEvent('beforeheightsizetocontent',a);a.setHeight(null);var f=22;if(a.rowLines){f+=1}var m=Math.max(c,1)*f+e;g.setMinHeight(e+f);g.setHeight(m);a.currentRecordsPerPageCalc=c}}}},sizeColumnsToContent:function(a,h){var i=this.cmp;if(i.columnSizing){a=a||!1;if(!a){var d=this.getTableView();if(d){var g=d.body;var b=g?g.dom:null;if(!b||b.children&&b.children.length===0){a=!0}else {var f=d.headerCt;var e=f?f.el:null;var c=e?e.query('.x-box-target')[0]:null;if(!c||c.children&&c.children.length===0){a=!0}}}}if(a){Ext.defer(this.doSizeColumnsToContent,1,this,[h])}else {this.doSizeColumnsToContent(h)}}},doSizeColumnsToContent:function(o){var b=this.cmp;var k=this.getHeaderContainer();if(k&&!b.hidden&&(!b.destroyed&&!b.destroying)){var l=this.getTableView();if(b.fireEvent('beforesizecolumnstocontent',b)!==!1){var i=k.query('gridcolumn');var n=i.length;var a;var c;var f;var e;var g=[];var j;i.reverse();for(var d=0;d<n;d++){a=i[d];if(a.isVisible()&&!a.flex){if(l.isLockingView){f=a.up('grid');e=f?f.getView?f.getView():f:null}else {e=l}if(e){j=a.__maxContentWidth;a.__maxContentWidth=this.getContentWidth(e.el,a,o);if(a.__maxContentWidth===!1){if(Ext.isFunction(e.getMaxContentWidth)){a.__maxContentWidth=e.getMaxContentWidth(a)}}if(j!=a.__maxContentWidth){g.push(a)}}}}var m=g.length;var h=!1;for(var d=0;d<m;d++){a=g[d];if(a.isVisible()&&!a.flex){c=a.__maxContentWidth;if(Ext.isNumber(a.minColWidth)&&c<a.minColWidth){c=a.minColWidth}else {if(Ext.isNumber(a.maxColWidth)&&c>a.maxColWidth){c=a.maxColWidth}}a.greatestWidth=a.greatestWidth||0;if(c>a.greatestWidth){if(h===!1){b.fireEvent('beforecolumnsupdated',b);h=!0}a.greatestWidth=c;a.setWidth(c)}}}if(h===!0){b.fireEvent('aftercolumnsupdated',b)}}}},getContentWidth:function(C,b,D){var p=this.getNecessaryCells(C,b,D);var n;if(Ext.isEmpty(n)){n=Ext.os.deviceType==='Desktop'}var e=0,d=ABPControlSet.common.Constants,v=8,i=p[0];if(i){if(Ext.isEmpty(i.innerText)&&i.innerHTML){return !1}else {var o=Ext.fly(i);if(o){var m=new Ext.util.TextMetrics(i);var B=parseInt(o.getStyle('padding-left'),10)||0;var z=parseInt(o.getStyle('padding-right'),10)||0;var u=z+B;var a=[];var g=0;var w;var x=p.length;var k;var l=Math.ceil(x*d.COLUMN_WIDTH_SAMPLE_PERCENTAGE);for(var c=0;c<x;c++){k=p[c].innerText;w=k.length;if(w>g){if(l>a.length){a.push(k)}else {var t;for(var f=0;f<a.length;f++){if(g===0||a[f].length===g){t=f}}a[t]=k}g=0;for(var f=0;f<a.length;f++){if(g===0||a[f].length<g){g=a[f].length}}}}var y=Math.max;var j;var s=a.length>l?l:a.length;if(!n){v=m.getWidth('A');for(var c=0;c<s;c++){j=a[c].length*v+u;e=y(e,j)}}else {for(var c=0;c<s;c++){j=m.getWidth(Ext.htmlEncode(a[c]))+u;e=y(e,j)}}Ext.destroy(m)}}}if(b.el){var h=b.allowBlank===!1?d.COLUMN_HEADER_REQUIRED_PADDING:d.COLUMN_HEADER_EXTRA_PADDING;var r=new Ext.util.TextMetrics(b.el);h+=r.getWidth(b.text)||0;Ext.destroy(r);if(b.align==='right'){h+=d.COLUMN_HEADER_RIGHT_ALIGN_PADDING}if(b.allowFilter){var A=b.getFilterValue();if(!Ext.isEmpty(A)){h+=d.COLUMN_FILTER_ICON_PADDING}}if(!Ext.isEmpty(b.sortState)){h+=d.COLUMN_SORT_ARROW_PADDING}var q=b.triggerBuffer?e+b.triggerBuffer:e;if(!b.menuDisabled){h+=d.COLUMN_MENU_TRIGGER_PADDING}e=q<h?h:q}return e<d.MINIMUM_COLUMN_WIDTH?d.MINIMUM_COLUMN_WIDTH:e}});Ext.define('ABPControlSet.view.grid.plugin.Grid',{override:'ABPControlSet.base.view.grid.plugin.Grid',init:function(a){if(a.columnSizing||a.recordsPerPageSizing){var b=this.getTableView();b.addListener({painted:function(){if(!this.destroyed){this.sizeColumnsToContent(!1)}},refresh:function(){if(!this.destroyed){this.sizeColumnsToContent(!1)}},scope:this})}},getNecessaryCells:function(b,a,c){return a.getCells()},getTableView:function(){return this.cmp},getHeaderContainer:function(){if(!this.destroyed){return this.cmp.getHeaderContainer()}}});Ext.define('ABPControlSet.base.mixin.Component',{extend:'Ext.Mixin',requires:['ABPControlSet.base.view.contextmenu.plugin.ContextMenu'],config:{responsiveWidth:null,backgroundColor:null,foregroundColor:null},mixinConfig:{id:'abpcomponent'},constructor:function(a){a=a||{};if(a.contextMenu){this.addCSPlugin(a,'abpcontextmenu')}this.callParent([a])},getContextMenuData:Ext.emptyFn,addCSPlugin:function(a,b){if(a){a.plugins=a.plugins||{};if(Ext.isObject(a.plugins)&&!a.plugins[b]){a.plugins[b]=b}else {if(Ext.isArray(a.plugins)&&!a.plugins.indexOf(b)>-1){a.plugins.push(b)}}}},removeCSPlugin:function(a,b){if(a){if(Ext.isObject(a.plugins)&&a.plugins[b]){delete a.plugins[b]}else {if(Ext.isArray(a.plugins)&&a.plugins.indexOf(b)>-1){a.plugins=Ext.Array.remove(a.plugins,b)}}}},updateBackgroundColor:function(b){var a=this;var c=Ext.isClassic?a.el&&a.rendered?a.el:a.protoEl:a.element?a.element:null;if(c){c.setStyle('background-color',b)}else {a.style=a.style||{};a.style.backgroundColor=b}},updateForegroundColor:function(b){var a=this;var c=Ext.isClassic?a.el&&a.rendered?a.el:a.protoEl:a.element?a.element:null;if(c){c.setStyle('color',b)}else {a.style=a.style||{};a.style.color=b}},getBackgroundColor:function(){var a=this;var b=Ext.isClassic?a.el&&a.rendered?a.el:a.protoEl:a.element?a.element:null;if(b){return b.getStyle('background-color')}else {if(Ext.isObject(a.style)){return a.style.backgroundColor}else {return a.callParent()}}},getForegroundColor:function(){var a=this;var b=Ext.isClassic?a.el&&a.rendered?a.el:a.protoEl:a.element?a.element:null;if(b){return b.getStyle('color')}else {if(Ext.isObject(a.style)){return a.style.color}else {return a.callParent()}}},__flushValueViewModel:function(){var d=this,c=d.bind||{},b=c['value'],a=b?b.owner:null;if(a){a.notify()}},updateResponsiveWidth:function(a){this.responsiveWidth=a;if(this.rendered){if(this.updateLayout){this.updateLayout()}else {this.setWidth(this.getWidth())}}},userSetValue:function(c){var a=this,b=!Ext.isEmpty(a.focusValue)?a.focusValue:Ext.isFunction(a.getValue)?a.getValue():a.value;if(Ext.isFunction(this.setValue)){if(Ext.isFunction(a.isEqual)&&!a.isEqual(c,b)||c!==b){a.focusValue=b;a.setValue(c)}}}});Ext.define('ABPControlSet.mixin.Component',{override:'ABPControlSet.base.mixin.Component'});Ext.define('ABPControlSet.base.mixin.Button',{extend:'ABPControlSet.base.mixin.Component',config:{icons:null,iconFontSize:null},setIconFontSize:function(a){var b=this,c=b.getIconFontSize();if(!Ext.isEmpty(c)&&Ext.isEmpty(a)||!Ext.isEmpty(a)){b.updateButtonIconStyle({'font-size':Ext.isNumber(a)?a+'px':a})}this.callParent(arguments)},updateButtonIconStyle:Ext.emptyFn});Ext.define('ABPControlSet.mixin.Button',{override:'ABPControlSet.base.mixin.Button',updateIcons:function(a){var b=this,f=b.iconElement,d=b.hasIconCls;if(Ext.isString(a)){a=a.split(',')}if(a&&a.length>0){b.addCls(d);var e='';var g=a.length;for(var c=0;c<g;c++){e+='url('+a[c]+')'+(g===c+1?'':',')}f.setStyle('background-image',e)}else {f.setStyle('background-image','');if(!b.getIconCls()){b.removeCls(d)}}},updateForegroundColor:function(b){var a=this;this.callParent(arguments);if(a.rendered){var c=a.textElement;if(c){c.setStyle('color',b)}}else {a.on('painted',function(){a.textElement.setStyle('color',b)},a)}},updateBackgroundColor:function(b){var a=this;this.callParent(arguments);if(a.rendered){var c=a.element;if(c){c.setStyle('background-color',b);c.setStyle('border-color',b)}}else {a.on('painted',function(){var c=a.element;c.setStyle('background-color',b);c.setStyle('border-color',b)},a)}},updateButtonIconStyle:function(b){var a=this;if(a.rendered){if(a.iconElement){a.iconElement.setStyle(b)}}else {a.on('painted',function(){if(a.iconElement){a.iconElement.setStyle(b)}})}}});Ext.define('ABPControlSet.base.mixin.CardContainer',{extend:'Ext.Mixin',mixinConfig:{id:'abpcardcontainer'},singletons:null,constructor:function(a){a=a||{};a.singletons=new Ext.util.Collection({keyFn:function(b){return b['cardId']}});this.callParent([a])},showView:function(k,g,f){f=f||!1;g=g||!1;Ext.suspendLayouts();var b=this,l=b.getLayout(),i=Ext.toolkit==='modern'?b.setActiveItem.bind(b):l.setActiveItem.bind(l),c=b.items,n=c.length;var a=c.findBy(function(a){return a['cardId']===k});var e=b.singletons.get(k);if(e){var j=e.lastHostId;if(j){a=c.findBy(function(a){return a['cardId']===j});if(a){a.add(e)}}}if(a){if(a.isHost){var m=a.hostedCardId,d=b.singletons.get(m);if(d){a.add(d);d.lastHostId=d.hostCardId=a.cardId}}var h=c.indexOf(a);if(g){b.removeAll(!0)}else {if(f&&h<n){b.destroyNewer(h)}}if(c.indexOf(a)===-1){a=b.add(a)}if(i){i(a)}Ext.resumeLayouts(!0);return !0}Ext.resumeLayouts(!0);return !1},destroyNewer:function(e){var d=this,a,c=d.items,f=c.length;for(var b=f;b>e;b--){a=c.getAt(b);if(a){if(a.isHost){a.removeAll(!1)}d.remove(a,{destroy:!0})}}},addView:function(a,i,h){i=i||!1;h=h===!1?!1:!0;var b=this,m=a,f=b.items,e=b.getLayout(),j=Ext.toolkit==='modern'?b.setActiveItem.bind(b):e.setActiveItem.bind(e),n=e.getActiveItem?e.getActiveItem():b.getActiveItem?b.getActiveItem():null,g=f.indexOf(n);Ext.suspendLayouts();var o=f.length;if(i){b.removeAll(!0)}else {if(h&&o>g&&g!==-1){b.destroyNewer(g)}}if(a){if(a.singleton===!0){var l=!0;var c=b.singletons.get(a.cardId);if(c){var k=c.lastHostId;var d=c.hostCardId;if(k===d){a=f.findBy(function(b){return b['cardId']===k});if(a){a.add(c);l=!1}else {a=m}}}if(l){if(!c){b.singletons.add(a)}var d=a.hostCardId||Ext.id();a.lastHostId=d;a=Ext.widget({xtype:'container',isHost:!0,layout:'fit',cardId:d,hostedCardId:a.cardId,items:[a]})}}a=b.add(a);if(j){j(a)}}else {a=!1}Ext.resumeLayouts(!0);return a},forwardView:function(){var a=this,d=a.items,b=a.getLayout(),f=Ext.toolkit==='modern'?a.setActiveItem.bind(a):b.setActiveItem.bind(b);var c,g=b.getActiveItem?b.getActiveItem():a.getActiveItem?a.getActiveItem():null,e=d.indexOf(g);if(e!==-1){c=d.getAt(e+1)}if(c&&f){f(c)}},backView:function(e,d){var a=this,c=a.getLayout(),i=Ext.toolkit==='modern'?a.setActiveItem.bind(a):c.setActiveItem.bind(c),h=c.getActiveItem?c.getActiveItem():a.getActiveItem?a.getActiveItem():null,f=a.items;Ext.suspendLayouts();d=d||!1;e=e||1;var g=h?f.indexOf(h):null,b=Ext.isNumber(g)?g-e:null;if(Ext.isNumber(b)){var j=f.getAt(b<0?0:b);if(d){if(b<0){a.removeAll(!0)}else {a.destroyNewer(b)}}if(j&&i&&b>=0){i(j)}}Ext.resumeLayouts(!0)}});Ext.define('ABPControlSet.mixin.CardContainer',{override:'ABPControlSet.base.mixin.CardContainer',destroyNewer:function(e){var d=this,c=d.items,a;for(var b=c.length;b>e;b--){a=c.getAt(b);if(a){d.remove(a,{destroy:!0})}}}});Ext.define('ABPControlSet.base.mixin.Field',{extend:'ABPControlSet.base.mixin.Component',config:{fieldLabel:null,fieldFormatter:null,fieldFormat:null,fieldFormatOnLoad:!0,required:null,spellcheck:!0,labelForegroundColor:null,labelHidden:null,blankText:null,sizeToInnerContent:null,tagForReadOnly:null},mixinConfig:{after:{setValue:'onValueUpdate',destroy:'doCleanup',setReadOnly:'onReadOnlyUpdate',afterRender:'onAfterRender'}},__linkedLabel:null,constructor:function(a){a=a||{};this.addCSPlugin(a,'abpfield');if(a.linkedLabel){this.addCSPlugin(a,'abplinkedlabel')}this.callParent([a])},onValueUpdate:function(e){var a=this,c=a.getFieldFormatOnLoad();if(c&&!a.userTyping&&!a.containsFocus){var b=a.getFieldFormatter();var d=a.getFieldFormat();if(Ext.isFunction(b)){a.setFieldFormattedValue(b,d,!1)}}if(a.getSizeToInnerContent()){a.doSizeToInnerContent()}if(a.getTagForReadOnly()){a.doReadOnlyTagUpdate()}},updateSizeToInnerContent:function(a){this.toggleCls('abp-size-to-content-input',a);if(a){this.doSizeToInnerContent()}},onAfterRender:Ext.emptyFn,doReadOnlyTagUpdate:function(){var a=this,c=a.getReadOnly(),b=a.readOnlyElement,d=a.getValue();if(b){a.toggleCls('abp-read-only-link-field',c);if(Ext.isModern){b.setHtml(Ext.String.htmlEncode(a.getInputValue()))}else {b.setHtml(Ext.String.htmlEncode(a.getRawValue()))}if(a.getTagForReadOnly()==='a'){b.set({'href':a.formatUsageUrl(d)});if(a.usage==='url'||a.usage==='address'){b.set({'target':'_blank','rel':'noopener noreferrer'})}}}},formatUsageUrl:function(b){var c=this,a;switch(c.usage){case 'phone':a='tel:{0}';break;case 'email':a='mailto:{0}';break;case 'address':a=ABPControlSet.common.Constants.MAP_URL_FORMAT_STRING;break;default:a='{0}';break;}return Ext.String.format(a,b)},onReadOnlyUpdate:function(){var a=this;if(a.getTagForReadOnly()){var c=a.getReadOnly(),b=a.readOnlyElement;if(b){a.toggleCls('abp-read-only-link-field',c)}}},doSizeToInnerContent:Ext.emptyFn,getBackgroundColor:function(){var a=this.getInputElement();if(a){return a.getStyle('background-color')}else {return this._backgroundColor}},getForegroundColor:function(){var a=this.getInputElement();if(a){return a.getStyle('color')}else {return this._foregroundColor}},updateBackgroundColor:function(b){var a=this.getInputElement();if(a&&this.rendered){a.setStyle('background-color',b)}},updateForegroundColor:function(b){var a=this.getInputElement();if(a&&this.rendered){a.setStyle('color',b)}},getLabelForegroundColor:function(){var b=this;var a=b.getLabel();if(Ext.isObject(a.style)){return a.style.color}else {return b.callParent()}},updateLabelForegroundColor:function(b){var c=this;var a=c.labelElement;if(a){a.setStyle('color',b)}},getBlankText:function(a){return this.blankText},setBlankText:function(a){this.blankText=a},setFieldFormattedValue:Ext.emptyFn,doCleanup:function(){if(this.inputTextMetrics){this.inputTextMetrics=this.inputTextMetrics.destroy()}if(this.readOnlyElement){this.readOnlyElement=this.readOnlyElement.destroy()}}});Ext.define('ABPControlSet.mixin.Field',{override:'ABPControlSet.base.mixin.Field',constructor:function(a){this.callParent([a]);this.updateRequired=this.onUpdateRequired},onUpdateRequired:function(b){var a=this;a.superclass.updateRequired.apply(this,arguments);if(a.__linkedLabel){a.__linkedLabel.toggleCls('abp-mandatory',b)}if(a.labelElement){a.labelElement.toggleCls('abp-mandatory',b)}},updateFieldLabel:function(a){this.setLabel(a)},getFieldLabel:function(){return this.getLabel()},getInputElement:function(){return this.inputElement},updateSpellcheck:function(a){if(Ext.isFunction(this.setAutoCorrect)){this.setAutoCorrect(!!a)}if(Ext.isFunction(this.setInputAttribute)){this.setInputAttribute('spellcheck',a?'true':'false')}},updateForegroundColor:function(b){var a=this;if(a.rendered){this.callParent(arguments)}else {a.on('painted',function(){a.inputElement.setStyle('color',b)},a)}},updateBackgroundColor:function(b){var a=this;if(a.rendered){this.callParent(arguments)}else {a.on('painted',function(){a.inputElement.setStyle('background-color',b)},a)}},getLabelHidden:function(){var a=this;return a.labelElement.el.getHidden()},setLabelHidden:function(b){var a=this;if(b){a.labelElement.el.hide()}else {a.labelElement.el.show()}},fromSetFormattedValue:!1,setFieldFormattedValue:function(d,e,c){var a=this.getInputValue?this.getInputValue():this.getValue(),b=d(this,e,(Ext.isEmpty(a)?'':a).toString(),c,a);if(c){this.setInputValue(b)}else {if(!this.fromSetFormattedValue){this.fromSetFormattedValue=!0;this.setValue(b)}}this.fromSetFormattedValue=!1},onAfterRender:function(){var a=this,c=a.getTagForReadOnly();if(c){var b=a.innerElement;if(b){a.readOnlyElement=b.createChild({tag:a.getTagForReadOnly(),reference:'readOnlyElement',tabindex:a.inputTabIndex,cls:Ext.baseCSSPrefix+'input-el abp-read-only-link'});a.doReadOnlyTagUpdate()}}},doSizeToInnerContent:function(){var a=this,m=a.el,b=a.afterInputElement,h=b?b.getWidth():0,c=a.bodyWrapElement,k=m.getWidth(),e=a.inputElement,j=a.labelTextElement?a.labelTextElement.getWidth():0,i=a.inputTextMetrics=a.inputTextMetrics||new Ext.util.TextMetrics(e),d=k-j,l=a.getInputValue(),g=i.getWidth(l)+e.getPadding('lr')+h,f=g>d?d:g;if(f&&c){c.setMaxWidth(f)}}});Ext.define('ABPControlSet.base.mixin.Checkbox',{extend:'ABPControlSet.base.mixin.Field',config:{fieldLabel:null},lastClickTime:null,IOS_USER_CLICK_IS_CHANGE_SOURCE_TIMEOUT:300,constructor:function(a){a=a||{};if(a.linkedLabel){this.addCSPlugin(a,'abplinkedlabel')}this.callParent([a])}});Ext.define('ABPControlSet.mixin.Checkbox',{override:'ABPControlSet.base.mixin.Checkbox',updateFieldLabel:function(a){this.setLabel(a)},getFieldLabel:function(){return this.getLabel()},updateForegroundColor:function(b){var a=this;if(a.rendered){var c=a.iconElement;if(c){c.setStyle('color',b)}}else {a.on('painted',function(){a.iconElement.setStyle('color',b)},a)}},updateBackgroundColor:function(b){var a=this;if(a.rendered){var c=a.iconElement;if(c){c.setStyle('background-color',b)}}else {a.on('painted',function(){a.iconElement.setStyle('background-color',b)},a)}},getBackgroundColor:function(){var b=this;if(b.rendered){var a=b.iconElement;if(a){return a.getStyle('background-color')}}else {return this._backgroundColor}},getForegroundColor:function(){var b=this;if(b.rendered){var a=b.iconElement;if(a){return a.getStyle('color')}}else {return this._foregroundColor}}});Ext.define('ABPControlSet.base.mixin.ComboBox',{extend:'ABPControlSet.base.mixin.Field',config:{publishListValue:!1,listValue:null},constructor:function(a){a=a||{};a.publishes=a.publishes||[];a.publishes.push('listValue');this.callParent([a])}});Ext.define('ABPControlSet.base.mixin.CustomControl',{extend:'ABPControlSet.base.mixin.Component',beginEmbed:function(){var a=this,c=a.getHidden(),b=a.embeddedEl;if(c){a.on({show:a.beginEmbed,single:!0,scope:this,priority:999});return}if(b){a.on('destroy',a.destroyEmbedded);a.embed(a.embeddedEl)}},embed:Ext.emptyFn,embeddedEl:null,destroyEmbedded:function(){delete this.embeddedEl}});Ext.define('ABPControlSet.base.mixin.Grid',{extend:'ABPControlSet.base.mixin.Component',config:{readOnly:null,required:null},constructor:function(a){a=a||{};this.addCSPlugin(a,'abpgrid');this.callParent([a])},getContextMenuData:function(d,b){var a=d.position||{},c=a.column||{},e=ABPControlSet.common.Common.getComponentFromElement(b);return {component:e,record:a.record,rowIdx:a.rowIdx,colIdx:a.colIdx,dataIndex:c.dataIndex}}});Ext.define('ABPControlSet.mixin.Grid',{override:'ABPControlSet.base.mixin.Grid'});Ext.define('ABPControlSet.base.mixin.Icon',{extend:'Ext.Component',config:{value:null},setValue:function(a){var b=this.currentIconCls;if(a!==b){this.removeCls(b);this.currentIconCls=a;this.addCls(a)}}});Ext.define('ABPControlSet.base.mixin.Image',{extend:'ABPControlSet.base.mixin.Component',config:{fieldLabel:null,src:null,cropStyle:null},getBackgroundColor:function(){console.log('getBackgroundColor unsupported for abpimage.')},getForegroundColor:function(){console.log('getForegroundColor unsupported for abpimage.')},setBackgroundColor:function(){console.log('setBackgroundColor unsupported for abpimage.')},setForegroundColor:function(){console.log('setForegroundColor unsupported for abpimage.')},updateBackgroundColor:function(a){console.log('setBackgroundColor unsupported for abpimage.')},updateForegroundColor:function(a){console.log('setForegroundColor unsupported for abpimage.')},getTooltipEl:function(){var a=this;if(a.rendered){var b=a.down('#user-image');return b?b.el:a.el}},updatePlaceholder:function(a){var b=this.down('#placeholder');if(b&&!Ext.isString(a)){a=''}b.setHtml(a)},onImageLoaded:function(){var a=this;a.showLoadedImage();a.hidePlaceHolderText();a.hidePlaceHolderImage()},privates:{showLoadedImage:function(){var a=this.down('#user-image');if(a){a.show();a.addCls('loaded')}},hidePlaceHolderText:function(){var a=this.down('#placeholder');if(a){a.hide()}},hidePlaceHolderImage:function(){if(this.getSrc()!==''){var a=this.down('#placeholder-image');a.hide()}},configureImageClassName:function(b,c){var a='';if(b&&b!=='none'){a='cropped';if(b==='oval'){a+=' oval'}}return a},configureDimensions:function(a){if(a.cropStyle==='circle'){var c=a.height||0,d=a.width||0,b=c<d?c:d;return {height:b,width:b}}else {return {height:a.height,width:a.width}}}}});Ext.define('ABPControlSet.mixin.Image',{override:'ABPControlSet.base.mixin.Image',config:{placeholder:null,readOnly:null},updateFieldLabel:function(a){this.setLabel(a)},getFieldLabel:function(){return this.getLabel()},updateSrc:function(b){var c=this;var a=c.down('image');if(a){a.setSrc(b)}else {c.items[0].src=b}},updateReadOnly:function(a){if(a){this.addCls('abp-image-upload-readonly')}else {}this.setLayout(Ext.layout.vbox);this.addCls('abp-image-upload');return this}});Ext.define('ABPControlSet.base.mixin.Panel',{extend:'ABPControlSet.base.mixin.Component',headerTitle:null,config:{headerForegroundColor:null,headerBackgroundColor:null,bodyBackgroundColor:null},setHeaderTitle:function(a){this.setTitle(a)},getHeaderTitle:function(){var b=this;var a=b.getTitle();if(a){return a}else {return b.callParent()}},updateForegroundColor:function(a){ABP.util.Logger.logWarn("Setting an abppanel's foregroundColor is not defined.")},updateBodyForegroundColor:function(a){ABP.util.Logger.logWarn("Setting an abppanel's bodyForegroundColor is not defined.")},getForegroundColor:function(){ABP.util.Logger.logWarn("Getting an abppanel's foregroundColor is not defined.")},getBodyForegroundColor:function(){ABP.util.Logger.logWarn("Getting an abppanel's bodyForegroundColor is not defined.")}});Ext.define('ABPControlSet.mixin.Panel',{override:'ABPControlSet.base.mixin.Panel',updateHeaderForegroundColor:function(b){var a=this;if(a.rendered){a.updateHeaderTitleColor(b)}else {a.on('painted',function(){a.updateHeaderTitleColor(b)},a)}},updateHeaderBackgroundColor:function(b){var a=this;if(a.rendered){a.updateHeaderBackColor(b)}else {a.on('painted',function(){a.updateHeaderBackColor(b)},a)}},updateBodyBackgroundColor:function(b){var a=this;if(a.rendered){a.updateBodyBackColor(b)}else {a.on('painted',function(){a.updateBodyBackColor(b)},a)}},getHeaderBackgroundColor:function(){var c=this;if(c.rendered){var b=c.getHeader();if(b){var a=b.element;if(a&a.getStyle){return a.getStyle('background-color')}}}else {return this._headerBackgroundColor}},getHeaderForegroundColor:function(){var c=this;if(c.rendered){var b=c.getHeader();if(b){var d=b.getTitle();if(d){var a=d.element;if(a&&a.getStyle){return a.getStyle('color')}}}}else {return this._headerForegroundColor}},getBodyBackgroundColor:function(){var b=this;if(b.rendered){var a=b.bodyElement;if(a&&a.getStyle){return a.getStyle('background-color')}}else {return this._backgroundColor}},privates:{updateHeaderBackColor:function(c){me=this;var b=me.getHeader();if(b){var a=b.element;if(a&&a.setStyle){a.setStyle('background-color',c)}}},updateHeaderTitleColor:function(d){me=this;var b=me.getHeader();if(b){var c=b.getTitle();if(c){var a=c.element;if(a&&a.setStyle){a.setStyle('color',d)}}}},updateBodyBackColor:function(b){me=this;var a=me.bodyElement;if(a&&a.setStyle){a.setStyle('background-color',b)}}}});Ext.define('ABPControlSet.base.mixin.RadioGroup',{extend:'ABPControlSet.base.mixin.Field',config:{store:null,labelField:null,valueField:null},constructor:function(a){a=a||{};this.removeCSPlugin(a,'abpfield');this.addCSPlugin(a,'abpradiogroup');this.callParent([a])},updateStore:function(a){if(Ext.isString(a)){var b=this.up('form'),c=b.getViewModel();a=c.getStore(a)}if(Ext.isObject(a)){if(a.getCount()>0){this.onStoreUpdate()}else {a.on('datachanged',this.onStoreUpdate,this)}}},updateRadioItems:function(){var a=this,f=a.getLabelField(),g=a.getValueField(),i=a.getStore(),e=[],b,d=i.getRange(),h=d.length;a.removeAll();for(var c=0;c<h;c++){b=d[c];e.push({inputValue:b.get(g),boxLabel:b.get(f)})}a.add(e)}});Ext.define('ABPControlSet.mixin.RadioGroup',{override:'ABPControlSet.base.mixin.RadioGroup',config:{readOnly:null},updateReadOnly:function(c){var d=this.getItems(),b=d.getRange(),e=b.length;for(var a=0;a<e;a++){if(b[a].setReadOnly){b[a].setReadOnly(c)}else {b[a].readOnly=c}}},onStoreUpdate:function(){if(this.rendered){this.updateRadioItems()}else {this.on('painted',this.updateRadioItems,this)}},updateForegroundColor:function(b){var a=this;if(a.rendered){a.__renderedRadioGroupUpdateForegroundColor(b)}else {a.on('painted',function(){a.__renderedRadioGroupUpdateForegroundColor(b)},a)}},__renderedRadioGroupUpdateForegroundColor:function(f){var a=this;var c=a.getItems&&a.getItems().getRange?a.getItems().getRange():a.getItems()||[],e=c.length;var d=Ext.Array.pluck(c,'iconElement');for(var b=0;b<e;b++){d[b].setStyle('color',f)}},updateBackgroundColor:function(b){var a=this;if(a.rendered){a.__renderedRagioGroupUpdateBackgroundColor(b)}else {a.on('painted',function(){a.__renderedRagioGroupUpdateBackgroundColor(b)},a)}},__renderedRagioGroupUpdateBackgroundColor:function(f){var a=this;var c=a.getItems&&a.getItems().getRange?a.getItems().getRange():a.getItems()||[],e=c.length;var d=Ext.Array.pluck(c,'iconElement');for(var b=0;b<e;b++){d[b].setStyle('background-color',f)}}});Ext.define('ABPControlSet.base.mixin.SegmentedButton',{extend:'ABPControlSet.base.mixin.Component',config:{}});Ext.define('ABPControlSet.base.mixin.Separator',{extend:'ABPControlSet.base.mixin.Component',afterRender:function(){if(this.getWidth()>this.getMaxWidth()){this.setWidth(this.getMaxWidth())}else {if(this.getWidth()<this.getMinWidth()){this.setWidth(this.getMinWidth())}}if(this.spacing){this.setMargin(this.spacing)}}});Ext.define('ABPControlSet.base.mixin.TabPanel',{extend:'ABPControlSet.base.mixin.Component',updateBackgroundColor:function(a){var c=this,b=c.getTabBar();b.setStyle('background-color',a);this.callParent(arguments)}});Ext.define('ABPControlSet.base.mixin.Text',{extend:'ABPControlSet.base.mixin.Field',config:{}});Ext.define('ABPControlSet.mixin.Text',{override:'ABPControlSet.base.mixin.Text'});Ext.define('ABPControlSet.base.mixin.TextArea',{extend:'ABPControlSet.base.mixin.Field',config:{spellcheck:!1}});Ext.define('ABPControlSet.base.mixin.TextDisplay',{extend:'ABPControlSet.base.mixin.Field',config:{markupType:null}});Ext.define('ABPControlSet.util.Markdown',{singleton:!0,parseMarkdown:function(a){this.initializeCustomMarked();if(a&&a.length){marked.setOptions({sanitize:!0});return marked(a)}else {return a}},privates:{customRenderingInitialized:!1,initializeCustomMarked:function(){if(!this.customRenderingInitialized){var a=new marked.Renderer();a.link=function(b,a,d){var c=marked.Renderer.prototype.link.call(this,b,a,d);return c.replace('<a',"<a target='_blank' ")};marked.setOptions({renderer:a});this.customRenderingInitialized=!0}}}});Ext.define('ABPControlSet.mixin.TextDisplay',{override:'ABPControlSet.base.mixin.TextDisplay',requires:['ABPControlSet.util.Markdown'],updateMarkupType:function(c){var a=this.getInnerHtmlElement();var b=this.getValue();if(c==='markdown'){this.setHtml(ABPControlSet.util.Markdown.parseMarkdown(b));this.inputElement.addCls('x-hidden-display');a.removeCls('x-hidden-display');this.addCls('abp-markdown')}else {this.inputElement.removeCls('x-hidden-display');a.addCls('x-hidden-display');this.removeCls('abp-markdown')}},onAfterRender:function(){}});Ext.define('ABPControlSet.base.mixin.Trigger',{extend:'Ext.Mixin',config:{tooltip:null,disabled:null,icon:null,hidden:null},mixinConfig:{after:{setDisabled:'afterSetDisabled'}},afterSetDisabled:Ext.emptyFn,updateHidden:function(a){this.hidden=a;if(a){this.hide();if(this.component){this.component.hidden=a;this.component.hide()}}else {this.show();if(this.component){this.component.hidden=a;this.component.show()}}},updateTooltip:function(a){if(this.component){if(this.component.setTooltip){this.component.setTooltip(a)}else {this.component.tooltip=a}}},updateIcon:function(a){if(this.component){if(this.component.setIconCls){this.component.setIconCls(a)}else {this.component.iconCls=a}}}});Ext.define('ABPControlSet.mixin.Trigger',{override:'ABPControlSet.base.mixin.Trigger',afterSetDisabled:function(){var a=this.component,b=this.getDisabled();if(a){if(a.setDisabled){a.setDisabled(b);a.el.setTabIndex(b?-1:0)}else {a.disabled=b;a.tabIndex=b?-1:0}}}});Ext.define('ABPControlSet.layout.Accordion',{extend:'Ext.layout.VBox',alias:'layout.abpaccordion',type:'abpaccordion',targetCls:Ext.baseCSSPrefix+'accordion-layout-ct',itemCls:[Ext.baseCSSPrefix+'box-item',Ext.baseCSSPrefix+'accordion-item'],align:'stretch',enableSplitters:!1,fill:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:undefined,activeOnTop:!1,multi:!1,wrapOver:!0,panelCollapseMode:'header',defaultAnimatePolicy:{y:!0,height:!0},owner:null,onContainerInitialized:function(){this.callParent(arguments);var a=this.getContainer();this.owner=a;var b=a.innerElement||a.bodyElement||a.el;if(b){b.dom.setAttribute('role','tablist');b.dom.setAttribute('aria-multiselectable',!0)}},onItemAdd:function(a){var b=this;a.getCollapsible=a.getCollapsible||function(){return !1};a.getCollapsed=a.getCollapsed||function(){return !1};if(a.rendered){b.beforeRenderItem(a)}else {a.on('painted',b.beforeRenderItem,b)}if(a.collapseMode==='placeholder'){a.collapseMode=b.panelCollapseMode}a.collapseDirection=a.headerPosition;b.callParent(arguments)},onItemRemove:function(c,d){var a=this,b;a.callParent(arguments);if(!a.owner.destroying&&!a.multi&&!c.getCollapsed()){b=a.owner.items.first();if(b){b.expand()}}},getExpanded:function(){var c=this.owner.items.items,f=c.length,b=0,e=[],d,a;for(;b<f;++b){a=c[b];if(!a.hidden){d=a.getCollapsed?!a.getCollapsed():!0;if(d){e.push(a)}}}return e},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,beforeRenderItem:function(a){var b=this,d=b.owner,f=b.collapseFirst,g=Ext.isDefined(f),c=b.getExpanded()[0],e=b.multi,a;a.toggleCls(Ext.baseCSSPrefix+'accordion-item',!0);if(a.header){a.header.toggleCls(Ext.baseCSSPrefix+'accordion-hd',!0)}a.isAccordionPanel=!0;a.bodyAriaRole='tabpanel';a.accordionWrapOver=b.wrapOver;if(!e||a.getCollapsible()==undefined){a.setCollapsible({useDrawer:!b.titleCollapse})}if(a.getCollapsible()){if(g){a.collapseFirst=f}if(b.hideCollapseTool){a.hideCollapseTool=b.hideCollapseTool;b.configureTitleCollapse(a,!0)}else {if(b.titleCollapse&&a.titleCollapse===undefined){b.configureTitleCollapse(a,b.titleCollapse)}}}a.hideHeader=a.width=null;a.title=a.title||'&#160;';if(a.addBodyCls){a.addBodyCls(Ext.baseCSSPrefix+'accordion-body')}if(!e){if(c){a.setCollapsed(c!==a)}else {if(a.getCollapsed()===!1){c=a}else {a.setCollapsed(!0)}}d.mon(a,'beforecollapse',b.onBeforeComponentCollapse,b);d.mon(a,'beforeexpand',b.onBeforeComponentExpand,b)}d.mon(a,'collapse',b.updatePanelClasses,b);d.mon(a,'expand',b.updatePanelClasses,b);a.headerOverCls=Ext.baseCSSPrefix+'accordion-hd-over';if(!b.processing&&!e){if(!c){a.setCollapsed(!1)}else {if(b.activeOnTop){b.configureItem(c);c.setCollapsed(!1);if(d.items.indexOf(c)>0){d.insert(0,c)}}}}},configureTitleCollapse:function(c,d){var a=c.getCollapsible();if(Ext.isObject(a)){var b=a.getTarget().getHeader();if(b){if(d){a.setUseDrawer(!1);a.setAnimation(!1)}if(b.element&&d){b.element.un({destroyable:!0,scope:c,tap:this.onTitleTap});b.element.on({destroyable:!0,scope:c,tap:this.onTitleTap})}}}},onTitleTap:function(){this.setCollapsed(!this.getCollapsed())},configureItem:function(a){a.ignoreHeaderBorderManagement=!0;a.animCollapse=!1;if(this.fill){a.flex=1}},getVisibleItems:function(){var e=this.owner,d=e?e.items.items:[],a,f=d.length,b=0,c=[];for(var b=0;b<f;b++){a=d[b];if(!a.rendered&&a.hidden!==!0||a.rendered&&a.isVisible()){c.push(a)}}return c},updatePanelClasses:function(){var e=this.getVisibleItems(),f=e.length,d=!0,c,b,a;for(c=0;c<f;c++){b=e[c];a=b.getHeader?b.getHeader():null;if(a){a.toggleCls(Ext.baseCSSPrefix+'accordion-hd',!0);a.toggleCls(Ext.baseCSSPrefix+'accordion-hd-sibling-expanded',!d);a.toggleCls(Ext.baseCSSPrefix+'accordion-hd-last-collapsed',c+1===f&&b.getCollapsed())}d=b.getCollapsed()}},onBeforeComponentExpand:function(c){var a=this,f=a.owner,d=a.multi,e=!d&&!a.animate&&a.activeOnTop,b;if(!a.processing){a.processing=!0;if(!d){b=a.getExpanded()[0];if(b&&b!==c){b.collapse()}}if(e){Ext.suspendLayouts();f.insert(0,c);Ext.resumeLayouts()}a.processing=!1}},onBeforeComponentCollapse:function(d){var a=this,e=a.owner,b,c;if(a.owner.items.getCount()===1){return !1}if(!a.processing){a.processing=!0;b=d.next()||d.prev();if(a.multi){c=a.getExpanded();if(c.length===1){b.expand()}}else {if(b){b.expand()}}a.processing=!1}}});Ext.define('ABPControlSet.common.CSSGrid',{extend:'Ext.Mixin',responsiveGridTplFormat:'1fr',gridTplFormat:'1fr',gridTplFormatIE:'1fr',defaultTopGroupName:'__0__',fillRowWidth:!0,columnPrecedence:!1,defaultMinColumnWidth:180,gridContainerStyled:!1,baseCls:'css-grid-container',baseResponsiveCls:'css-grid-container-responsive',groupCls:'css-grid-container-group',gridItemCls:'css-grid-container-item',itemBodyCls:'css-grid-container-item-body',responsive:Ext.toolkit==='modern'?!0:!1,fillEmptySpace:!1,baseColumnWidth:null,maxColumns:null,minColumnWidth:1,columnSpacing:null,rowSpacing:null,defaultSpacing:4,contentJustify:null,containerSpacing:null,runCalculations:function(c,g){var a=this,b=a.getTargetWidth(),d=a.getRenderTarget();b=Ext.isString(b)?parseInt(b):b;if(d&&!Ext.isEmpty(b)){if(a.responsive&&a.calculateLayoutInfo(c,b,g)){var e=a.getGroups(c);for(var f in e){e[f].configured=e[f].calculated=!1}a.calculateItems(c,a.columnWidth,a.columns,a.defaultTopGroupName);a.updateGridContainer(d,a.columnWidth,a.columns)}else {if(!a.responsive){a.calculateLayoutInfo(c,b);a.calculateFill(c);a.updateGridContainer(d,a.columnWidth,a.columns);a.calculateItems(c)}}}},getTargetWidth:function(){var b=this;if(Ext.toolkit==='modern'){var e=b.getRenderTarget(),c=e?e.el:null;return c?c.getWidth():undefined}else {var f=b.owner;if(f.bodyResponsiveWidth&&f.bodyFixedWidth){var d=b.gridCt;return d.getStyle('width')||d.getWidth()}else {var a=b.ownerContext.targetContext;return a.getProp('width')||a.getStyle('width')||(a.lastBox?a.lastBox.width:a.getDomProp('width'))}}},findAllAt:function(d,f,r){var t=this,s=r.length,a,q,o=[],k,n,c,g,h,b,e=f,l=!0,p=!1,i=!1,j=!1;for(var m=0;m<s;m++){a=r[m];q=Ext.toolkit==='classic'?a instanceof Ext.form.Label:a instanceof Ext.Label;c=(d?a.responsiveCol:a.responsiveRow)||0;g=(d?a.responsiveColSpan:a.responsiveRowSpan)||1;if(c===f||c<f&&g>1&&c+g-1>=f){j=a.responsiveFillViaChild===!0?!0:!1;i=j||(d?Ext.isBoolean(a.responsiveFillWidth)?a.responsiveFillWidth:!!a.responsiveFill:Ext.isBoolean(a.responsiveFillHeight)?a.responsiveFillHeight:!!a.responsiveFill);l=l===!1?!1:i;e=i?c<e?c:e:e;h=!1;b=d?a.width||a.responsiveWidth||a.minWidth:a.height||a.responsiveHeight||a.minHeight;p=g===1&&c===f;k=t.getItemSpacing(a);n=d?k.left:k.top;if(!Ext.isEmpty(b)){h=Ext.isString(b)&&b.indexOf('%')!==-1;b=parseInt(b)/g+(h?'%':0);b=Ext.isNumber(b)?Math.round(b+n*(d&&q?1:2)):b}o.push({single:p,fillViaChild:j,fill:i,allFill:l,earliestFillIndex:e,size:b,isPercent:h,item:a})}}return o},translateItemsForResponsiveTemplate:function(d,p){var q=this,o=p.length,a,n,l=[],i,k,m,f,b,c=0,j=!0,g=!1,h=!1;for(var e=0;e<o;e++){a=p[e];n=Ext.toolkit==='classic'?a instanceof Ext.form.Label:a instanceof Ext.Label;m=(d?a.responsiveColSpan:a.responsiveRowSpan)||1;h=a.responsiveFillViaChild===!0?!0:!1;g=h||(d?Ext.isBoolean(a.responsiveFillWidth)?a.responsiveFillWidth:!!a.responsiveFill:Ext.isBoolean(a.responsiveFillHeight)?a.responsiveFillHeight:!!a.responsiveFill);j=j===!1?!1:g;c=g?e<c?e:c:c;f=!1;b=d?a.width||a.responsiveWidth||a.minWidth:a.height||a.responsiveHeight||a.minHeight;i=q.getItemSpacing(a);k=d?i.left:i.top;if(!Ext.isEmpty(b)){f=Ext.isString(b)&&b.indexOf('%')!==-1;b=parseInt(b)/m+(f?'%':0);b=Ext.isNumber(b)?Math.round(b+k*(d&&n?1:2)):b}l.push({single:o===1,fillViaChild:h,fill:g,allFill:j,earliestFillIndex:c,size:b,isPercent:f,item:a})}return l},calculateMaxRowAndColumn:function(l){var b=this,j=l.length,a,f,d,i=0,g,e,k=0,c=!0;for(var h=0;h<j;h++){a=l[h];if(!Ext.isEmpty(a.responsiveCol)||!Ext.isEmpty(a.responsiveColSpan)){c=!1}f=a.responsiveCol||0;d=a.responsiveColSpan||1;if(f+d>i){b.maxColumn=i=f+d}if(!Ext.isEmpty(a.responsiveRow)||!Ext.isEmpty(a.responsiveRowSpan)){c=!1}g=a.responsiveRow||0;e=a.responsiveRowSpan||1;if(g+e>k){b.maxRow=k=g+e}}if(c){b.maxRow=b.maxColumn=j}},calculateLayoutInfo:function(b,d,e){var a=this,k=a.responsive;if(k){var c=!1,f=a.oldWidth,h=a.defaultTopGroupName,i=a.columns,j=a.columnWidth;if(!Ext.isEmpty(f)&&d===f&&e!==!0){c=!1}else {a.calculateMaxRowAndColumn(b);var g=a.getColumnsAndColumnWidth(b,d,a.maxColumns,a.baseColumnWidth);a.columns=g.columns;a.columnWidth=g.columnWidth;if(e===!0||(a.columns!==i||a.columnWidth!==j)){c=!0}a.configureItems(b,h,a.columns,a.columnWidth)}if(c){a.oldWidth=d}return c}else {a.calculateMaxRowAndColumn(b);a.columnStyle=a.calculateColumnsTemplate(b);a.rowStyle=a.calculateRowsTemplate(b)}},calculateRowsTemplate:function(c){c=c||[];var d=this,e='',f,a={used:!1,earliestFillIndex:0},g=d.maxRow;for(var b=0;b<=g-1;b++){f=d.findAllAt(!1,b,c);if(a.used&&a.earliestFillIndex<b){a.used=!1}e+=d.calculateItemTemplate(f,!1,a)+' '}return e},calculateColumnsTemplate:function(d){d=d||[];var e=this,c='',f,g=e.maxColumn,a={used:!1,earliestFillIndex:g-1};for(var b=g-1;b>=0;b--){f=e.findAllAt(!0,b,d);if(a.used&&a.earliestFillIndex<b){a.used=!1}c=' '+e.calculateItemTemplate(f,!0,a)+c}return c},calculateItemTemplate:function(h,m,l){h=h||[];var i=h.length,f='';if(i){var d,e,t,b,g,j,n,a,k,c,s,q,p,r;for(var o=0;o<i;o++){d=h[o];e=d.size;if(d.allFill||i===1&&d.single===!0&&(d.fill||d.fillViaChild===!0)){k=!0}if(i===1&&d.single===!0&&!Ext.isEmpty(e)){t=!0;if(d.isPercent&&Ext.isString(a)&&a.indexOf('%')!==-1){p=parseInt(a);a=p>e?a:e+'%'}else {if(e>a){a=e}else {if(Ext.isEmpty(a)){a=e}}}}if(d.fill===!0||d.fillViaChild===!0){g=m?g>d.earliestFillIndex?d.earliestFillIndex:g:g<d.earliestFillIndex?d.earliestFillIndex:g;n=s=!0;if(d.isPercent&&Ext.isString(c)&&c.indexOf('%')!==-1){q=parseInt(c);c=q>e?c:e+'%'}else {if(e>c||Ext.isEmpty(c)){c=e}}}if(d.isPercent&&Ext.isString(b)&&b.indexOf('%')!==-1){r=parseInt(b);b=r>e?b:e+'%'}else {if(e>b){b=e}else {if(Ext.isEmpty(b)){b=e}}}}if((n||s)&&!l.used){l.earliestFillIndex=g;j=!0;l.used=!0}if(Ext.isString(b)&&b.indexOf('%')!==-1){b=b+'%';if(b==='100%'){b='1fr'}}else {if(Ext.isNumber(b)){b=b+'px'}else {b=null}}if(Ext.isString(c)&&c.indexOf('%')!==-1){c=c+'%';if(c==='100%'){c='1fr'}}else {if(Ext.isNumber(c)){c=c+'px'}else {c=null}}if(b==='0px'||b==='0%'){f='0px'}else {if(t){if(Ext.isString(a)&&a.indexOf('%')!==-1){a=a+'%';if(a==='100%'){a='1fr'}}else {if(Ext.isNumber(a)){a=a+'px'}else {a=null}}if(m){f=Ext.isNumber(parseInt(a))?a:'auto'}else {f=Ext.isNumber(parseInt(a))?a?a:'auto':'max-content'}if(k){f='minmax('+f+', 1fr)'}}else {if(j||k){f=Ext.isNumber(parseInt(c))?c:c?'auto':'min-content';f='minmax('+f+', 1fr)'}else {if(m){f=Ext.isNumber(parseInt(b))?'max-content':j?'0px':'min-content'}else {f=Ext.isNumber(parseInt(b))?b:n?'auto':'min-content'}}}}}else {f='0px'}return f},calculateFill:function(d){var e=this,a,f=d.length,b;if(Ext.toolkit==='modern'){a=e.getContainer()}else {a=e.owner}for(var c=0;c<f;c++){b=d[c];if((b.responsiveFill||b.responsiveFillViaChild)&&a.responsiveFill!==!0&&a.responsiveFillViaChild!==!0){a.responsiveFillViaChild=!0}}},determineItemsWithColumnRowSorting:function(a){return a.sort(this.columnAndRowSort)},columnAndRowSort:function(a,b){if(a.responsiveRow===b.responsiveRow){if(a.responsiveCol<b.responsiveCol){return -1}else {if(a.responsiveCol===b.responsiveCol){return 0}return 1}}else {if(a.responsiveRow<b.responsiveRow){return -1}else {if(a.responsiveRow===b.responsiveRow){return 0}return 1}}},isColumnAndRowSortable:function(c){var b,a,d=c.length;for(b=0;b<d;b++){a=c[b];if(Ext.isEmpty(a.responsiveCol)||Ext.isEmpty(a.responsiveColSpan)||Ext.isEmpty(a.responsiveRow)||Ext.isEmpty(a.responsiveRowSpan)){return !1}}return !0},calculateItems:function(o,v,x,w){if(this.responsive){this.rowStyle=this.calculateResponsiveItems(o,v,x,w)}else {var n=this,p=o.length,a,b,e,g,i,d,f,y,h,l,j,m,k,c,s,r,u=n.maxRow,t=n.maxColumn;for(var q=0;q<p;q++){a=o[q];h=Ext.toolkit==='modern'?a.bodyWrapElement:a.bodyEl;c=null;g=Ext.toolkit==='classic'?a instanceof Ext.form.Label:a instanceof Ext.Label;i=n.getItemSpacing(a);b={};m=(a.responsiveRow||0)+1;k=a.responsiveRowSpan||1;l=(a.responsiveCol||0)+1;j=a.responsiveColSpan||1;s=p!=1&&a.responsiveFill&&m+(k-1)>=u?!0:!1;r=p!=1&&a.responsiveFill&&l+(j-1)>=t?!0:!1;if(Ext.isIE){Ext.apply(b,{'-ms-grid-row':m,'-ms-grid-row-span':k,'-ms-grid-column':l,'-ms-grid-column-span':j});if(a.cellAlign||g){Ext.apply(b,{'-ms-grid-column-align':a.cellAlign||(g?'flex-end':'safe')})}}else {Ext.apply(b,{'grid-row-start':m,'grid-row-end':'span '+(s?'end':k),'grid-column-start':l,'grid-column-end':'span '+(r?'end':j)});if(a.cellAlign||g){Ext.apply(b,{'justify-self':a.cellAlign||(g?'flex-end':'safe')});if(Ext.browser.is.Firefox&&g){Ext.apply(b,{'align-self':'center'})}}}d=a.responsiveMinHeight||a.minHeight||0;if(Ext.isString(d)&&d.indexOf('%')!==-1){}else {if(Ext.isNumber(d)){d=d+'px'}}e=a.responsiveMinWidth||a.minWidth||0;if(Ext.isString(e)&&e.indexOf('%')!==-1){}else {if(Ext.isNumber(e)){e=e+'px'}}f=a.responsiveWidth||a.width;if(Ext.isString(f)&&f.indexOf('%')!==-1){}else {if(Ext.isNumber(f)){f=f+'px'}}itemHeight=a.responsiveHeight||a.height;if(Ext.isString(itemHeight)&&itemHeight.indexOf('%')!==-1){}else {if(Ext.isNumber(itemHeight)){itemHeight=itemHeight+'px'}}if((Ext.toolkit==='modern'?a instanceof Ext.field.Field:a instanceof Ext.form.field.Base)&&h){c=c||{};if(a.responsiveFill===!0){Ext.apply(c,{'width':'100%'})}else {if(a.responsiveFillWidth===!0){Ext.apply(c,{'width':'100%'})}else {Ext.apply(c,{'width':f})}}if(!Ext.isEmpty(e)){Ext.apply(c,{'minWidth':e})}if(!Ext.isEmpty(d)){Ext.apply(c,{'minHeight':d})}if(h){if(h.dom){Ext.apply(h.dom.style,c)}else {h.setStyle(c)}}}if(!Ext.isEmpty(e)&&Ext.isEmpty(b.minWidth)){b.minWidth=e}if(!Ext.isEmpty(d)&&Ext.isEmpty(b.minHeight)){b.minHeight=d}if(!Ext.isEmpty(f)&&Ext.isEmpty(b.width)){b.width=f}if(!Ext.isEmpty(itemHeight)&&Ext.isEmpty(b.height)){b.height=itemHeight}if(a.responsiveFill===!0||a.responsiveFillViaChild==!0){b.width='100%';b.height=(Ext.toolkit==='modern'?a instanceof Ext.field.Field:a instanceof Ext.form.field.Base)?'auto':'100%'}else {if(Ext.isEdge||Ext.isIE){b.minWidth='calc(100% - '+(i.left+i.right)+'px)'}}if(!(a instanceof Ext.Container)||a.isLabelable){b[Ext.browser.is.Firefox&&!(a instanceof Ext.Button)?'padding':'margin']=n.getItemSpacingStyle(i)}if(a.setStyle){a.setStyle(b)}else {if(a.protoEl&&a.protoEl.setStyle){a.protoEl.setStyle(b)}}}}},calculateResponsiveItems:function(o,r,g,H){var b=this,a,v,u,t,z=!1,A=-1,p=-1,D=o.length,e,i,l,f=[],F,G,I=b.groups,J,w=Ext.toolkit==='modern',j=0,B={used:!1,earliestFillIndex:0},x=!1,s='',n,E,d=0,h=[],c,q,m;o=b.determineItemsWithColumnRowSorting(o);if(Ext.isEmpty(r)||Ext.isEmpty(g)){return}for(var y=0;y<D;y++){a=o[y];u=a.responsiveRow;v=a.el;m=b.getItemSpacing(a);v.toggleCls(b.gridItemCls,!0);if(d+a.colspan>g||u>A&&p===j+1){x=f.length===0;f=x?[a]:f;d=0;j++;for(c=0;c<g;c++){if(h[c]>0){h[c]--}}l=b.translateItemsForResponsiveTemplate(!1,f);n=b.calculateItemTemplate(l,!1,B);s+=' '+n;f=x?[]:[a]}else {while(d>=g||h[d]>0){if(d>=g){for(c=0;c<g;c++){if(h[c]>0){h[c]--}}}else {d++}}f.push(a)}var C=!!(a.layout?a.layout.contentJustify:!1);e={'justify-self':a.cellAlign||'stretch','align-self':a.rowAlign,'-ms-grid-row':(j+1).toString(),'-ms-grid-column-span':Ext.isIE?a.colspan||1:undefined,'-ms-grid-column':Ext.isIE?(d+1).toString():undefined,'grid-column-start':(d+1).toString(),'grid-column-end':'span '+a.colspan,'grid-row-start':(j+1).toString(),'width':C?'100%':'auto'};if(w?a instanceof Ext.field.Field:a instanceof Ext.form.field.Base){i=w?a.bodyWrapElement:a.bodyEl;if(i){i.toggleCls(b.itemBodyCls,!0)}}else {if(a instanceof Ext.Container){i=w?a.bodyWrapElement:a.body;if(i){i.toggleCls(b.itemBodyCls,!0)}}}if(Ext.isEdge){e.minWidth='100%'}if(a.fixedWidth){var k=a.responsiveWidth||a.responsiveMaxWidth||a.responsiveMinWidth;if(Ext.isString(k)){e['max-width']=k}else {if(k>=r*g){k=r*g}e['max-width']=k+'px'}}t=a instanceof Ext.Container;if(!Ext.isEmpty(b.containerSpacing)&&t){e['margin-left']=z&&p===j?Ext.isString(b.containerSpacing)?b.containerSpacing:b.containerSpacing+'px':'0px'}z=t;q=b.getItemSpacingStyle(m);if(a instanceof Ext.Button){e.width='calc(100% - '+(m.right+m.left)+'px)';e.margin=q}else {e.padding=q}v.setStyle(e);for(c=a.colspan||1;c;--c){h[d]=a.rowspan||1;++d}A=u;p=j}if(f.length>0){l=b.translateItemsForResponsiveTemplate(!1,f);n=b.calculateItemTemplate(l,!1,B);s+=' '+n}return s},getItemSpacing:function(b){var g=this,a=b.el?b.el:b.element,f=b instanceof Ext.Button,h=g.columnSpacing,i=g.rowSpacing,c=Ext.dom.Element.parseBox(g.defaultSpacing),e=Ext.isEmpty(b.spacing)?c:Ext.dom.Element.parseBox(b.spacing),n=Ext.toolkit==='classic'?b instanceof Ext.form.Label:b instanceof Ext.Label,d={};if(!Ext.isEmpty(h)){c.left=c.right=h}if(!Ext.isEmpty(i)){c.top=c.botton=i}if(a){var m=(f?a.getMargin('t'):a.getPadding('t'))||undefined,k=(f?a.getMargin('r'):a.getPadding('r'))||undefined,j=(f?a.getMargin('b'):a.getPadding('b'))||undefined,l=(f?a.getMargin('l'):a.getPadding('l'))||undefined;if(m){d.top=m}if(k){d.right=k}if(j){d.bottom=j}if(l){d.left=l}}Ext.applyIf(e,c);Ext.apply(e,d);if(n){e.right=0}return e},getItemSpacingStyle:function(a){return a.top+'px '+a.right+'px '+a.bottom+'px '+a.left+'px'},configureItems:function(f,u,c,l){var e=this,d=0,r=e.groups||e.getGroups(f),s=f.length,n,m,b,q,g,p,o,i,k=s>0?f[0].responsiveRow:null,a=c,h=0,t=e.fillRowWidth,j=!1;for(;d<s;d++){n=f[d];g=!1;q=0;p=n.responsiveGroup;b=r[p];if(b&&p!==u){if(b.configured){continue}else {g=e.getGroupColSpan(b.items,a,l)}}if(g){if(g>a){if(a!==c){if(t){e.stretchItemsForRow(f,h,a,c,d,l)}a=c;h=d;d--;j=!0;continue}else {g=g>c?c:g;q=g*l}}else {q=g*l}m=e.getColumnsAndColumnWidth(b.items,q);b.columns=m.columns;b.columnWidth=m.columnWidth;b.colspan=g;e.configureItems(b.items,p,m.columns,m.columnWidth);e.updateGridContainer(b.el,m.columnWidth,m.columns);b.configured=!0;if(r[b.parentGroup]&&!r[b.parentGroup].configured){r[b.parentGroup].configured=e.isParentGroupFinished('configured',b.parentGroup)}a=a-b.colspan;if(a>0){j=!1}else {j=!0;h=d;a=c}}else {i=Ext.isEmpty(n.responsiveRow)?null:n.responsiveRow;o=e.getItemColSpan(n,a,l);if(a===c&&o>=c){n.colspan=c;h=d+1;k=f[h]?f[h].responsiveRow:i;j=!0}else {if(o>a||i!==null&&k===null||i!==null&&k!==null&&i>k){if(t){e.stretchItemsForRow(f,h,a,c,d,l)}a=c;h=d;d--;k=i;j=!1}else {n.colspan=o;a-=o;if(a>0){k=i;j=!1}else {a=c;h=d;k=f[d+1]?f[d+1].responsiveRow:i;j=!0}}}}}if(s>0&&t&&!j){e.stretchItemsForRow(f,h,a,c,s,l)}},updateGridContainer:function(d,k,g){var a=this,f=a.owner||a.getContainer(),m=d.dom?d.dom:d,e=m?m.style:null,l=d?d.getWidth():null;if(e){var b={};if(!a.gridContainerStyled){d.toggleCls(a.baseCls,!0);if(a.responsive){d.toggleCls(a.baseResponsiveCls,!0)}a.gridContainerStyled=!0}var c=a.columnStyle,i=!1,h=a.rowStyle;if(a.responsive){if(a.contentJustify){b['justify-content']=a.contentJustify}if(a.fixedColumnWidth){c=Ext.String.repeat(a.fixedColumnWidth+'px',g,' ')}else {if(l&&l<k*g){i=!0}c=Ext.String.repeat(Ext.String.format(a.responsiveGridTplFormat,k),i?g-1:g,' ');if(g===1){c='100%'}else {if(i){c+=' 1fr'}}}if(f.bodyFixedWidth&&f.bodyResponsiveWidth){var j=f.bodyResponsiveWidth||f.bodyResponsiveWidth||f.bodyResponsiveWidth;if(Ext.isString(j)){b['max-width']=j}else {b['max-width']=j+'px'}}else {b['max-width']='100%'}}if(f.responsiveFillViaChild&&e['height']!=='100%'){b['height']='100%'}if(Ext.isIE&&c!==e['-ms-grid-columns']){b['-ms-grid-columns']=c}else {if(c!==e['grid-template-columns']){b['grid-template-columns']=c}}if(Ext.isIE&&h!==e['-ms-grid-rows']){b['-ms-grid-rows']=h}else {if(h!==e['grid-template-rows']){b['grid-template-rows']=h}}if(!Ext.Object.isEmpty(b)){d.setStyle(b)}}},getColumnWidth:function(f,g){var c=this,a,e,d,h=f.length,b=[];for(d=0;d<h;d++){e=f[d];if(Ext.isEmpty(e.responsiveColSpan)){a=e.responsiveWidth;if(Ext.isString(a)&&a.indexOf('%')===-1){a=parseInt(a)}if(a&&!isNaN(a)){b.push(c.nearestEven(a))}}}if(b.length>0){b.push(c.nearestEven(g));return Math.max(c.findGCD(b),c.minColumnWidth)}},findGCD:function(a){if(Object.prototype.toString.call(a)!=='[object Array]'){return !1}var c,b,e;c=a.length;if(!c){return null}b=a[0];for(var d=1;d<c;d++){e=a[d];b=this.gcdTwo(b,e)}return b},gcdTwo:function(b,a){if(typeof b!=='number'||typeof a!=='number'){return !1}b=Math.abs(b);a=Math.abs(a);while(a){var c=a;a=b%a;b=c}return b},getLargestColumnWidth:function(e){var a=0,c,b,f=e.length,d=null;for(c=0;c<f;c++){b=e[c];if(!Ext.isEmpty(b.responsiveColSpan)){a=b.responsiveWidth||0;a=a/(b.responsiveColSpan||1);a=isNaN(a)?1:a;if(a>d){d=a}}}return d},nearestEven:function(a){return 2*Math.round(a/2)},getItemColSpan:function(a,e,d){var b,c=0;if(!Ext.isEmpty(a.responsiveColSpan)){b=a.responsiveColSpan;var g=e*d,f=b*d;if(g<=f){b=e}if(Ext.isString(a.responsiveWidth)&&a.responsiveWidth.indexOf('%')!==-1){var h=parseInt(a.responsiveWidth.replace('%',''))/100;c=Math.round(h*e);f=c*d;if(g<f){b=e}else {b=c}}else {if(Ext.isNumber(a.responsiveWidth)){c=Math.round(a.responsiveWidth/d)||1;f=c*d;if(g<=f){b=c}}}}else {if(Ext.isString(a.responsiveWidth)&&a.responsiveWidth.indexOf('%')!==-1){var h=parseInt(a.responsiveWidth.replace('%',''))/100;b=Math.round(h*e)}else {if(Ext.isEmpty(a.responsiveWidth)){b=e}else {b=Math.round(a.responsiveWidth/d)||1;if(a.responsiveWidth>d*e){b+=1}}}if(Ext.isNumber(a.responsiveMinWidth)){c=Math.round(a.responsiveMinWidth/d)||1}else {if(Ext.isNumber(a.minWidth)){c=Math.round(a.minWidth/d)||1}}b=c>b?c:b}return b},stretchItemsForRow:function(m,g,b,p,e){var r=this,i=0,a,n,q=r.groups,l,c,f,d=0,j=0,k=!0,o=!1,h;if(e-g===1){n=m[g];n.colspan=p;l=q[n.responsiveGroup];if(l){l.colspan=p}}else {for(a=g;a<e;a++){if(!m[a].fixedWidth){i++}}if(i>0){d=b/i;j=d%1}else {o=!0}for(a=g;a<e;a++){c=m[a];f=c.colspan;if(!c.fixedWidth){if(d>0){if(b>0){h=j!==0?k?Math.floor(d):Math.ceil(d):d;if(a==e-1){c.colspan=f+b;b=0}else {c.colspan=f+h;b-=h}if(j!==0){k=!k}}}}else {if(o&&a==e-1){c.colspan=f+b}}}}},isParentGroupFinished:function(g,f){var i=this,a,d=i.groups,c=d[f],e=c.ownItems?c.ownItems.length:0,b=c.groups,h=b?b.length:0;if(e){return !1}for(a=0;a<h;a++){if(!d[b[a]][g]){return !1}}return !0},isPartOfGroup:function(c,a){var f=this,e=f.groups,d=c.responsiveGroup,b=e[c.responsiveGroup];if(b){return !!(d===a||Ext.Array.contains(b.groups,a))}return !1},getGroups:function(k){var e=this,a,c,f=e.defaultTopGroupName,h,b=e.groups||{},l=k.length,d,g;if(Ext.toolkit==='modern'){var j=e.getContainer();c=j.bodyElement?j.bodyElement:j}else {c=e.getRenderTarget()}c=c.dom||c;for(var i in b){b[i].ownItems=[];b[i].items=[];b[i].groups=[]}for(g=0;g<l;g++){a=k[g];h=c;a.responsiveParentGroup=a.responsiveParentGroup||f;if(!Ext.isEmpty(a.responsiveParentGroup)){if(!b[a.responsiveParentGroup]){if(a.responsiveParentGroup===f){d=c}else {d=document.createElement('div')}h=d;b[a.responsiveParentGroup]={el:d,color:'#'+Math.floor(Math.random()*16777215).toString(16),items:[],groups:[],ownItems:[]}}else {h=b[a.responsiveParentGroup].el}b[a.responsiveParentGroup].items.push(a)}if(!Ext.isEmpty(a.responsiveParentGroup)&&!Ext.Array.contains(b[a.responsiveParentGroup].groups,a.responsiveGroup)){b[a.responsiveParentGroup].groups.push(a.responsiveGroup)}a.responsiveGroup=a.responsiveGroup||f;if(!Ext.isEmpty(a.responsiveGroup)){if(!b[a.responsiveGroup]){if(a.responsiveGroup===f){d=c}else {d=document.createElement('div')}b[a.responsiveGroup]={el:d,parentGroup:a.responsiveParentGroup,color:'#'+Math.floor(Math.random()*16777215).toString(16),items:[],groups:[],ownItems:[]}}b[a.responsiveGroup].items.push(a);b[a.responsiveGroup].ownItems.push(a)}}return e.groups=b},getGroupColSpan:function(a,g,h){var b=this;if(b.isColumnAndRowSortable(a)){return b.getLargestColumnCount(a)}else {var f,e=0,d,i=a.length;for(var c=0;c<i;c++){f=a[c];d=b.getItemColSpan(f,g,h);e+=d}return e}},getLargestColumnCount:function(f){var c=0,b,g,e,d,h=f.length,a=0;for(b=0;b<h;b++){d=f[b];g=(d.responsiveCol||0)+1;e=d.responsiveColSpan||1;c=g+(e-1);if(c>a){a=c}}a=a===0?h:a;return a},getColumnsAndColumnWidth:function(f,c,b,a){var e=this,d=b?b:undefined,j=Math.max(Math.floor(e.getLargestColumnCount(f)),1);if(e.fixedColumnWidth){a=e.fixedColumnWidth}else {if(!Ext.isEmpty(a)&&Ext.isEmpty(b)){b=Math.max(Math.floor(c/a),1)}else {if(!Ext.isEmpty(b)&&Ext.isEmpty(a)){a=Math.min(Math.floor(c/b),c)}else {if(Ext.isEmpty(b)&&Ext.isEmpty(a)){a=e.getColumnWidth(f,c);if(Ext.isEmpty(a)){d=d||j;var i=Math.max(Math.floor(c/e.defaultMinColumnWidth),1);var h=Math.max(Math.floor(c/d),1);a=e.getLargestColumnWidth(f);a=a<h?a:h;a=e.defaultMinColumnWidth>a?e.defaultMinColumnWidth:a;d=Math.max(Math.floor(c/a),1);d=i<d?i:d}if(!Ext.isEmpty(d)){b=d;a=Math.max(Math.floor(c/b),1)}else {b=Math.max(Math.floor(c/a),1)}}}}}var g=Math.max(Math.floor(c/a),1);return {columns:g<b?g:b,columnWidth:a}}});Ext.define('ABPControlSet.layout.CSSGrid',{extend:'Ext.layout.Auto',alias:'layout.cssgrid',type:'cssgrid',requires:['ABPControlSet.common.CSSGrid'],mixins:['ABPControlSet.common.CSSGrid'],constructor:function(b){b=b||{};var a=b.container;if(a){var c=a&&a.items;if(c){c.setSorters({sorterFn:this.columnAndRowSort});c.sort()}}this.callParent(arguments)},doLayout:function(b){var a=this,c=a.getLayoutItems();a.runCalculations(c,b)},onAfterItemDockedChange:function(){this.callParent(arguments);this.doLayout(!0)},onItemPositionedChange:function(){this.callParent(arguments);this.doLayout(!0)},onItemCenteredChange:function(){this.callParent(arguments);this.doLayout(!0)},onItemHiddenChange:function(){this.doLayout(!0)},onContainerInitialized:function(){var a=this,b=a.getContainer();b.mon(Ext.Viewport,'orientationchange',function(){this.doLayout()},a);b.on({single:!0,painted:function(){this.doLayout();if(this.responsive===!0){b.mon(Ext.Viewport,'resize',function(e,c,f,a,d){if(c!==a){var b=this.getLayoutItems();this.runCalculations(b)}},this)}},scope:a});b.on({delegate:'> component',hiddenchange:'onItemHiddenChange',scope:a});a.callParent(arguments)},getLayoutItems:function(){var d=this,g=d.getContainer(),a=g&&g.items,c,f=[];a=a&&a.getRange()||[];var h=a.length,b;for(var e=0;e<h;e++){b=a[e];c=b.getHideMode?b.getHideMode():null;if(b.isVisible()||c&&c!=='display'||!d.responsive){f.push(b)}}return d.determineItemsWithColumnRowSorting(f)},getRenderTarget:function(){var a=this.getContainer();var b=a.bodyElement?a.bodyElement:a;return b}});Ext.define('ABPControlSet.view.CardContainer',{extend:'Ext.Container',xtype:'abpcardcontainer',requires:['ABPControlSet.base.mixin.CardContainer'],mixins:['ABPControlSet.base.mixin.CardContainer'],layout:{type:'card'},constructor:function(a){a=a||{};this.mixins.abpcardcontainer.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.CustomControl',{extend:'Ext.Component',xtype:'abpcustomcontrol',requires:['ABPControlSet.base.mixin.CustomControl'],mixins:['ABPControlSet.base.mixin.CustomControl'],element:{reference:'element',children:[{reference:'embeddedEl',style:'height: 100%; width: 100%;'}]},constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},initialize:function(){this.callParent(arguments);if(this.rendered){this.beginEmbed()}else {this.on({painted:{fn:this.beginEmbed,scope:this,priority:999}})}}});Ext.define('ABPControlSet.view.Window',{extend:'Ext.Dialog',xtype:'abpwindow',scaleWithContainer:!0,scaleWithContainerRatio:0.9,skipCenter:!1,startMaximizedOnSmallViewport:!0});Ext.define('ABPControlSet.view.button.Button',{extend:'Ext.Button',xtype:'abpbutton',requires:['ABPControlSet.base.mixin.Button'],mixins:['ABPControlSet.base.mixin.Button'],config:{iconColor:null},constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},setIconColor:function(a){if(this.iconElement){this.iconElement.setStyle('color',a)}},doTap:function(a){a.callParent(arguments);if(typeof appInsights=='object'){appInsights.trackEvent({name:'buttonclick',button:a.name||a.itemId||a.automationCls,text:a.getText()})}}});Ext.define('ABPControlSet.view.button.Segmented',{extend:'Ext.SegmentedButton',xtype:'abpsegmentedbutton',mixins:['ABPControlSet.base.mixin.SegmentedButton'],lastChangeEventFromUser:!1,constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},initialize:function(){this.on({'change':this.fireUserChanged});this.callParent(arguments)},privates:{onPressedChange:function(c,b){var a=this.settingValue;if(a===!1||this.lastChangeEventTrusted){this.lastChangeEventTrusted=!0}this.callParent(arguments);if(a===!1&&this.lastChangeEventTrusted){this.lastChangeEventTrusted=!1}},fireUserChanged:function(a,b,c){if(this.lastChangeEventTrusted){a.__flushValueViewModel();a.fireEvent(ABPControlSet.common.types.Events.UserChanged,a,b,c)}return}}});Ext.define('ABPControlSet.view.component.Icon',{extend:'Ext.Component',xtype:'abpicon',mixins:['ABPControlSet.base.mixin.Icon']});Ext.define('ABPControlSet.view.component.StepProgressBar',{extend:'Ext.Component',xtype:'abpstepprogressbar',tpl:['<div class="abp-step-progress-container">','<ul class="abp-step-progress-list">','<tpl for="steps">','<tpl if="complete">','<li id="abp-step-number-id-{stepNum}" class="abp-step-progress-complete abp-step-progress-step">','<span class="abp-step-progress-btn-wrapper">','<span class="abp-step-progress-step-button">{stepCompleteLabel}</span>','</span>','<span class="abp-step-progress-step-label">{label}</span>','</li>','<tpl elseif="current">','<li id="abp-step-number-id-{stepNum}" class="abp-step-progress-current abp-step-progress-step">','<span class="abp-step-progress-btn-wrapper">','<span class="abp-step-progress-step-button">{stepLabel}</span>','</span>','<span class="abp-step-progress-step-label">{label}</span>','</li>','<tpl else>','<li id="abp-step-number-id-{stepNum}" class="abp-step-progress-undone abp-step-progress-step">','<span class="abp-step-progress-btn-wrapper">','<span class="abp-step-progress-step-button">{stepLabel}</span>','</span>','<span class="abp-step-progress-step-label">{label}</span>','</li>','</tpl>','</tpl>','</ul>','</div>'],onResize:function(a,c,b,d){this.hide();this.show()}});Ext.define('ABPControlSet.view.tree.CheckboxTreeItem',{extend:'Ext.list.TreeItem',xtype:'checkboxtreelistitem',checkedCls:Ext.baseCSSPrefix+'treelist-item-checked',element:{reference:'element',tag:'li',cls:Ext.baseCSSPrefix+'treelist-item',children:[{reference:'rowElement',cls:Ext.baseCSSPrefix+'treelist-row',children:[{reference:'wrapElement',cls:Ext.baseCSSPrefix+'treelist-item-wrap',children:[{reference:'iconElement',cls:Ext.baseCSSPrefix+'treelist-item-icon'},{reference:'textElement',cls:Ext.baseCSSPrefix+'treelist-item-text'},{reference:'expanderElement',cls:Ext.baseCSSPrefix+'treelist-item-expander'},{reference:'checkboxElement',cls:Ext.baseCSSPrefix+'treelist-item-checkbox'}]}]},{reference:'itemContainer',tag:'ul',cls:Ext.baseCSSPrefix+'treelist-container'},{reference:'toolElement',cls:Ext.baseCSSPrefix+'treelist-item-tool'}]},onClick:function(){var b=this,a=b.getNode();if(a){checked=!a.get('checked');a.set('checked',checked);b.doNodeUpdate(a)}b.callParent(arguments)},privates:{doNodeUpdate:function(c){var a=this,d=a.checkedCls;a.callParent([c]);var e=c.get('checked');var b=a.element;if(b){b.toggleCls(d,e)}}}});Ext.define('ABPControlSet.view.tree.Tree',{extend:'Ext.list.Tree',xtype:'abptree',requires:['ABPControlSet.base.mixin.Component','ABPControlSet.view.tree.CheckboxTreeItem'],mixins:['ABPControlSet.base.mixin.Component'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},getItemConfig:function(b,c){var a=this.callParent(arguments);if(b.get('checkbox')===!0){a.xtype='checkboxtreelistitem';a.checked=!!b.get('checked')}return a}});Ext.define('ABPControlSet.view.contextmenu.ContextMenu',{extend:'ABPControlSet.view.tree.Tree',xtype:'abpcontextmenu',config:{currentCmp:null,currentContext:null},margin:0});Ext.define('ABPControlSet.view.errors.ErrorList',{extend:'Ext.Component',xtype:'abperrors',alias:'abperrorpanel',cls:'abp-errors',ariaRole:'alert',config:{title:'What happened',messageType:1,errors:[]},element:{reference:'element',cls:'abp-errors',listeners:{click:'onClick'},children:[{reference:'iconContainer',cls:'abp-errors-icon',children:[{reference:'iconEl',tag:'span'}]},{reference:'maintContainer',cls:'errors-message-content',children:[{reference:'titleEl',cls:'abp-errors-title'},{reference:'messagesEl',tag:'ul',cls:'abp-errors-list'}]}]},applyMessageType:function(a,b){if(a==='error'){a=1}else {if(a==='warning'){a=2}else {if(a==='info'){a=3}}}return a},updateMessageType:function(c,b){var a=this;if(a.rendered){if(b){a.iconEl.removeCls(a.getIconClass(b));a.el.removeCls(a.getElClass(b))}a.iconEl.addCls(a.getIconClass(c));a.el.addCls(a.getElClass(c));a.updateLayout()}},updateTitle:function(b){var a=this;if(a.rendered){a.titleEl.setHtml(b);a.updateLayout()}},updateErrors:function(d){var a=this;if(a.rendered){var c=a.getMessagesData();var b='';Ext.each(c,function(a,c){b+='<li class="abp-errors-message" data-fieldid="'+a.fieldId+'">'+Ext.encode(a.text)+'</li>'});a.messagesEl.setHtml(b)}},privates:{getIconClass:function(a){if(a===1){return 'icon-sign-warning'}if(a===2){return 'icon-information'}return 'icon-about'},getElClass:function(a){if(a===1){return 'abp-errors-warning'}if(a===2){return 'abp-errors-information'}return 'abp-errors-error'},getMessagesData:function(){var b=this,a=[];Ext.each(b.getErrors(),function(c,d){var b={};if(Ext.isString(c)){b.text=c}else {b.text=c.text;b.fieldId=c.fieldId}a.push(b)});return a},onClick:function(a,c){if(a.target.tagName!=='LI'){return}var b={fieldId:null};if(a.target.dataset.fieldid){b.fieldId=a.target.dataset.fieldid}this.fireEvent('navigateField',b,a)}}});Ext.define('ABPControlSet.view.field.Checkbox',{extend:'Ext.field.Checkbox',xtype:'abpcheckbox',requires:['ABPControlSet.base.mixin.Checkbox'],mixins:['ABPControlSet.base.mixin.Checkbox'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},initialize:function(){this.on({'change':this.fireUserChanged,'painted':this.afterRenderInit});this.callParent(arguments)},updateRequired:Ext.emptyFn,privates:{afterRenderInit:function(){if(Ext.isiOS){this.element.onAfter('click',this.afterClickiOS,this)}},fireUserChanged:function(a,d,e){var b=this,c=Date.now();Ext.defer(function(){if(a.containsFocus||a.hasFocus||Ext.isiOS&&b.lastClickTime&&c-b.lastClickTime<b.IOS_USER_CLICK_IS_CHANGE_SOURCE_TIMEOUT){b.lastClickTime=null;a.__flushValueViewModel();a.fireEvent(ABPControlSet.common.types.Events.UserChanged,a,d,e)}},1)},afterClickiOS:function(b,c,d,e,f,g){var a=this;a.lastClickTime=Date.now()}}});Ext.define('ABPControlSet.view.field.ComboBox',{extend:'Ext.field.ComboBox',xtype:'abpcombobox',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.ComboBox'],mixins:['ABPControlSet.base.mixin.ComboBox'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},setValue:function(b){if(this.getPublishListValue()){var a=this.findRecordByValue(b);if(a&&!a.phantom){this.setListValue(b)}else {this.setListValue(undefined)}}this.callParent(arguments)},onFocus:function(){var c=this.getStore(),b=c.getCount(),a=this.getEditable();if(b===0&&a){return}else {this.callParent(arguments)}}});Ext.define('ABPControlSet.view.field.Currency',{extend:'Ext.field.Container',xtype:'abpcurrency',requires:['ABPControlSet.base.mixin.Field'],mixins:['ABPControlSet.base.mixin.Field'],layout:{type:'hbox',align:'stretch'},cls:'abp-currencybox',searchString:'',showRight:!1,config:{value:null,currencyCode:null,store:null,readOnly:!1,formatString:'000,000.00',stepValue:1},defaults:{currencyDisplayField:'name',currencyValueField:'abbr'},constructor:function(a){a=a||{};a.currencyDisplayField=a.currencyDisplayField||'display';a.currencyValueField=a.currencyValueField||'value';a.store=a.store||this.buildStore(a);var b=a.showRight=a.showRight||!1;a.items=[b?this.buildNumberField(a):this.buildCombo(a),b?this.buildCombo(a):this.buildNumberField(a)];this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},updateReadOnly:function(c){var d=this,a=d.down('abpnumber'),b=d.down('abpcombobox');if(a){a.setReadOnly(c)}if(b){b.setReadOnly(c)}},updateValue:function(b){var c=this,a=c.down('abpnumber');if(a){a.setValue(b)}},updateStore:function(b){var d=this,a=d.down('abpcombobox');if(a&&a.bindStore){var c=b?b.getCount()<=1:!0;if(b){a.bindStore(b);a.setSelection(b.getAt(0));a.setValue(d.config.currencyCode)}a.setDisabled(c);a.setHideTrigger(c)}},updateCurrencyCode:function(b){var c=this,a=c.down('abpcombobox');if(a){a.setValue(b)}},buildCombo:function(a){return {xtype:'abpcombobox',displayField:a.currencyDisplayField||'display',valueField:a.currencyValueField||'value',editable:!1,enableKeyEvents:!0,tabIndex:-1,store:a.store,autoSelect:!0,hideTrigger:!a.store||a.store.getCount()<=1,disabledCls:a.showRight?'abp-currency-combo-single-right':'abp-currency-combo-single',cls:['abp-currency-combo',a.showRight?'abp-currency-right':'abp-currency-left'],disabled:!a.store||a.store.getCount()<=1,listeners:{afterRender:this.onComboAfterRender,collapse:this.onComboCollapse,select:this.onComboSelect}}},onComboSelect:function(a,b){a.up('abpcurrency').setCurrencyCode(a.getValue())},onComboKeyUp:function(a,c){var b=a.up('abpcurrency');b.keyupHandler(c)},buildNumberField:function(a){return {xtype:'abpnumber',hideTrigger:!0,decimalPrecision:a.decimalPrecision?a.decimalPrecison:2,allowThousandSeparator:!0,decimalSeparator:a.decimalSeparator?a.decimalSeparator:'.',thousandSeparator:a.thousandSeparator?a.thousandSeparator:',',allowDecimals:!0,enableKeyEvents:!0,keyNavEnabled:!1,repsonsiveFill:!0,inputType:null,minValue:a.minValue||a.minValue===0?a.minValue:Number.NEGATIVE_INFINITY,maxValue:a.maxValue?a.maxValue:Number.MAX_VALUE,stepValue:a.step?a.step:1,cls:['abp-currency-number',a.showRight?'abp-currency-left':'abp-currency-right'],listeners:{change:this.onNumberChange,keyup:this.onNumberKeyDown}}},onNumberBlur:function(a){var b=a.up('abpcurrency');if(b){b.formatNumberField(a,a.getValue(),'0,0.00')}},onNumberChange:function(c,a,d){var b=c.up('abpcurrency');if(Math.abs(a-d)===1){b.formatNumberField(c,a,'0,0.00')}b.setValue(a)},formatNumberField:function(a,e,d){var b=Ext.util.Format.thousandSeparator,c=Ext.util.Format.decimalSeparator;Ext.util.Format.thousandSeparator=a.thousandSeparator;Ext.util.Format.decimalSeparator=a.decimalSeparator;a.setInputValue(Ext.util.Format.number(e,d));Ext.util.Format.thousandSeparator=b;Ext.util.Format.decimalSeparator=c},buildStore:function(a){var d=[],b=a.currencyDisplayField,c=a.currencyValueField;if(Ext.isArray(a.availableCurrencies)){a.availableCurrencies.forEach(function(f){var e={};e[b]=e[c]=f;d.push(e)})}return Ext.create('Ext.data.Store',{fields:[b,c],data:d})},onNumberKeyDown:function(a,b){var g=a.up('abpcurrency');if(b.ctrlKey||b.keyCode===32||b.altKey||/^[A-Z]$/i.test(b.browserEvent.key)){g.keyupHandler(b);b.stopEvent()}else {var c=a.getValue(),f=a.getMinValue(),e=a.getMaxValue(),d=a.stepValue;if(b.keyCode===40){if(c-d>f){a.setValue(c-d);a.setInputValue(c+d)}else {a.setValue(f);a.setInputValue(f)}}else {if(b.keyCode===38){if(c+d<e){a.setValue(c+d);a.setInputValue(c+d)}else {a.setValue(e);a.setInputValue(e)}}}}},onComboAfterRender:function(a){a.setValue(a.lastValue)},onComboCollapse:function(a){Ext.defer(function(){a.up().down('abpnumber').focus()},0)},onNumberAfterRender:function(a){var b=a.up('abpcurrency');if(b){b.formatNumberField(a,a.getValue(),'0,0.00')}},keyupHandler:function(c){var b=this,a=b.down('abpcombobox');b.initialValueChanged=!0;if(!a.isDisabled()){if(c.ctrlKey){var d=b.getStore(),e=d.indexOf(a.getSelection()),g=d.getCount();if(c.keyCode===38){if(e>0){a.setSelection(d.getAt(e-1))}else {a.setSelection(d.getAt(g-1))}}else {if(c.keyCode===40){if(e<g-1){a.setSelection(d.getAt(e+1))}else {a.setSelection(d.getAt(0))}}}}else {if(c.altKey){if(c.keyCode===38){a.collapse()}else {if(c.keyCode===40){a.expand()}}}else {b.searchString+=c.browserEvent.key;var f=b.getStore().query(b.config.currencyDisplayField,b.searchString,!1,!1);if(f.length>0){a.setSelection(f.getAt(0))}if(f.length<=1){b.searchString=''}}}}}});Ext.define('ABPControlSet.view.field.Date',{extend:'Ext.field.Date',xtype:'abpdate',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Field'],mixins:['ABPControlSet.base.mixin.Field'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.panel.DateTime',{extend:'Ext.panel.Date',xtype:'abpdatetimepanel',requires:['Ext.layout.Carousel','Ext.panel.DateView','Ext.panel.DateTitle','Ext.panel.YearPicker'],bbar:{xtype:'container',items:[{padding:'0px 2px 0px 2px',xtype:'abptime',itemId:'timeField'}]},config:{format:{$value:Ext.Date.defaultFormat+' '+Ext.Date.defaultTimeFormat,cached:!0}},applyValue:function(a){if(typeof a==='string'){a=Ext.Date.parse(a,this.getFormat())}else {if(!a){a=new Date()}}return Ext.isDate(a)?a:null},onTodayButtonClick:function(){var b=this,e=b.down('#timeField'),c=e?e.getValue():null,a;a=b.getLayout().getFrontItem().getMonthOffset();if(a!==0){if(Math.abs(a)===1){b.switchPanes(-a)}else {b.replacePanes(-a)}}var d=new Date();if(c){d.setHours(c.getHours());d.setMinutes(c.getMinutes())}b.setValue(d)},updateValue:function(b,e){var c=this,d=Ext.isDate(b)?Ext.Date.format(b,Ext.Date.defaultTimeFormat):null,a=c.down('#timeField');if(a){a.setValue(d)}c.callParent(arguments)},onDateClick:function(e){var b=this,c=e.getTarget(b.cellSelector,b.bodyElement),a=c&&c.date,g=!0,h=c&&c.disabled,f=b.down('#timeField'),d=f?f.getValue():null;a=new Date(a.getTime());if(!a||b.getDisabled()){return}if(a&&d){a.setHours(d.getHours());a.setMinutes(d.getMinutes())}if(!h){b.setValue(a);if(b.getAutoConfirm()){if(e.pointerType==='touch'){e.preventDefault()}g=!1;b.fireEvent('select',b,a)}}if(g){b.focusDate(a)}},privates:{applyFocusableDate:function(b){var c=this,a;if(b){if((a=c.getMinDate())&&!c.getShowBeforeMinDate()&&b.getTime()<a.getTime()){b=a}else {if((a=c.getMaxDate())&&!c.getShowAfterMaxDate()&&b.getTime()>a.getTime()){b=a}}}return b}},getPaneByDate:function(g){var h=this,f=Ext.Date.clearTime(new Date(g),!0),d=h.getInnerItems(),c,b,a,e;c=Ext.Date.getFirstDateOfMonth(f);for(a=0,e=d.length;a<e;a++){b=d[a];if(Ext.Date.isEqual(b.getMonth(),c)){return b}}return null},getCellByDate:function(c){var a=Ext.Date.clearTime(new Date(c),!0);var b=this.getPaneByDate(a);return b?b.getCellByDate(a):null}});Ext.define('ABPControlSet.view.picker.DateTime',{extend:'Ext.picker.Date',xtype:'abpdatetimepicker',config:{hourText:'Hour',minuteText:'Minute',meridiemText:'AM/PM',slotOrder:['month','day','year','hour','minute','meridiem']},setValue:function(a,c){var b=this;if(Ext.isDate(a)){a={day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear(),hour:a.getHours(),minute:a.getMinutes()}}b.callParent([a,c]);if(b.rendered){b.onSlotPick()}return b},getValue:function(n){var a={},l=this.getItems().items,o=l.length,g,b,c,e,m,k,i,d,f;for(f=0;f<o;f++){d=l[f];if(d.isSlot){a[d.getName()]=d.getValue(n)}}var h=!1;var j=Ext.Date.defaultTimeFormat;try{if(j&&j.indexOf('H')>-1){h=!0}}catch(p){}if(a.year===null&&a.month===null&&a.day===null){return null}i=Ext.isNumber(a.meridiem)?a.meridiem:0;e=Ext.isNumber(a.year)?a.year:1;c=Ext.isNumber(a.month)?a.month:1;b=Ext.isNumber(a.day)?a.day:1;m=Ext.isNumber(a.hour)?h?a.hour:a.hour+(i===1?12:0):h?0:12;k=Ext.isNumber(a.minute)?a.minute:0;if(c&&e&&c&&b){g=this.getDaysInMonth(c,e)}b=g?Math.min(b,g):b;return new Date(e,c-1,b,m,k)},createSlots:function(){var c=this,q=c.getSlotOrder(),b=c.getYearFrom(),g=c.getYearTo(),l=[],m=[],i=[],j=[],f=[],p=[{text:'AM',value:0},{text:'PM',value:1}],k=[],r=b>g,n,a,e;while(b){l.push({text:b,value:b});if(b===g){break}if(r){b--}else {b++}}var d=!1;var h=Ext.Date.defaultTimeFormat;try{if(h&&h.indexOf('H')>-1){d=!0}}catch(s){}var o=d?24:12;for(a=0;a<o;a++){j.push({text:d?a:a+1,value:d?a:a+1})}for(a=0;a<60;a++){f.push({text:a<10?'0'+a:a,value:a})}e=c.getDaysInMonth(1,(new Date()).getFullYear());for(a=0;a<e;a++){m.push({text:a+1,value:a+1})}for(a=0,n=Ext.Date.monthNames.length;a<n;a++){i.push({text:Ext.Date.monthNames[a],value:a+1})}q.forEach(function(a){if(a!=='meridiem'||a==='meridiem'&&!d){k.push(c.createSlot(a,m,i,l,j,f,p))}});c.setSlots(k)},createSlot:function(c,i,f,h,g,e,d){var b=this,a;switch(c){case 'year':a={name:'year',align:'center',data:h,title:b.getYearText(),flex:3};break;case 'month':a={name:c,align:'right',data:f,title:b.getMonthText(),flex:4};break;case 'day':a={name:'day',align:'center',data:i,title:b.getDayText(),flex:2};break;case 'hour':a={name:'hour',align:'center',data:g,title:b.getHourText(),flex:2};break;case 'minute':a={name:'minute',align:'center',data:e,title:b.getDayText(),flex:2};break;case 'meridiem':a={name:'meridiem',align:'center',data:d,title:b.getMeridiemText(),flex:2};break;}if(b._value){a.value=b._value[c]}return a}});Ext.define('ABPControlSet.view.field.Time',{extend:'Ext.field.Time',xtype:'abptime',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Field'],mixins:['ABPControlSet.base.mixin.Field'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.field.DateTime',{extend:'Ext.field.Date',xtype:'abpdatetime',requires:['ABPControlSet.view.panel.DateTime','ABPControlSet.view.picker.DateTime','ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Field'],mixins:['ABPControlSet.base.mixin.Field'],config:{dateFormat:Ext.Date.defaultFormat+' '+Ext.Date.defaultTimeFormat},floatedPicker:{xtype:'abpdatetimepanel',autoConfirm:!0,floated:!0,listeners:{tabout:'onTabOut',select:'onPickerChange',scope:'owner'},keyMap:{ESC:'onTabOut',scope:'owner'}},edgePicker:{xtype:'abpdatetimepicker',cover:!0},constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},applyPicker:function(a,c){var b=this;a=b.callParent([a,c]);b.pickerType=a.xtype==='abpdatetimepicker'?'edge':'floated';a.ownerCmp=b;return a}});Ext.define('ABPControlSet.view.field.Display',{extend:'Ext.field.Display',xtype:'abptextdisplay',classCls:'abp-textdisplay',requires:['ABPControlSet.base.mixin.TextDisplay','ABPControlSet.util.Markdown'],mixins:['ABPControlSet.base.mixin.TextDisplay'],updateRequired:Ext.emptyFn,constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},updateValue:function(a,b){var c=this.getMarkupType();if(c==='markdown'&&a&&a.length){if(this.usage==='address'){a=this.getAddressMarkdownValue(a,b)}this.setHtml(ABPControlSet.util.Markdown.parseMarkdown(a))}else {this.callParent([a,b])}},getAddressMarkdownValue:function(d,g){var e=encodeURIComponent(d.replace(/\n/g,','));var b=d.split('\n');var a='[**'+('-'+b[0]).trim().substr(1)+'**';var f=b.length;for(var c=1;c<f;c++){a+='  \n'+('-'+b[c]).trim().substr(1)}a+=']('+Ext.String.format(ABPControlSet.common.Constants.MAP_URL_FORMAT_STRING,e)+')';return a}});Ext.define('ABPControlSet.view.field.TextArea',{extend:'Ext.field.TextArea',xtype:'abptextarea',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Field'],mixins:['ABPControlSet.base.mixin.Field'],grow:!0,constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.field.EntityLink',{extend:'ABPControlSet.view.field.TextArea',xtype:'abpentitylinkfield',cls:'abp-link-field',editable:!1,maxRows:1,config:{valueField:'value',displayField:'text'},setUserValue:function(a){var b=this;this.__userChange=!0;b.setValue(a);this.__userChange=null},updateValue:function(a,c){a=a||{};var b=this,d=b.getEntityDisplayValue(a);b.setInputValue(d);b.syncEmptyState();if(this.__userChange&&!b.valuesEqual(a,c)){this.fireEvent(ABPControlSet.common.types.Events.UserChanged,this,a,c)}},valuesEqual:function(a,b){if(Ext.isEmpty(a)&&Ext.isEmpty(b)){return !0}if(!Ext.isObject(a)||!Ext.isObject(b)){return !1}return Ext.Object.equals(a,b)},completeEdit:function(){var a=this,c=a.getInputValue(),b=a.parseValue(c);if(b!==null){a.setInputValue(a.getEntityDisplayValue(a.getValue()))}},getEntityDisplayValue:function(b){var c=this,e=c.getDisplayField(),f=c.getValueField(),a=b[e],d=b[f];if(Ext.isEmpty(a)){a=d}return a}});Ext.define('ABPControlSet.view.picker.Icon',{extend:'Ext.dataview.List',xtype:'abpiconpicker',cls:['abp-icon-picker','abp-icon-picker-modern'],itemCls:'abp-icon-picker-item',constructor:function(a){a=a||{};a.store=a.store||ABPControlSet.common.Common.getIconStore();this.callParent([a])},applyItemTpl:function(){return '<div class="'+this.itemCls+' {icon}"></div>'}});Ext.define('ABPControlSet.view.field.IconPicker',{extend:'Ext.field.ComboBox',xtype:'abpiconcombo',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Field','ABPControlSet.view.picker.Icon'],mixins:['ABPControlSet.base.mixin.Field'],displayField:'icon',valueField:'icon',triggers:{iconTrigger:{xclass:'ABPControlSet.view.form.trigger.Trigger'}},constructor:function(a){a=a||{};var b=ABPControlSet.common.Common.getIconStore();a.store=b;a.picker='floated';a.floatedPicker={xtype:'abpiconpicker',store:b};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},setValue:function(c){var b=this;b.callParent(arguments);var a=b.getTriggers()['iconTrigger'];if(a){a.setIcon(c)}}});Ext.define('ABPControlSet.view.field.Image',{extend:'Ext.field.Container',xtype:'abpimage',requires:['ABPControlSet.base.mixin.Image'],mixins:['ABPControlSet.base.mixin.Image'],layout:'fit',statics:{defaultDimension:128},viewModel:{data:{pickerImageHasChanged:!0,pickerImageIsRemovedOrNeverAdded:!0,editorReadOnly:!0},formulas:{addOrChangeButtonText:function(a){return a('pickerImageIsRemovedOrNeverAdded')?'Add':'Change'}}},config:{src:null,labelHidden:!1},placeholderOpacity:0.3,enabledOpacity:1,originalPickerSrc:'',pickerShowing:!1,publishes:['src'],cls:'abp-image',defaultPlaceholder:Ext.getResourcePath('img/temp_abpimage-empty-placeholder.png',null,'ABPControlSet'),defaultEmptyPlaceHolder:Ext.getResourcePath('img/temp_abpimage-empty-placeholder.png',null,'ABPControlSet'),defaultPopupPlaceholder:Ext.getResourcePath('img/temp_abpimage-edit-placeholder.png',null,'ABPControlSet'),updateRequired:Ext.emptyFn,constructor:function(a){a=a||{};var b=this;var f=parseInt(a.height||a.minHeight||a.maxHeight||100);var e=a.readOnly=a.readOnly===!1?!1:!0;var d=this.configureDimensions(a);var c=this.configureImageClassName(a.cropStyle,d);a.height=d.height;a.width=d.width;if(!a.readOnly&&!a.src){a.src='';if(a.bind&&a.bind.src){}else {a.cls=('new-image '+(this.config.cls||'')+' '+(a.cls||'')).trim()}}a.items=[{xtype:'component',itemId:'placeholder',cls:'abp-image-placeholder',html:a.placeholder||'',style:{'text-align':'center','font-size':'2em','opacity':b.placeholderOpacity}},{xtype:'container',cls:('placeholder-img-wrapper '+c).trim()+' abp-image-upload',itemId:'defaultImage',hidden:!1,style:{'opacity':b.placeholderOpacity},items:[{xtype:'image',itemId:'placeholder-image',cls:c,context:b,scope:b,style:{'opacity':b.placeholderOpacity},listeners:{tap:this.onPlaceholderImageTap,show:this.onPlaceholderShow,hide:this.onPlaceholderHide},src:this.defaultPlaceholder}]},{xtype:'container',cls:('empty-placeholder-img-wrapper '+c).trim()+' abp-image-upload',itemId:'defaultEmptyImage',hidden:!1,items:[{xtype:'image',itemId:'empty-placeholder-image',cls:c+' empty-abp-image',context:b,scope:b,src:b.defaultEmptyPlaceHolder,style:{'opacity':b.placeholderOpacity}}]},{xtype:'image',itemId:'user-image',hidden:!0,src:a.src,cls:c,listeners:{tap:this.onImageTap,load:this.onImageLoaded,scope:this,el:{doubletap:this.onImageDoubleTap,taphold:this.onImageTapHold,scope:this}}},{xtype:'abpicon',itemId:'editButton',value:'icon-pencil',cls:'abp-image-icon-edit',bind:{hidden:'{editorReadOnly}'}},{xtype:'abpdialogform',itemId:'imageEditorPopup',minHeight:100,context:b,cls:'abp-image-editor',listeners:{beforeshow:b.onPopupPickerBeforeShow,hide:b.onPopupPickerHide,resize:b.onPopupPickerResize},items:[{xtype:'titlebar',docked:'top',title:'Edit Photo',titleAlign:'left',items:[{iconCls:'icon-navigate-cross',handler:function(){this.up('#imageEditorPopup').hide()},cls:'abp-image-editor-close',align:'right'}]},{xtype:'image',itemId:'user-popup-image',context:b,cls:'abp-image-editor-image',src:b.defaultPopupPlaceholder,listeners:{beforeshow:b.onPopupPickerBeforeShow,load:b.onPopupPickerLoad,tap:b.onChangeButtonTap}},{xtype:'titlebar',docked:'bottom',items:[{xtype:'button',text:'Delete',align:'left',context:b,bind:{hidden:'{pickerImageIsRemovedOrNeverAdded}'},handler:function(){this.context.clearImage()}},{xtype:'button',text:'Save Changes',align:'right',context:b,cls:'abp-image-editor-save-btn',bind:{hidden:'{pickerImageHasChanged}'},handler:b.onSaveButtonTap},{xtype:'button',bind:{text:'{addOrChangeButtonText}'},align:'right',context:b,minWidth:64,handler:b.onChangeButtonTap},{xtype:'filefield',name:a.name||'abp-popup-image-upload-form',accept:'image/*',text:'Change',hidden:!0,align:'right',listeners:{change:{element:'element',fn:b.onFileChange,scope:this}}}]}]}];this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a]);this.down('#editButton').el.on('tap',function(){b.onImageTap()});this.down('filefield').setInputAttribute('type','file');this.down('filefield').setInputAttribute('oninput','');this.down('filefield').setInputAttribute('accept',Ext.isEmpty(a.accept)?'image/*':a.accept)},onImageTapHold:function(a){this.fireEvent(ABPControlSet.common.types.Events.ImageLongPress,a)},onImageDoubleTap:function(a){this.fireEvent(ABPControlSet.common.types.Events.ImageDoubleClick,a)},updateOpacity:function(a){if(a===!0){this.down('#editButton').setStyle({'opacity':this.placeholderOpacity})}else {this.down('#editButton').setStyle({'opacity':this.enabledOpacity})}},onPlaceholderShow:function(){this.context.down('#editButton').setStyle({'opacity':this.context.placeholderOpacity})},onPlaceholderHide:function(){this.context.down('#editButton').setStyle({'opacity':this.context.enabledOpacity})},onResize:function(b,c,e,d){if(b!==c){var a=Math.min(b,c);this.setHeight(a);this.setWidth(a);this.setMinHeight(a);this.setMinWidth(a);this.setMaxHeight(a);this.setMaxWidth(a);this.setStyle({'padding':'0px 0px 0px 0px','margin':'0px 0px 0px 0px'})}},onPopupPickerLoad:function(e,d){var c=this.context.query('#imageEditorPopup')[0].el.getWidth(),b=ABPControlSet.view.field.Image.defaultDimension;var a=this.context.getPopupImageDimensions(c,b,d.target);this.el.removeCls('x-hidden x-hidden-display');this.el.setHeight(ABPControlSet.view.field.Image.defaultDimension);this.el.setWidth(a.width);this.el.setStyle('background-size',a.backgroundSize)},getPopupImageDimensions:function(g,f,h){var e=h.width,d=h.height,b=ABPControlSet.view.field.Image.defaultDimension,a=ABPControlSet.view.field.Image.defaultDimension,c=e/d;if(e>g&&d>f){if(d>e){a=f;b=a*c}else {b=g;a=b/c}}else {a=ABPControlSet.view.field.Image.defaultDimension;b=a*c}var i=b+'px '+a+'px';return {height:a,width:b,backgroundSize:i}},onPopupPickerBeforeShow:function(){var a=this.context,b=a.getViewModel();a.pickerShowing=!0;a.originalPickerSrc=a.getSrc();a.setPopupImagePickerSrc(a.getSrc());b.set('pickerImageIsRemovedOrNeverAdded',Ext.isEmpty(a.originalPickerSrc))},setLabelHidden:function(a){if(!Ext.isEmpty(this.labelElement)){if(a===!0){this.labelElement.hide()}else {this.labelElement.show()}}},onPopupPickerHide:function(){var a=this.context,b=a.getViewModel();if(!a.saveRequested){a.setPopupImagePickerSrc(a.originalPickerSrc)}a.saveRequested=!1;a.pickerShowing=!1},onImageLoaded:function(){var a=this;if(!Ext.isEmpty(a.getSrc())){a.setStyle({'padding':'0px 0px 0px 0px','margin':'0px 5px 0px 10px'})}a.showLoadedImage();a.hidePlaceHolderText();a.hidePlaceHolderImage()},onPopupPickerResize:function(){this.center()},onImageTap:function(a){if(!this.getReadOnly()){this.down('#imageEditorPopup').show();this.fireEvent(ABPControlSet.common.types.Events.ImageClick,a)}},onSaveButtonTap:function(){var d=this,b=d.context,a=b.query('#imageEditorPopup')[0];var c=a.down('#user-popup-image').getSrc();if(c===b.defaultPopupPlaceholder){b.setSrc('')}else {b.setSrc(c)}a.saveRequested=!0;a.originalPickerSrc=c;a.hide()},onChangeButtonTap:function(){var a=this.context.query('filefield')[0].el;if(!Ext.isEmpty(a)){a.query('input[type=file]')[0].click()}},onPlaceholderImageTap:function(a){this.context.query('#imageEditorPopup')[0].show()},getSrc:function(){var a=this.down('#user-image');if(a){return a.getSrc()}},updateReadOnly:function(a){var b=this,c=b.getViewModel();c.set('editorReadOnly',a);this.showDefaultPlaceholder();b.updateOpacity(a)},setSrc:function(b){var a=this;if(Ext.isEmpty(b)){a.resetABPImage()}else {a.setUserImageSrc(b)}a.callParent(arguments)},clearImage:function(){this.onFileChange({target:{files:[]}})},validateFileType:function(a,c){if(Ext.isEmpty(a)){return !0}else {if(a==='image/*'){if(c.toLowerCase().indexOf('image')>-1){return !0}}else {var b=a.split(',');for(var d in b){if(c.toLowerCase()===b[d].toLowerCase()){return !0}}}}return !1},onFileChange:function(c){var b=this,e=b.getViewModel(),a=c.target.files[0],d=new FileReader();if(!a&&!c.event){b.resetImagePicker();return}if(a&&b.validateFileType(c.target.accept,a.type)===!1){ABP.view.base.toast.ABPToast.show({message:'[The file type specified is not supported]',level:'Warning'});return}d.onload=function(a){b.setPopupImagePickerSrc(a.target.result)};if(a){d.readAsDataURL(a)}},privates:{resetABPImage:function(){var a=this;a.hideActualImage();a.showDefaultPlaceholder();var b=this.down('#placeholder');a.addCls('new-image');a.removeCls('loaded')},setUserImageSrc:function(b){var a=this,c=a.down('#placeholder-image'),d=a.down('#user-image');c.hide();a.removeCls('new-image');a.setPopupImagePickerSrc(b);d.setSrc(b);a.hideAllPlaceholders()},setPopupImagePickerSrc:function(b){var a=this,d=a.getViewModel(),c=a.down('#user-popup-image');if(a.pickerShowing){d.set('pickerImageIsRemovedOrNeverAdded',Ext.isEmpty(b));d.set('pickerImageHasChanged',a.originalPickerSrc===b)}if(Ext.isEmpty(b)){c.setSrc(a.defaultPopupPlaceholder)}else {c.setSrc(b)}},hidePopupImagePickerImage:function(){var a=this,c=a.getViewModel(),b=a.down('#user-popup-image');a.setPopupImagePickerSrc('');b.setHidden(!0)},resetImagePicker:function(){var a=this,b=a.down('filefield');b.reset();a.hidePopupImagePickerImage()},hideActualImage:function(){var b=this,a=b.down('#user-image');b.hidePopupImagePickerImage();a.setSrc('');a.setHidden(!0)},setShownItemDimensions:function(a,b){a.setHeight(b);a.setWidth(b);a.setMinHeight(b);a.setMinWidth(b);a.setMaxHeight(b);a.setMaxWidth(b);a.setStyle({'padding':'0px 0px 0px 0px'})},hideAllPlaceholders:function(){var a=this,d=a.down('#placeholder-image'),b=a.down('#defaultEmptyImage'),c=a.down('#empty-placeholder-image'),f=a.down('#placeholder'),e=a.down('#defaultImage');d.hide();b.hide();c.hide();f.hide();e.hide()},showDefaultPlaceholder:function(){var a=this,c=a.down('#placeholder-image'),g=a.down('#defaultEmptyImage'),e=a.down('#empty-placeholder-image'),d=a.down('#placeholder'),f=a.down('#defaultImage');var b=Math.min(a.getHeight(),a.getWidth());if(b===0){b=a.getContainer().element.getWidth()}if(Ext.isEmpty(a.getSrc())){if(a.getReadOnly()!==!0){a.setShownItemDimensions(c,b);a.setShownItemDimensions(f,b);g.hide();e.hide();d.hide();c.show();f.show()}else {if(!Ext.isEmpty(a.getPlaceholder())){a.setShownItemDimensions(d,b);c.hide();e.hide();f.hide();d.show()}else {a.setShownItemDimensions(g,b);a.setShownItemDimensions(e,b);c.hide();f.hide();d.hide();g.show();e.show()}}}else {d.hide();c.hide()}}}});Ext.define('ABPControlSet.view.field.MultiEntityLink',{extend:'ABPControlSet.view.field.EntityLink',xtype:'abpmultientitylinkfield',config:{delimeter:', ',store:null},setUserValue:function(a){var b=this;this.__userChange=!0;b.setValue(a);this.__userChange=null},updateValue:function(a,d){a=a||[];var c=this,b=c.getStore(),e=c.getEntityDisplayValue(a);c.setInputValue(e);if(b){b.suspendEvents();b.removeAll();b.add(a);b.resumeEvents(!0)}c.syncEmptyState();if(this.__userChange&&!c.valuesEqual(a,d)){this.fireEvent(ABPControlSet.common.types.Events.UserChanged,this,a,d)}},valuesEqual:function(a,b){if(Ext.isEmpty(a)&&Ext.isEmpty(b)){return !0}if(!Ext.isArray(a)||!Ext.isArray(b)){return !1}if(a.length!==b.length){return !1}var c=0;a.forEach(function(d,f){var e=d instanceof Ext.data.Model?d.data:d;Ext.Array.every(b,function(g,i){var h=g instanceof Ext.data.Model?g.data:g;if(Ext.Object.equals(e,h)){c++;return !1}return !0})});return c===a.length},getEntityDisplayValue:function(f){var d=this,a,k=f.length,e='',j=d.getDelimeter(),g,c,i=d.getValueField(),h=d.getDisplayField();for(var b=0;b<k;b++){a=f[b];g=a.get?a.get(i):a[i];c=(a.get?a.get(h):a[h])||g;e+=b!==0?j+c:c}return e},updateStore:function(a){var b=this;if(a){a.clearManagedListeners();b.mon(a,'endupdate',b.doUpdateStore,b)}b.doUpdateStore(a)},doUpdateStore:function(a){if(!a){a=this.getStore()}var b=a&&a.getRange?a.getRange():null;if(b){this.setValue(b)}}});Ext.define('ABPControlSet.view.field.Number',{extend:'Ext.field.Number',xtype:'abpnumber',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Field'],mixins:['ABPControlSet.base.mixin.Field'],allowThousandSeparator:!1,thousandSeparator:null,inputType:'number',inputMode:'decimal',constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},initialize:function(){this.callParent(arguments);if(this.inputMode&&this.inputElement&&this.inputElement.dom){this.inputElement.dom.setAttribute('inputmode',this.inputMode)}}});Ext.define('ABPControlSet.view.field.RadioGroup',{extend:'Ext.field.Container',xtype:'abpradiogroup',requires:['ABPControlSet.base.view.field.plugin.RadioGroup','ABPControlSet.base.mixin.Field'],mixins:['ABPControlSet.base.mixin.RadioGroup'],publishes:['value'],constructor:function(a){a=a||{};a.defaults=a.defaults||{};Ext.applyIf(a.defaults,{xtype:'radiofield',readOnly:a.readOnly,padding:'0 5 0 0'});a.defaults.listeners=a.defaults.listeners||{};Ext.apply(a.defaults.listeners,{change:this.__onItemValueChange,scope:this});this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},setReadOnly:function(){if(this.superclass.setReadOnly){this.callParent(arguments)}},updateValue:function(d){var b=this.getItems().getRange(),c=b.length;for(var a=0;a<c;a++){b[a].setGroupValue(d);break}this.callParent(arguments)},__onItemValueChange:function(a){if(a.$onChange){var b=a.getValue();this.setValue(b)}}});Ext.define('ABPControlSet.view.form.trigger.Trigger',{extend:'Ext.field.trigger.Trigger',alias:'trigger.abptrigger',xtype:'abptrigger',requires:['ABPControlSet.base.mixin.Trigger'],mixins:['ABPControlSet.base.mixin.Trigger'],tabIndex:-1,template:[{tag:'div',reference:'iconElement',classList:['mixin-trigger']}],constructor:function(a){a=a||{};a.component={xtype:'tool',callback:this.triggerClick.bind(this),cls:'mixin-trigger-tool',maskOnDisable:!1,iconCls:a.icon,listeners:{focus:this.onTriggerFocus,scope:this}};a.__handler=a.__handler||a.handler;a.handler=null;this.callParent([a]);this.mon(this.field,'painted',this.onFieldRender,this)},onTriggerFocus:function(b){var a=this.field;if(a){a.fireEvent(ABPControlSet.common.types.Events.TriggerFocus,this)}},triggerClick:function(){var a=this.field;if(a&&!this.getDisabled()&&!a.getDisabled()){if(a.fireEvent(ABPControlSet.common.types.Events.TriggerClick,this,a)!==!1){var b=this.__handler;if(b){Ext.callback(b,null,[this,a],0,a)}}}},onClick:function(d){var a=this,c=!a.getDisabled()&&a.getHandler(),b=a.getField();if(b){this.component.focus();if(c){Ext.callback(c,a.getScope(),[b,a,d],null,b)}}},onMouseDown:function(a){this.component.focus()},onFieldRender:function(){var b=this,a=b.component;if(!a.isComponent&&!a.isWidget){a=Ext.widget(a)}b.component=a;a.iconElement.removeCls(Ext.baseCSSPrefix+'icon-el '+Ext.baseCSSPrefix+'font-icon');a.render(b.iconElement)},destroy:function(){var a=this.component;if(a.isComponent||a.isWidget){a.destroy()}this.component=null;this.callParent()}});Ext.define('ABPControlSet.view.field.Text',{extend:'Ext.field.Text',xtype:'abptext',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.view.form.trigger.Trigger','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Text'],mixins:['ABPControlSet.base.mixin.Text'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.rightpane.interactions.InteractionsController',{extend:'Ext.app.ViewController',alias:'controller.interactionspane',listen:{controller:{'*':{interactions_populate:'populateContainer',rightPane_toggleTab:'handleToggleTab'}}},onToggle:function(){},populateContainer:function(b){var c=this;var a=c.getView();a.removeAll();a.add(b)},privates:{handleToggleTab:function(b){var a=this,c=a.getView();if(b.xtype===c.xtype){a.onToggle()}},baseRightPanePanel_toggleRightPane:function(){this.fireEvent('session_toggleRightPane')}}});Ext.define('ABPControlSet.view.rightpane.interactions.Interactions',{extend:'Ext.Panel',requires:['ABPControlSet.view.rightpane.interactions.InteractionsController'],alias:'widget.interactionspane',controller:'interactionspane',scrollable:'vertical',focusableContainer:!0,initialize:function(){var a=this;a.setTools((a.config.tools||[]).concat([{type:'close',automationCls:'rightpanel-btn-close',handler:'baseRightPanePanel_toggleRightPane'}]));this.callParent()},title:'Interactions',items:[]});Ext.define('ABPControlSet.common.types.Interaction',{items:null,fields:null,placement:null,rightPane:!0,rightPaneTitle:null,title:null,text:null,headerPriority:null,thumbbarPriority:null,bind:null,handler:null});Ext.define('ABPControlSet.base.plugin.Interactions',{extend:'Ext.AbstractPlugin',alias:'plugin.abpinteractions',requires:['ABPControlSet.view.rightpane.interactions.Interactions','ABPControlSet.common.types.Interaction'],groupDefaults:{xtype:'container',padding:0},itemDefaults:{flex:1,xtype:'abpbutton',scale:'medium'},config:{interactions:null,thumbarInteractions:null,headerInteractions:null,rightPaneInteractions:null},interactionsBar:null,__thumbarInteractions:null,__headerInteractions:null,__rightPaneInteractions:null,paneName:'interactions',init:function(b){var a=this,d=b.interactions,c={boxready:a.interactionOnShow,aftershow:a.interactionOnShow,beforehide:a.interactionOnHide,beforedestroy:a.interactionOnHide,scope:a};c[Ext.toolkit==='modern'?'painted':'render']={fn:a.interactionOnShow,scope:a,single:!0};a.setInteractions(d);delete b.interactions;b.on(c)},setInteractions:function(b){b=b||[];var a=this;a.callParent(arguments);a.__thumbarInteractions=[];a.__headerInteractions=[];a.__rightPaneInteractions=[];a.processInteractions(b,!1);a.setThumbarInteractions(a.__thumbarInteractions);if(Ext.toolkit==='classic'){a.setHeaderInteractions(a.__headerInteractions)}a.setRightPaneInteractions(a.__rightPaneInteractions)},interactionOnShow:function(){var b=this,c=b.getCmp(),a=c.getController();if(a){if(Ext.toolkit==='classic'){a.fireEvent('container_rightPane_initTab',b.paneName)}a.fireEvent('container_rightPane_showButton',b.paneName,!0);a.fireEvent('interactions_populate',b.getRightPaneInteractions());if(Ext.toolkit==='modern'){a.fireEvent('container_thumbbar_show',{buttons:b.getThumbarInteractions()})}}},interactionOnHide:function(){var b=this,c=b.getCmp(),a=c.getController();if(a){if(Ext.toolkit==='modern'){a.fireEvent('container_thumbbar_hide',!0)}a.fireEvent('container_rightPane_showButton',b.paneName,!1);a.fireEvent('container_rightPane_toggleTab',b.paneName,!1);a.fireEvent('interactions_populate',[])}},setThumbarInteractions:function(a){var b=this,d=b.getCmp();a=a||[];a=a.sort(function(b,c){return b.thumbbarPriority-c.thumbbarPriority});this.callParent([a]);var b=this,c=d.isVisible();if(c){b.interactionOnShow()}},setHeaderInteractions:function(a){var c=this,b=c.getTBar();a=a||[];a=a.sort(function(b,c){return b.headerPriority-c.headerPriority});if(Ext.toolkit==='classic'){if(b&&Ext.isArray(a)){if(b.removeAll){b.removeAll();b.add(a)}else {b.items=a}}}},getTBar:function(){var a=this,c=a.getCmp(),b=a.interactionsBar;if(!b){b=Ext.create({scrollable:'horizontal',xtype:'toolbar',docked:'top',dock:'top',cls:'interactions-toolbar'});a.interactionsBar=c.addDocked(b)[0]}return a.interactionsBar},setRightPaneInteractions:function(d){this.callParent(arguments);var a=this,c=a.getCmp(),b=c.isVisible();if(b){a.interactionsOnShow()}},processInteractions:function(a,i,j){var c=this,h=c.getCmp(),o=c.__thumbarInteractions,p=c.__headerInteractions,n=c.__rightPaneInteractions,g=h.getController(),q=h.getViewModel();i=a.items?!1:i;if(Ext.isObject(a)){a.viewModel={parent:q};if(a.handler&&g){var f=a.handler;a.handler=Ext.isObject(f)?f.fn.bind(f.scope||g):(Ext.isFunction(f)?f:g[f]?g[f]:Ext.emptyFn).bind(g)}a.refOwner=h;a.scope=g||h;if(Ext.toolkit==='modern'&&Ext.isNumber(a.thumbbarPriority)){var m=Ext.clone(a);delete m.text;o.push(m)}if(!i&&Ext.toolkit==='classic'&&Ext.isNumber(a.headerPriority)){var e=Ext.clone(a);if(e.items){c.processInteractions(e.items,!!j,e);Ext.applyIf(e,{defaultType:'abpbutton'});Ext.applyIf(e,c.groupDefaults);Ext.applyIf(e,{defaults:c.itemDefaults})}else {Ext.applyIf(e,c.itemDefaults)}p.push(e)}if(!i&&a.rightPane!==!1){var b=Ext.clone(a);if(Ext.toolkit==='classic'){b.getBubbleTarget=function(){return h}}if(b.items){var l=[],k=b.items.length;for(var d=0;d<k;d++){if(b.items[d].rightPane!==!1){l.push(b.items[d])}}b.items=l;c.processInteractions(b.items,!!j,b);Ext.applyIf(b,c.groupDefaults);Ext.applyIf(b,{defaults:c.itemDefaults})}else {Ext.applyIf(b,c.itemDefaults)}if(b.rightPaneTitle){b.title=b.rightPaneTitle}n.push(b)}return a}else {if(Ext.isArray(a)){var k=a.length;for(var d=0;d<k;d++){a[d]=c.processInteractions(a[d],!!j,j)}}}}});Ext.define('ABPControlSet.view.form.Form',{extend:'Ext.form.Panel',xtype:'abpform',requires:['ABPControlSet.base.mixin.Panel','ABPControlSet.base.plugin.Interactions'],mixins:['ABPControlSet.base.mixin.Panel'],plugins:{abpinteractions:!1},constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.form.Label',{extend:'Ext.Label',xtype:'abplabel',labelSeparator:'',constructor:function(a){a=a||{};a.cls=a.cls||'';a.cls+=' '+Ext.baseCSSPrefix+'form-item-label '+Ext.baseCSSPrefix+'form-item-label-default '+Ext.baseCSSPrefix+'form-item-label-right '+Ext.baseCSSPrefix+'form-item-label-inner '+Ext.baseCSSPrefix+'form-item-label-text';this.callParent([a])},trimLabelSeparator:function(){var b=this,c=b.labelSeparator,a=b.text||'',d=a.substr(a.length-1);return d===c?a.slice(0,-1):a},getElConfig:function(){var a=this,b=a.text,c=a.labelSeparator;if(!Ext.isEmpty(c)){b=a.trimLabelSeparator()+c}a.html=b?Ext.util.Format.htmlEncode(b):a.html||'';return Ext.apply(a.superclass.superclass.getElConfig.apply(this),{htmlFor:a.forId||''})},setText:function(b,d){var a=this,c=a.labelSeparator;a.text=b;d=!0;if(!Ext.isEmpty(c)){b=a.trimLabelSeparator()+c}a.setHtml(b)}});Ext.define('ABPControlSet.view.grid.AGGrid',{extend:'ABPControlSet.base.view.grid.AGGrid',xtype:'abpaggrid',requires:['ABPControlSet.base.view.grid.AGGrid','ABPControlSet.base.mixin.Component'],mixins:['ABPControlSet.base.mixin.Component'],config:{store:null},constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},initialize:function(){this.callParent(arguments);if(this.rendered){this.beginEmbed()}else {this.on({painted:{fn:this.beginEmbed,scope:this,priority:999}})}}});Ext.define('ABPControlSet.view.grid.Grid',{extend:'Ext.grid.Grid',xtype:'abpgrid',requires:['ABPControlSet.base.view.grid.plugin.Grid','ABPControlSet.base.mixin.Grid'],border:!0,mixins:['ABPControlSet.base.mixin.Grid'],listOnTop:!1,listView:!1,config:{showShadow:!1,shadowOnScroll:!1},listeners:{storechange:{el:'element',fn:function(c,a){var b=this;if(a){a.on('datachanged',b.setGridHeightFromStore.bind(b))}}}},constructor:function(a){a=a||{};a.listView=Ext.isBoolean(a.listView)?a.listView:this.listView===!1?!1:!0;if(a.listView){a.plugins=a.plugins||{};a.plugins.listview=a.plugins.listview===!0?{}:a.plugins.listview;if(!Ext.isObject(a.plugins.listview)){a.plugins.listview={}}a.plugins.listview.fullRow=a.listOnTop||this.listOnTop;a.plugins.listview.template=a.listTemplate||this.listTemplate}this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},onScrollMove:function(g,e){var b=this;var f=b.getShadowOnScroll();var d=b.getShowShadow();var a=document.getElementById('grid-box-shadow');if(!f){return}if(!a){var c=document.createElement('div');c.id='grid-box-shadow';c.style.opacity=0;this.outerCt.el.dom.prepend(c)}if(e>=6&&!d){if(a){a.style.opacity=1}b.setShowShadow(!0)}else {if(e<6&&d){a.style.opacity=0;b.setShowShadow(!1)}}},privates:{syncRows:function(){if(this.isHidden(!0)){return}this.setGridHeight();this.callParent(arguments)},syncRowsToHeight:function(f){var a=this,n=a.getBufferSize(),l=a.infinite,h=a.getItemCount(),j=a.rowHeight,i=!j,d=a.renderInfo,k=d&&d.indexBottom,e=a.store.getCount(),m=a.getMaxHeight()||a.getVisibleHeight(),c,g,b;if(i){if(!h){a.setItemCount(1)}g=a.dataItems[0];g.$height=null;a.rowHeight=j=a.measureItem(g);if(!h){g.destroy();a.dataItems.length=0;a.setItemCount(0)}}if(l){b=Math.ceil(m/j)+n;b=Math.min(b,e)}else {b=e}a.setItemCount(b);if(a.listView||i&&a.store.isVirtualStore||h!==b||e<k){if(l){c=Math.min(e-b,d.indexTop);c=Math.max(0,c);if(c===a.getTopRenderedIndex()){a.updateTopRenderedIndex(c)}else {a.setTopRenderedIndex(c)}}if(i){a.refreshGrouping()}f=f!==!1;if(f&&e<k){d.top=d.indexTop*a.rowHeight}}if(f){a.syncRows()}},setGridHeightFromStore:function(a){this.setGridHeight(a)},setGridHeight:function(c){var a=this,h=a.rowHeight,b,c=c||a.getStore(),k=a.getHeight(),i=a.getItemCount(),j=a.getMinHeight(),d=this.getExtraGridHeight();if(Ext.isEmpty(j)){a.setMinHeight(h+d)}if(c&&c.getData()){b=c.getData().length}if(!b){b=i}if(!a.responsiveFillHeight){if(b===0){b=1}var e=h*b+d;if(e!==k&&e>0){a.setHeight(e)}}else {a.setHeight('100%')}if(a.config.maxHeight){var g=ABP.util.String.parseInt(a.config.maxHeight),f=a.getMaxHeight();if(Ext.isEmpty(f)&&f!==g){a.setMaxHeight(g+d)}}},getExtraGridHeight:function(){var a=this,f=a.el.getPadding('tb'),g=a.el.getMargin('tb'),e=a.getRowLines()?1:0,b;if(a.listView){var c=a.getTitleBar();b=c?c.el.getHeight():0}else {var d=a.getHeaderContainer();b=d?d.el.getHeight():0}return b+f+g+e}}});Ext.define('ABPControlSet.view.grid.cell.ButtonCell',{extend:'Ext.grid.cell.Widget',xtype:'abpbuttoncell',cls:'abp-forms-button-cell',config:{widgetClasses:'x-icon-el x-font-icon',iconCls:null,text:null,fieldLabel:null,disabled:null,hidden:null,parentColumn:null},constructor:function(b){var c=b.column?b.column.config:null;var a=b.parentColumn;if(c){b.widget={xtype:'abpbutton',cls:'grid-row-tools abp-forms-row-button abp-list-view-trigger',automationCls:'list-view-trigger-'+c.listPriority,iconCls:a&&a.iconCls?a.iconCls:null,text:a&&a.label?a.label:'',iconAlign:'top',disabled:a?a.disabled:!1,hidden:a?a.hidden:!1}}this.callParent([b])},setValue:function(b){var a=this.getWidget();if(!Ext.isEmpty(a)){a.setValue(b)}this.callParent(b)},setIconCls:function(b){var a=this.getWidget();if(!Ext.isEmpty(a)){a.setIconCls(b)}},setFieldLabel:function(b){var a=this.getWidget();if(!Ext.isEmpty(a)){a.setText(b)}}});Ext.define('ABPControlSet.view.grid.cell.IconCell',{extend:'Ext.grid.cell.Widget',xtype:'abpiconcell',cls:'abp-forms-icon-cell',config:{widgetClasses:'x-icon-el x-font-icon',foregroundColor:null},constructor:function(a){var b=a.column?a.column.config:null;if(b){a.widget={xtype:'abpicon',cls:a.widgetClasses?a.widgetClasses:widgetClasses,automationCls:'list-view-icon-'+b.listPriority}}this.callParent([a])},setValue:function(b){var a=this.getWidget();if(!Ext.isEmpty(a)){a.setValue(b)}this.callParent(null)}});Ext.define('ABPControlSet.view.grid.cell.ImageCell',{extend:'Ext.grid.cell.Cell',xtype:'abpimagecell',encodeHtml:!1,config:{placeholder:null},statics:{onImageLoad:function(a){a.parentNode.firstChild.style.display='none';var b=a.parentNode&&a.parentNode.parentNode?a.parentNode.parentNode.parentNode:null;if(b){b.parentElement.classList.add('loaded');var c=Math.max(50,b.parentElement.offsetHeight,b.parentElement.offsetWidth);a.style.maxHeight=c+'px';a.style.maxWidth=c+'px'}a.style.display='block'},onImageError:function(a){var b=a.parentNode&&a.parentNode.parentNode?a.parentNode.parentNode.parentNode:null;if(b){b.parentElement.classList.remove('loaded')}}},updatePlaceholder:function(a,c){var d=this;if(!Ext.isEmpty(a)&&a!==c){var b=d.element.down('.img-placeholder');if(b){b.el.dom.innerText=a}}},constructor:function(a){a=a||{};Ext.apply(a,{renderer:function(g,f,i,c){if(f&&c.config){var h=c.lookupViewModel();var b=c.config.bind?c.config.bind.placeholder:null;if(b&&b.indexOf('{')===0){b=b.substr(1).slice(0,-1)}if(b){d=h.get(b)}}var e='';if(c.cropStyle){e='cropped'}var d=d||(c.getPlaceholder()||'');return '<div class="'+e+'">'+'<div class="img-placeholder">'+d+'</div>'+'<img style="display:none;" onload="ABPControlSet.view.grid.cell.ImageCell.onImageLoad(arguments[0].srcElement);" onerror="ABPControlSet.view.grid.cell.ImageCell.onImageError(arguments[0].srcElement)" src="'+g+'">'+'</div>'}});this.callParent([a])}});Ext.define('ABPControlSet.view.grid.cell.TextCell',{extend:'Ext.grid.cell.Cell',xtype:'abptextcell',encodeHtml:!1,config:{foregroundColor:null},updateForegroundColor:function(a){this.el.setStyle('color',a)}});Ext.define('ABPControlSet.view.panel.Panel',{extend:'Ext.field.Panel',xtype:'abppanel',requires:['ABPControlSet.base.mixin.Panel'],border:!0,mixins:['ABPControlSet.base.mixin.Panel'],config:{readOnly:null},constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},updateReadOnly:function(a){this.getFields(!1).forEach(function(b){if(b.setReadOnly){b.setReadOnly(a)}});return this}});Ext.define('ABPControlSet.view.panel.TabPanel',{extend:'Ext.tab.Panel',xtype:'abptabpanel',requires:['ABPControlSet.base.mixin.TabPanel'],mixins:['ABPControlSet.base.mixin.TabPanel'],tabBar:{scrollable:'horizontal'},constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.tab.Tab',{extend:'Ext.tab.Tab',xtype:'abptab',requires:['ABPControlSet.base.mixin.Button'],mixins:['ABPControlSet.base.mixin.Button'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.visual.Separator',{extend:'Ext.menu.Separator',xtype:'abpseparator',cls:'abp-horizontal-separator',requires:['ABPControlSet.base.mixin.Separator'],mixins:['ABPControlSet.base.mixin.Separator'],afterRender:Ext.EmptyFn,constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},setForegroundColor:function(a){if(this.bodyElement){this.bodyElement.setStyle('border-color',a)}}});Ext.define('ABPControlSet.store.AGGrid',{extend:'Ext.data.Store',autoLoad:!1,processingAG:!1,processingExt:!1,config:{gridApi:null,columnApi:null},updateColumnApi:function(a){var c=this,b=[];if(a){b=c.transformColumnDefs(a.getAllColumns())}c.setFields(b)},updateGridApi:function(a){var b=this;if(a&&a.rowModel&&a.rowModel.getType().toLowerCase()=='inmemory'){a.addEventListener('modelUpdated',b.__syncData.bind(b));b.__syncData()}},listeners:{add:'extAdd',remove:'extRemove',update:'extUpdate'},transformColumnDefs:function(a){a=a||[];var d=[],b,e=a.length;for(var c;c<e;c++){b=a[c]?a[c].colDef:null;if(b){d.push({type:'string',fieldName:b['headerName'],name:b['field']})}}return d},__syncData:function(){var a=this,c=[],b=a.getGridApi();if(b&&!a.processingExt){a.processingAG=!0;b.forEachNodeAfterFilterAndSort(function(a){if(a.data){c.push(a.data)}});a.loadData(c);a.processingAG=!1}},extAdd:function(g,d,f,e){var a=this,c=a.getGridApi(),b={add:null};if(c&&!a.processingAG){a.processingExt=!0;b.add=d.map(function(a){return a.data});a.gridApi.updateRowData(b);a.processingExt=!1}},extRemove:function(h,d,g,e,f){var a=this,c=a.getGridApi(),b={remove:null};if(c&&!a.processingAG){b.remove=d.map(function(a){return a.data});a.processingExt=!0;a.gridApi.updateRowData(b);a.processingExt=!1}},extUpdate:function(i,c,f,e,g,h){var a=this,d=a.getGridApi(),b=c;if(d&&!a.processingAG){b=c.getData();a.processingExt=!0;a.gridApi.updateRowData({update:[b]});a.processingExt=!1}}});Ext.define('ABPControlSet.store.BufferedAGGrid',{extend:'ABPControlSet.store.AGGrid',requires:['ABPControlSet.store.AGGrid'],updateGridApi:function(a){this.callParent(arguments)}});Ext.define('ABPControlSet.store.ListViewTemplates',{extend:'Ext.data.Store',data:[{display:'Tri Image',value:'triImage'},{display:'Tri Data',value:'triData'},{display:'Duo Image',value:'duoImage'},{display:'Phone Number Display',value:'phoneNumberDisplay'},{display:'Phone Number Display In Form',value:'phoneNumberDisplayInForm'},{display:'Email Display',value:'emailDisplay'},{display:'Single Line Item',value:'singleLineItem'},{display:'Single Line Item with Trigger',value:'singleLineItemWithTrigger'},{display:'Two Line Item',value:'twoLineItem'},{display:'Two Line Item With Trigger',value:'twoLineItemWithTrigger'},{display:'Three Line Item',value:'threeLineItem'},{display:'Three Line Item With Trigger',value:'threeLineItemWithTrigger'},{display:'Header Line Item With Three Fields',value:'headerLineItemWithThreeFields'},{display:'Two Line Phone or Email',value:'twoLineItemWithPhoneOrEmail'}]});Ext.define('ABPControlSet.Initialize',{singleton:!0,requires:['ABPControlSet.base.view.*','ABPControlSet.base.mixin.*','ABPControlSet.mixin.*','ABPControlSet.layout.*','ABPControlSet.view.*','ABPControlSet.store.*']});Ext.define('ABPControlSet.common.Common',{singleton:!0,config:{iconStore:null},iconPrefix:'icon-',iconRe:/(?:^|\s)pickericon-(\S*)(?:\s|$)/,getComponentFromElement:function(a){var c=Ext.Viewport,b;if(a){c=null;while(c===null){b=Ext.getCmp(a.id);if(b instanceof Ext.Widget||b instanceof Ext.Component){c=b}else {a=a.offsetParent;if(!a){break}}}}return c},getIconStore:function(){var a=this.callParent(arguments);if(!a){var e=this,d=new RegExp('^\\.('+e.iconPrefix+'.*)::before$'),b=null;var c=[];Ext.iterate(Ext.util.CSS.getRules(),function(e,a){b=d.exec(a.selectorText);if(b){c.push({icon:b[1]})}});a=new Ext.data.Store({data:c});this.setIconStore(a)}return a}});Ext.define('ABPControlSet.common.types.AssociatedDataRoot',{rootPropName:'',decode:!1,matchProp:'',componentMatchProp:'',assoc:{}});Ext.define('ABPControlSet.common.types.Engine',{requires:['ABPControlSet.common.types.AssociatedDataRoot'],appId:null,sort:null,decode:!1,responsive:!0,generateModel:!1,modelFieldPropName:null,modelIdentifierPropName:null,flat:!0,rootComponentPropName:'.',associatedDataRoots:[],parentPropName:'',matchChildWithName:'',ownerPropName:'',childrenProps:[],originalDataPropName:'',assoc:{},advancedAssoc:{},xtypes:{},defaults:{},interactionsProp:null,interactionAssoc:null,interactionChildrenProps:null,interactionsSort:null,constructor:function(a){a=a||{};this.callParent(arguments);Ext.apply(this,a)}});Ext.define('ABPControlSet.common.FormEngine',{requires:['ABPControlSet.view.*','ABPControlSet.layout.*','ABPControlSet.common.types.*'],engine:null,__currentItems:null,processItem:Ext.emptyFn,processInteraction:Ext.emptyFn,processItemField:Ext.emptyFn,processAssociatedItem:Ext.emptyFn,processResult:function(a,b){return a},preProcessReference:function(a){return a},processAssociatedItemData:Ext.emptyFn,constructor:function(a){a=a||{};this.engine=a.engine||this.engine||{};this.callParent(arguments);if(!(this.engine instanceof ABPControlSet.common.types.Engine)){this.engine=new ABPControlSet.common.types.Engine(this.engine)}},processJson:function(c,r,n){var t=Ext.clone(this.engine);if(Ext.isString(c)){c=Ext.decode(c)}if(Ext.isObject(n)){Ext.apply(this.engine,n)}var a=this.engine,f;if(!a.rootComponentPropName||a.rootComponentPropName==='.'){f=c}else {f=this.findRoot(a.rootComponentPropName,c)}if(a.decode){f=Ext.decode(f)}var h=this.process(f),u=Ext.isArray(h)?[]:h.fields,q=Ext.isArray(h)?h:h.items;var m=a.associatedDataRoots,e,g,v=m.length,k=0,i='dynamic_',l=a.modelIdentifierPropName,b,j;if(a.generateModel&&l){b=this.getPropValue(c,l);if(b&&Ext.ClassManager.isCreated(i+b)){j=Ext.create(i+b);a.generateModel=!1}}for(;k<v;k++){e=m[k];if(e.rootPropName){g=this.findRoot(e.rootPropName,c);if(e.decode){try{var s=Ext.decode(g);g=s}catch(w){}}if(g){this.processDataAssociation(g,e,q)}}}var d;if(a.interactionsProp){var o=this.findRoot(a.interactionsProp,c);if(o){d=this.processInteractions(o)}}if(a.generateModel&&!j){b=b||Ext.id();Ext.define(i+b,{extend:'Ext.data.Model',fields:u||[]});j=Ext.create(i+b)}delete this.__currentItems;var p=this.processResult(q,j,d?Ext.isArray(d)?d:d.items||[d]:null);Ext.apply(this.engine,t);if(Ext.isFunction(r)){r(p)}else {return p}},processDataForForm:function(h,i){var e=this.engine;if(e.flat){var d=e.associatedDataRoots,a,b,g=d.length,c=0;for(;c<g;c++){a=d[c];if(a.rootPropName){b=this.findRoot(a.rootPropName,i);if(a.decode){try{var f=Ext.decode(b);b=f}catch(j){}}if(b){this.processDataAssociationForForm(b,a,h)}}}}else {}},process:function(e,q,g,p){var b;var c=this.engine;g=g||[];if(Ext.isArray(e)){if(Ext.isFunction(this.engine.sort)){e=Ext.Array.sort(e,this.engine.sort)}var i=[];var k=e.length;for(var d=0;d<k;d++){b=this.process(e[d],i,g,p)||null;if(Ext.isObject(b)&&b.items){i=i.concat(b.items)}else {if(Ext.isArray(b)){i=i.concat(b)}}}return {items:i,fields:g}}else {if(Ext.isObject(e)){q=q||[];g=g||[];b=this.associateData(e,c.assoc,p);if(!c.flat){var l=c.childrenProps||[];var h;var k=l.length;var f=[];for(var d=0;d<k;d++){h=e[l[d]];if(Ext.isArray(h)&&h.length){var a=this.process(h,null,g,l[d]);if(Ext.isObject(a)&&a.items){f=f.concat(a.items)}else {if(Ext.isArray(a)){f=f.concat(a)}}}else {if(Ext.isObject(h)){for(var r in h){var a=this.process(h[r],null,g,l[d]);if(Ext.isObject(a)&&a.items){f=f.concat(a.items)}else {if(Ext.isArray(a)){f=f.concat(a)}}}}}}if(f.length>0){b.items=f}}}}var a=[],m=this.processItem(b,b[c.originalDataPropName]);if(m===!1){b=null;a=[]}else {if(Ext.isObject(m)){var s=m.before||[],t=m.after||[];a=a.concat(s);if(!Ext.isEmpty(b.xtype)){a=a.concat([b])}a=a.concat(t)}else {a=[b]}}if(c.generateModel){var j,k=a.length,n,o;for(var d=0;d<k;d++){j=a[d];n=this.processItemField(j,j[c.originalDataPropName]);o=j[c.originalDataPropName]?j[c.originalDataPropName][c.modelFieldPropName]:null;if(n!==!1&&!Ext.isEmpty(o)){g.push(Ext.isObject(n)?n:{name:o})}}}if(b&&c.flat){this.__currentItems=this.__currentItems||{};this.__currentItems[b[c.matchChildWithName]]=b;if(!Ext.isEmpty(e[c.parentPropName])){this.addToParent(a,e[c.parentPropName]);return}else {if(!Ext.isEmpty(e[c.ownerPropName])){this.addToParent(a,e[c.ownerPropName]);return}}}if(Ext.isObject(a)){return a}else {return {items:a,fields:g}}},processInteractions:function(e,k){var a;var i=this.engine;if(Ext.isArray(e)){if(Ext.isFunction(this.engine.interactionsSort)){e=Ext.Array.sort(e,this.engine.interactionsSort)}var g=[];var j=e.length;for(var d=0;d<j;d++){a=this.processInteractions(e[d],k)||null;if(Ext.isObject(a)&&a.items){g=g.concat(a.items)}else {if(Ext.isArray(a)){g=g.concat(a)}}}return {items:g}}else {if(Ext.isObject(e)){a=this.associateData(e,i.interactionAssoc,k);a.appId=a.appId||i.appId;var h=i.interactionChildrenProps||[];var f;var j=h.length;var c=[];for(var d=0;d<j;d++){f=e[h[d]];if(Ext.isArray(f)&&f.length){var b=this.processInteractions(f,h[d]);if(Ext.isObject(b)&&b.items){c=c.concat(b.items)}else {if(Ext.isArray(b)){c=c.concat(b)}}}else {if(Ext.isObject(f)){for(var l in f){var b=this.processInteractions(f[l],h[d]);if(Ext.isObject(b)&&b.items){c=c.concat(b.items)}else {if(Ext.isArray(b)){c=c.concat(b)}}}}}}if(c.length>0){a.items=c}}}this.processInteraction(a,a[i.originalDataPropName]);return {items:[a]}},associateData:function(j,s,q){var l=this,b={},a=l.engine,d={},h=a.defaults,f=a.advancedAssoc,i=a.xtypes,g='xtype';Ext.apply(d,s);if(a.originalDataPropName){b[a.originalDataPropName]=j}function processXtype(c){var a=l.getPropValue(j,c);if(i[c]&&i[c][a]){b[g]=i[c][a]}else {if(i[a]){b[g]=i[a]}}if(f[c]&&f[c][a]){Ext.apply(d,f[c][a])}else {if(f[a]){Ext.apply(d,f[a])}}if(c&&h[c]&&h[c][a]){Ext.applyIf(b,Ext.clone(h[c][a]))}else {if(a&&h[a]){Ext.applyIf(b,Ext.clone(h[a]))}}return c}if(g in d){var e=d[g];if(Ext.isArray(e)){var n=e.length,p;for(var c=0;c<n;c++){p=l.getPropValue(j,e[c]);if(!Ext.isEmpty(p)){processXtype(e[c]);break}}}else {if(Ext.isString(e)){processXtype(e)}}}var k,m;for(var o in d){if(o===g){continue}else {m=d[o];if(m.indexOf('+')!==-1){var r=m.split('+');var n=r.length;k='';for(var c=0;c<n;c++){k+=l.getPropValue(j,r[c])||''}}else {k=l.getPropValue(j,m)}if(k!==undefined){b[o]=k}}}if(a.defaults['childrenProps']&&a.defaults['childrenProps'][q]){Ext.applyIf(b,Ext.clone(a.defaults['childrenProps'][q]))}return b},getPropValue:function(e,d){var b=d.split('.'),f=b.length;if(b.length>1){var a=e;for(var c=0;c<f;c++){a=this.doGet(a,b[c]);if(a==undefined){break}}return a}else {return this.doGet(e,d)}},doGet:function(b,a){var c=b[a];if(Ext.String.startsWith(a,'!')){a=a.substring(1,a.length);if(Ext.String.startsWith(a,'^')){a=a.substring(1,a.length);c=b[a]!=undefined?(b[a]+''||'').toLowerCase():undefined}else {c=b[a]!=undefined?!b[a]:undefined}}else {if(Ext.String.startsWith(a,'^')){a=a.substring(1,a.length);c=b[a]!=undefined?(b[a]+''||'').toUpperCase():undefined}}return c},processDataAssociation:function(a,b,d){if(Ext.isArray(a)){var f=a.length;for(var c=0;c<f;c++){this.processDataAssociation(a[c],b,d)||null}}else {if(Ext.isObject(a)){var g=this.associateData(a,b.assoc,this.engine);var e=this.findItem(d,b.componentMatchProp,a[b.matchProp]);this.processAssociatedItem(e,a,g,b.rootPropName)}}},processDataAssociationForForm:function(a,b,c){if(Ext.isArray(a)){var f=a.length;for(var d=0;d<f;d++){this.processDataAssociationForForm(a[d],b,c)||null}}else {if(Ext.isObject(a)){var g=this.associateData(a,b.assoc,this.engine);var e=c;if(Ext.isString(a[b.matchProp])){e=this.findItemOnForm(c,b.componentMatchProp,a[b.matchProp])}this.processAssociatedItemData(e,a,g,b.rootPropName)}}},addToParent:function(d,c){var e=this,b=e.__currentItems||{},a=b[c];if(a){a.items=a.items||[];a.items=a.items.concat(d)}},convertObjectsToArray:function(a,e){var c;for(var b in a){if(Ext.isObject(a[b])){var f=e.objectToArrayNames.length;c=null;for(var d=0;d<f;d++){if(e.objectToArrayNames[d].prop===b){c=e.objectToArrayNames[d];break}}if(c){if(Ext.isArray(a[c.newProp])){a[c.newProp]=a[c.newProp].concat(this.objectToArray(a[b],e))}else {a[c.newProp]=this.objectToArray(a[b],e)}if(c.newProp!==b){delete a[b]}}}else {if(Ext.isArray(a[b])){var f=a[b].length;for(var d=0;d<f;d++){this.convertObjectsToArray(a[b][d])}}}}return a},objectToArray:function(a,d){var c=[];for(var b in a){this.convertObjectsToArray(a[b],d);a[b][d.objectToPropName]=b;c.push(a[b])}return c},findRoot:function(d,a){for(var b in a){if(b===d){return a[b]}else {if(Ext.isObject(a[b])){var c=this.findRoot(d,a[b]);if(c){return c}}}}},findItem:function(b,c,d){var a=0,f=b.length;for(;a<f;a++){if(b[a][this.engine.originalDataPropName]&&b[a][this.engine.originalDataPropName][c]===d){return b[a]}else {if(Ext.isArray(b[a].items)){var e=this.findItem(b[a].items,c,d);if(e){return e}}}}},findItemOnForm:function(c,e,b){var a=this.findAssociatedPropMap(e);if(a){if(a==='reference'){var d=this.preProcessReference(b);if(d){return c.lookup(d)}}else {return c.down('['+a+'='+b+']')}}else {return c.down('['+e+'='+b+']')}},findAssociatedPropMap:function(b){if(Ext.isString(b)){var d=this.engine;var a=d.assoc;if(a){for(var c in a){if(a[c]===b){return c}}}}}});