var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.Symbol=function(){var a=0;function Symbol(b){return $jscomp.SYMBOL_PREFIX+(b||'')+a++}return Symbol}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var d=[];var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;while(!(h=b.next()).done){d.push(c.call(g,h.value))}}else {var i=b.length;for(var e=0;e<i;e++){d.push(c.call(g,b[e]))}}return d};return b},'es6','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,e){var b=this;if(b instanceof String){b=String(b)}var f=b.length;for(var c=e||0;c<f;c++){if(b[c]==d||Object.is(b[c],d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es6','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];delete b[a];try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a|'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){b[a].call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};function resolvingPromise(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}}a['resolve']=resolvingPromise;a['reject']=function(b){return new a(function(d,a){a(b)})};a['race']=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var a=d.next();!a.done;a=d.next()){resolvingPromise(a.value).callWhenSettled_(e,f)}})};a['all']=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return resolvingPromise([])}else {return new a(function(g,h){var a=[];var f=0;function onFulfilled(b){return function(d){a[b]=d;f--;if(f==0){g(a)}}}do{a.push(undefined);f++;resolvingPromise(b.value).callWhenSettled_(onFulfilled(a.length-1),h);b=d.next()}while(!b.done)})}};return a},'es6','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.polyfill('Map',function(b){var g=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(j){return !1}}();if(g){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(e,d){var a=c(this,e);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:d};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=d}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=i(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var h=0;var i=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++h;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(c,d,h){c=Number(c);d=Number(d);var b,g,f;var e=Math.max(Math.abs(c),Math.abs(d));for(b=2;b<arguments.length;b++){e=Math.max(e,Math.abs(arguments[b]))}if(e>1.0E100||e<1.0E-100){c=c/e;d=d/e;f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/e;f+=g*g}return Math.sqrt(f)*e}else {f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(e,f){for(var d=1;d<arguments.length;d++){var b=arguments[d];if(!b){continue}for(var c in b){if($jscomp.owns(b,c)){e[c]=b[c]}}}return e};return b},'es6','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0};var a={};try{a.__proto__=b;return a.a}catch(c){}return !1};$jscomp.setPrototypeOf=typeof Object.setPrototypeOf=='function'?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a}:null;$jscomp.polyfill('Object.setPrototypeOf',function(a){return a||$jscomp.setPrototypeOf},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=='function'?Object.create:function(b){var a=function(){};a.prototype=b;return new a()};$jscomp.construct=function(){function reflectConstructWorks(){function Base(){}function Derived(){}new Base();Reflect.construct(Base,[],Derived);return new Base() instanceof Base}if(typeof Reflect!='undefined'&&Reflect.construct){if(reflectConstructWorks()){return Reflect.construct}var b=Reflect.construct;var a=function(e,d,a){var c=b(e,d);if(a){Reflect.setPrototypeOf(c,a.prototype)}return c};return a}function construct(b,d,a){if(a===undefined){a=b}var f=a.prototype||Object.prototype;var c=$jscomp.objectCreate(f);var e=Function.prototype.apply;var g=e.call(b,c,d);return g||c}return construct}();$jscomp.polyfill('Reflect.construct',function(a){return $jscomp.construct},'es6','es3');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if($jscomp.ASSUME_ES5||typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(!($jscomp.ASSUME_ES5||typeof Object.preventExtensions=='function')){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}else {if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;var c=function(c,d){try{b(c,d);return !0}catch(e){return !1}};return c}else {return null}}},'es6','es5');$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,b)}else {for(var c in b){if(c=='prototype'){continue}if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}}a.superClass_=b.prototype};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new b([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}Ext.define('ABP.button.Button',{override:'Ext.button.Button',initComponent:function(){this.__configureClassNames();this.callParent()},privates:{__configureClassNames:function(d){var a=this.iconCls&&this.iconCls.length>0?!0:!1;var c=this.text&&this.text.length>0?!0:!1;var b=this.menu?!0:!1;if(a){this.addCls('icon')}if(c){this.addCls('text')}if(b){this.addCls('menu')}}}});Ext.define('Overrides.form.Labelable',{override:'Ext.form.Labelable',labelSeparator:''});Ext.define('Overrides.form.field.Base',{override:'Ext.form.field.Base',labelSeparator:''});Ext.define('Overrides.layout.component.field.FieldContainer',{override:'Ext.layout.component.field.FieldContainer',privates:{getWidthAdjustment:function(){var a=this.owner,b=0;if(a.labelAlign!=='top'&&a.hasVisibleLabel()){var c=Ext.isNumber(a.labelWidth)?a.labelWidth:a.labelEl?a.labelEl.getWidth():0;b+=c+(a.labelPad||0)}if(a.msgTarget==='side'&&a.hasActiveError()){b+=a.errorWrapEl.getWidth()}return b+a.bodyEl.getPadding('lr')}}});Ext.define('Overrides.form.FieldContainer',{override:'Ext.form.FieldContainer',labelSeparator:''});Ext.define('Overrides.form.Label',{override:'Ext.form.Label',labelSeparator:''});Ext.define('Overrides.form.field.Number',{override:'Ext.form.field.Number',allowThousandSeparator:!1,thousandSeparator:null,initComponent:function(){var a=this;if(a.allowThousandSeparator){a.thousandSeparator=a.thousandSeparator?a.thousandSeparator:Ext.util.Format.thousandSeparator}if(!a.fieldFormatter){a.mon(a,'focus',a._onFocus,a)}a.callParent()},parseValue:function(a){var b=this;if(b.allowThousandSeparator){a=String(a).replace(new RegExp('\\'+b.thousandSeparator,'g'),'')}a=parseFloat(String(a).replace(b.decimalSeparator,'.'));return isNaN(a)?null:a},valueToRaw:function(a){var b=this;if(b.allowThousandSeparator&&!b.fieldFormatter){var c=b.decimalSeparator,e=b.thousandSeparator;a=b.fixPrecision(a);a=Ext.isNumber(a)?a:parseFloat(String(a).replace(c,'.'));a=isNaN(a)?'':String(a).replace('.',c);if(b.thousandSeparator){var d=/(\d+)(\d{3})/,a=String(a).replace(/^\d+/,function(b){while(d.test(b)){b=b.replace(d,'$1'+e+'$2')}return b})}return a}else {var b=this,c=b.decimalSeparator;a=b.parseValue(a);a=b.fixPrecision(a);a=Ext.isNumber(a)?a:parseFloat(String(a).replace(c,'.'));a=isNaN(a)?'':String(a).replace('.',c);return a}},getErrors:function(b){b=arguments.length>0?b:this.processRawValue(this.getRawValue());var a=this,c=a.callSuper([b]),e=Ext.String.format,d;if(b.length<1){return c}if(a.allowThousandSeparator){b=String(b).replace(new RegExp('\\'+a.thousandSeparator,'g'),'')}b=String(b).replace(a.decimalSeparator,'.');if(isNaN(b)){c.push(e(a.nanText,b))}d=a.parseValue(b);if(a.minValue===0&&d<0){c.push(this.negativeText)}else {if(d<a.minValue){c.push(e(a.minText,a.minValue))}}if(d>a.maxValue){c.push(e(a.maxText,a.maxValue))}return c},_onFocus:function(){var a=this;if(a.readOnly){return}var b=a.getRawValue();if(a.allowThousandSeparator){b=String(b).replace(new RegExp('\\'+a.thousandSeparator,'g'),'').trim()}a.setRawValue(Ext.isEmpty(b)?null:b)}});Ext.define('Overrides.menu.Menu',{override:'Ext.menu.Menu',beforeRender:function(){this.callParent(arguments);this.__addIconClass()},privates:{__addIconClass:function(){var b=!1,c=this.items.items,a=0,e=c.length;for(a;a<e;a++){var d=c[a];if(d.iconCls||d.hasOwnProperty('checked')){b=!0;a=e}}if(!b){this.addCls('no-icons')}}}});Ext.define('ABPControlSet.base.view.contextmenu.plugin.ContextMenu',{extend:'Ext.plugin.Abstract',id:'abpcontextmenu',alias:'plugin.abpcontextmenu',cachedConfig:{contextMenu:1},applyContextMenu:function(a){a=Ext.widget({padding:0,relative:!0,xtype:'menu',floating:!0,header:!1,layout:'fit',items:[{xtype:'abpcontextmenu',listeners:{itemclick:this.onItemClick,scope:this},store:{type:'tree',rootVisible:!0,root:{}}}]});return a},constructor:function(a){a=a||{};this.callParent([a])},onItemClick:function(c,g){var b=c.getCurrentCmp?c.getCurrentCmp():null;var a=g.node;var d=c.getCurrentContext();if(b){var f=this.getContextMenu();b.fireEvent(ABPControlSet.common.types.Events.ContextMenuItemClick,b,d,a,a.get('checkbox')?!!a.get('checked'):null);var e=a.get('handler');if(Ext.isFunction(e)){e(b,d,a,a.get('checkbox')?!!a.get('checked'):null)}if(!a.get('checkbox')&&a.get('leaf')){f.hide()}}},init:function(a){if(Ext.toolkit==='classic'){var b=a.element?a.element:a.el;if(b){b.on({contextmenu:{fn:this.onContextMenu,scope:this}})}else {a.on({el:{contextmenu:{fn:this.onContextMenu,scope:this}}})}}else {a.on({contextmenu:{element:'element',preventDefault:!0,fn:this.onContextMenu,scope:this}})}},onContextMenu:function(a,g){var e=this.getContextMenu(),d=e?e.down('abpcontextmenu'):null;if(d){var h=d.getStore(),c=h.getRoot();if(c){c.removeAll();var b=this.cmp;if(b&&b.fireEvent){var f=b.getContextMenuData?b.getContextMenuData(a,g):{};d.setCurrentCmp(b);d.setCurrentContext(f);if(b.fireEvent(ABPControlSet.common.types.Events.ContextMenu,c,this.cmp,f,g,a)!==!1){if(c&&c.childNodes&&c.childNodes.length>0){if(a&&a.stopEvent){a.stopEvent()}if(Ext.toolkit==='modern'){e.showBy(b,'t-b')}else {e.showAt(a.pageX,a.pageY)}}}}}}}});Ext.define('ABPControlSet.common.types.Events',{singleton:!0,UserChanged:'userchanged',TriggerClick:'triggerclick',TriggerFocus:'triggerfocus',ContextMenu:'contextshow',ContextMenuItemClick:'contextmenuitemclick',ImageLongPress:'longpress',ImageClick:'click',ImageDoubleClick:'doubletap',RadioGroupFocus:'radiogroupfocus',AGGridRemove:'aggridremove',AGGridAdd:'aggridadd',AGGridUpdate:'aggridupdate'});Ext.define('ABPControlSet.base.view.field.plugin.Field',{extend:'Ext.plugin.Abstract',requires:['ABPControlSet.common.types.Events'],alias:'plugin.abpfield',focusValue:null,init:function(a){a.labelPad=a.labelAlign==='top'?5:14;if(a.xtype==='abpcheckbox'||a.xtype==='abpradiogroup'){return}else {var b={focus:this.userChangedFocus,blur:this.userChangedBlur,select:this.userChangedSelect,scope:this};a.userTyping=!1;this.registerInputListener(b,this.userInputFormat);a.on(b)}},registerInputListener:Ext.emptyFn,userInputFormat:function(d){var a=this.cmp;a.userTyping=!0;var b=a.getFieldFormatter();var c=a.getFieldFormat();if(Ext.isFunction(b)&&!a.getReadOnly()&&!a.getDisabled()){a.setFieldFormattedValue(b,c,!0)}},userChangedFocus:function(a,g){var j=this,c=a.getFieldFormatter(),h=a.getFieldFormat();if(Ext.isFunction(c)){a.setFieldFormattedValue(c,h,!0)}if(a instanceof Ext.form.field.ComboBox&&g){var d=g.relatedTarget;var f=d?Ext.fly(d):null;var b=f?f.component:null;var i=b?Ext.toolkit==='classic'?b instanceof Ext.view.BoundList:!1:!1;if(i){var e=b.ownerCmp;if(e&&e.id===a.id){return}}}j.focusValue=a.getValue()},userChangedBlur:function(a){var c=this;var b=a.getValue();a.userTyping=!1;if(Ext.valueFrom(b,null)==null&&Ext.valueFrom(c.focusValue,null)==null){return}if(!a.isEqual(b,c.focusValue)){a.__flushValueViewModel();a.fireEvent(ABPControlSet.common.types.Events.UserChanged,a,b,c.focusValue);c.focusValue=b}var d=a.getFieldFormatter();var e=a.getFieldFormat();if(Ext.isFunction(d)){a.setFieldFormattedValue(d,e,!1)}},userChangedSelect:function(a,e){var c=this;var b=a.getValue();if(Ext.valueFrom(b,null)==null&&Ext.valueFrom(a,c.focusValue,null)==null){return}if(!a.isEqual(b,c.focusValue)){var d=c.focusValue;c.focusValue=b;a.__inUserChangedHandler=!0;a.__flushValueViewModel();a.fireEvent(ABPControlSet.common.types.Events.UserChanged,a,b,d);delete a.__inUserChangedHandler}}});Ext.define('ABPControlSet.view.field.plugin.Field',{override:'ABPControlSet.base.view.field.plugin.Field',registerInputListener:function(a,b){Ext.apply(a,{inputEl:{keyup:b,scope:this}});return a}});Ext.define('ABPControlSet.base.view.field.plugin.LinkedLabel',{extend:'Ext.plugin.Abstract',alias:'plugin.abplinkedlabel',init:function(a){var e=a.inputId=a.inputId||Ext.id();var g=this.getLabelableRenderData(a);a.__hideLabel=a.hideLabel;a.__linkedLabel=Ext.widget({forId:e,xtype:'abplabel',required:Ext.isBoolean(a.required)?a.required:Ext.isBoolean(a.allowBlank)?!a.allowBlank:undefined,disabled:a.disabled,hidden:a.hidden===!0?!0:a.hideLabel===!0?!0:!1,responsiveCol:(a.responsiveCol||1)-1,width:a.labelWidth,disabledCls:'x-form-item-default x-item-disabled',cls:g.labelCls+' abp-linked-label',responsiveWidth:a.labelWidth,responsiveColSpan:1,responsiveRow:a.responsiveRow,responsiveRowSpan:1,field:a});var c={};var b=a.up('container');if(!b){c.added=this.onComponentAdded}else {var d=b.items;var f=d.indexOf(a);this.insertLabel(a,b,f)}this.hookIntoFieldLabel(a);Ext.apply(c,{disable:function(b){b.__linkedLabel.disable(!0)},enable:function(b){b.__linkedLabel.enable(!0)},hide:function(b){b.__linkedLabel.hide()},show:function(b){if(!b.__hideLabel){b.__linkedLabel.show()}},beforerender:function(b){if(!b.__hideLabel&&!b.hidden){b.__linkedLabel.show()}else {b.__linkedLabel.hide()}},removed:function(b,c){c.remove(b.__linkedLabel)},destroy:function(b){Ext.destroy(b.__linkedLabel)}});a.on(c)},getLabelableRenderData:Ext.emptyFn,onComponentAdded:function(a,b,c){this.insertLabel(a,b,c)},insertLabel:function(a,b,c){b.insert((c||1)-1,a.__linkedLabel)}});Ext.define('ABPControlSet.view.field.plugin.LinkedLabel',{override:'ABPControlSet.base.view.field.plugin.LinkedLabel',hookIntoFieldLabel:function(a){a.labelSeparator=this.labelSeparator;a.renderActiveError=this.renderActiveError;a.setFieldLabel=this.setFieldLabel;a.setFieldLabel(a.fieldLabel);a.hideLabel=!0},renderActiveError:function(){var a=this,c=a.hasActiveError(),b=a.invalidCls+'-field';a.superclass.superclass.renderActiveError.apply(this);if(a.__linkedLabel){a.__linkedLabel[c?'addCls':'removeCls']([b])}},getLabelableRenderData:function(a){return a.getLabelableRenderData?a.getLabelableRenderData():{}},setFieldLabel:function(a){a=a||'';var b=this,c=b.__linkedLabel,d=b.labelSeparator;b.fieldLabel=a;c.text=a;if(!Ext.isEmpty(d)){a=b.trimLabelSeparator()+d}c.setText(a);if(b.rendered){b.updateLayout()}}});Ext.define('ABPControlSet.base.view.field.plugin.RadioGroup',{extend:'Ext.plugin.Abstract',requires:['ABPControlSet.common.types.Events'],alias:'plugin.abpradiogroup',focusValue:null,init:function(a){a.on({focusleave:this.onFocusLeave,focusenter:this.onFocusEnter,scope:this})},onFocusLeave:function(a){var c=this,b=a.getValue();if(Ext.valueFrom(b,null)==null&&Ext.valueFrom(c.focusValue,null)==null){return}if(!a.isEqual(b,c.focusValue)){a.__flushValueViewModel();a.fireEvent(ABPControlSet.common.types.Events.UserChanged,a,b,c.focusValue);c.focusValue=b}},onFocusEnter:function(a){a.fireEvent(ABPControlSet.common.types.Events.RadioGroupFocus,a);this.focusValue=a.getValue()}});Ext.define('ABPControlSet.view.field.plugin.RadioGroup',{override:'ABPControlSet.base.view.field.plugin.RadioGroup'});Ext.define('ABPControlSet.base.view.field.plugin.RelativeDateTime',{extend:'Ext.plugin.Abstract',alias:'plugin.abprelativedatetime',absoluteValue:null,relativeValue:null,maxRelativeValue:null,canBeRelative:!1,dateFormat:'jS F Y',init:function(a){if(a.xtype!=='abptime'&&a.xtype!=='abpdate'&&a.xtype!=='abpdatetime'){return}else {var c={disable:this.onFieldDisable,enable:this.onFieldEnable,writeablechange:this.onFieldWritable,change:this.onFieldValueChanged,afterrender:this.onFieldRender,scope:this};this.field=a;this.absoluteValue=a.getValue();this.maxRelativeValue=a.maxRelative?a.maxRelative.split('|'):['24','h'];this.field.relativeUpdate=a.relativeUpdate||60;a.on(c);if(a.disabled){this.onFieldDisable()}if(a.readOnly){this.onFieldWritable()}var b=this;b.updateRunner=new Ext.util.TaskRunner();b.updateTask=b.updateRunner.newTask({run:b.updateFieldRelative,interval:b.field.relativeUpdate*1000,scope:b})}},start:function(){if(this.updateTask){this.updateTask.start()}else {this.startAfterRender=!0}},stop:function(){if(this.updateTask){this.updateTask.stop()}},onFieldValueChanged:function(){this.absoluteValue=this.field.getValue();if(this.tip&&this.tip.isVisible()){this.tip.setConfig(this.getTipConfig())}if(this.field.disabled){this.onFieldDisable()}if(this.field.readOnly){this.onFieldWritable()}},onFieldRender:function(){if(this.startAfterRender){this.start();if(this.canBeRelative&&!this.tip){this.createToolTip()}}},onFieldDisable:function(){var a=this.field.getFocusEl();if(a){if(!this.savedTitle){this.savedTitle=a.dom.getAttribute('title')}a.dom.removeAttribute('title')}},onFieldEnable:function(){if(this.savedTitle&&!this.field.readOnly){var a=this.field.getFocusEl();if(a){a.dom.setAttribute('title',this.savedTitle)}}},createToolTip:function(){var b=this.field.getId(),c=this,a=this.getTipConfig();this.tip=Ext.create('Ext.tip.ToolTip',{target:b,title:a.title,minWidth:a.minWidth,html:a.html,cls:'abp-relative-tip',shadow:'drop',dismissDelay:0,listeners:{beforeshow:function(b){var a=c.getTipConfig();b.setMinWidth(a.minWidth);b.setTitle(a.title);b.setHtml(a.html)}}})},getTipConfig:function(){var a=Ext.Date.format(this.absoluteValue,this.dateFormat);var b=ABP.util.Common.actualMeasureText(a,'14px roboto');if(this.field.xtype==='abpdatetime'){var d=Ext.Date.format(this.absoluteValue,'g:i A');a='<span class="tip-date">'+a+'</span><span class="tip-time">'+d+'</span>'}var c={html:ABP.util.RelativeTime.format(this.absoluteValue,!0),title:a,minWidth:b.width+16};return c},onFieldWritable:function(){if(this.field.setValue){this.canBeRelative=this.field.readOnly;if(this.field.readOnly){this.field.addCls('abp-relative-readonly');this.fieldDisabled=this.field.getDisabled();this.field.setDisabled(!0);var a=this.field.getFocusEl();if(a&&!this.tip){this.createToolTip()}}else {this.field.removeCls('abp-relative-readonly');if(typeof this.fieldDisabled!==null){this.field.setDisabled(this.fieldDisabled)}}this.updateFieldRelative()}},checkRelativeValid:function(){var b=new Date();var a=Ext.Date.diff(this.absoluteValue,b,this.maxRelativeValue[1]);if(a>parseInt(this.maxRelativeValue[0])){return !1}return !0},updateFieldRelative:function(){var c=this.checkRelativeValid(),a=this.field.getFocusEl();if(this.field.setRawValue&&this.canBeRelative){if(c){this.relativeValue=ABP.util.RelativeTime.format(this.absoluteValue,!0)}else {this.relativeValue=Ext.Date.format(this.absoluteValue,this.dateFormat)}this.field.setRawValue(this.relativeValue);if(this.tip&&this.tip.isVisible()){var b=this.getTipConfig();this.tip.setMinWidth(b.minWidth);this.tip.setTitle(b.title);this.tip.setHtml(b.html)}if(a){if(!this.savedTitle){this.savedTitle=a.dom.getAttribute('title')}a.dom.removeAttribute('title')}this.start()}else {this.field.setValue(this.absoluteValue);if(this.savedTitle&&a){a.dom.setAttribute('title',this.savedTitle)}this.stop()}},destroy:function(){this.updateTask.destroy();this.updateRunner.destroy();this.callParent()}});Ext.define('ABPControlSet.base.view.grid.plugin.ListView',{extend:'Ext.AbstractPlugin',alias:'plugin.listview',mixins:['Ext.mixin.Observable'],showTitle:!0,autoFillMain:!0,autoFillBody:!1,allowMainDuplication:!1,allowBodyDuplication:!0,showHeaders:!1,gridId:null,config:{fullRow:null,template:null},listTemplateClsPreface:'abp-list-view-template-',cellColumnFieldsTpl:new Ext.XTemplate(['<td class="abp-list-view-cellColumn abp-list-view-cellColumn-{[values.cellColumn]}">','<tpl for="values.cellColumnPriorities">','{%','cellColumnParent=parent;','priorityIndex = xindex - 1;','%}','<table class="abp-list-view-field abp-list-view-field-{[priorityIndex + 1]}">','<tr>','<tpl if=".">','<tpl for=".">','<tpl if=".">','<tpl if="cellColumnParent.includeLabel">','<td class="abp-list-view-field-label abp-list-view-field-label-{[priorityIndex + 1]}">','{fieldLabel}','</td>','</tpl>','{%','values.listViewPlugin.renderCell(values, out, priorityIndex + xindex - 1, cellColumnParent)','%}','<tpl else>','<td class="abp-list-view-field abp-list-view-field-{[priorityIndex + 1]} abp-list-view-field-value abp-list-view-field-value-{[priorityIndex + 1]}">','</td>','</tpl>','</tpl>','</tpl>','</tr>','</table>','</tpl>','</td>',{definitions:'var priorityIndex;var cellColumnParent;',disableFormats:!0}]),namedGridAreaTpl:new Ext.XTemplate(['<tpl for=".">','{% values.listViewPlugin.renderAreaCell(values, out) %}','</tpl>']),gridcellColumnFieldsTpl:new Ext.XTemplate(['<td class="abp-list-view-cellColumn abp-list-view-cellColumn-{[values.cellColumn]} ','{[values.fillColumn === 1 ? values.fillCls : values.noFillCls]} ','abp-list-align-{[values.align]} ','abp-list-justify-{[values.justify]}" ','style="flex: {[values.flex]}">','<tpl for="values.cellColumnPriorities">','{%','cellColumnParent=parent;','priorityIndex = xindex - 1;','rowsToFill = parent.rowsToFill;','%}','<table class="abp-list-view-field abp-list-view-field-{[rowsToFill ? rowsToFill[parseInt(priorityIndex)] : priorityIndex + 1]}','">','<tr>','<tpl if=".">','<tpl for=".">','<tpl if=".">','<tpl if="cellColumnParent.includeLabel">','<td class="abp-list-view-field-label abp-list-view-field-label-{[rowsToFill ? rowsToFill[priorityIndex] : priorityIndex + 1]}">','{fieldLabel}','</td>','</tpl>','{%','values.listViewPlugin.renderCell(values, out, priorityIndex + xindex - 1, cellColumnParent)','%}','<tpl else>','<td class="abp-list-view-field abp-list-view-field-{[rowsToFill ? rowsToFill[priorityIndex] : "nio"]} abp-list-view-field-value abp-list-view-field-value-{[rowsToFill ? rowsToFill[priorityIndex + 1] : priorityIndex + 1]}">','</td>','</tpl>','</tpl>','</tpl>','</tr>','</table>','</tpl>','</td>',{definitions:'var priorityIndex;var cellColumnParent; var rowsToFill;',disableFormats:!0}]),templates:{triData:{tpl:['{%','values.listViewPlugin.renderCellColumn(1, 1, 2, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 3, 6, true, values.params, out, parent);','values.listViewPlugin.renderCellColumn(3, 7, 14, true, values.params, out, parent);','%}',{disableFormats:!0}],start:1,end:14},triImage:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 1, 2, true, values.params, out, parent);','values.listViewPlugin.renderCellColumn(3, 3, 6, true, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:6},duoImage:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 2, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:2},phoneNumberDisplay:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 1, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:1},phoneNumberDisplayInForm:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 1, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:1},emailDisplay:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 1, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:1},singleLineItem:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 1, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:1},singleLineItemWithTrigger:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 1, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 2, 2, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:2},twoLineItem:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 2, 2, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:2},twoLineItemWithTrigger:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 1, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 2, 2, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(3, 3, 3, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:3},threeLineItem:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 1, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 2, 2, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:3},threeLineItemWithTrigger:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 1, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 2, 2, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(3, 3, 3, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(4, 4, 4, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:4},headerLineItemWithThreeFields:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 1, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(2, 2, 2, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(3, 3, 3, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:4},twoLineItemWithPhoneOrEmail:{tpl:['{%','values.listViewPlugin.renderCellColumn(0, 0, 0, false, values.params, out, parent);','values.listViewPlugin.renderCellColumn(1, 1, 2, false, values.params, out, parent);','%}',{disableFormats:!0}],start:0,end:2},gridExample:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 0, false, values.params, out, parent, true);','values.listViewPlugin.renderGridCellColumn(1, 1, 2, false, values.params, out, parent, false, [1,2]);','values.listViewPlugin.renderGridCellColumn(2, 3, 3, false, values.params, out, parent, false, [1]);','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},gridExampleBottom:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 0, false, values.params, out, parent, true);','values.listViewPlugin.renderGridCellColumn(1, 1, 2, false, values.params, out, parent, false, [2,3]);','values.listViewPlugin.renderGridCellColumn(2, 3, 3, false, values.params, out, parent, false, [3]);','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},gridExampleSplit:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 0, false, values.params, out, parent, true);','values.listViewPlugin.renderGridCellColumn(1, 1, 2, false, values.params, out, parent, false, [1,3]);','values.listViewPlugin.renderGridCellColumn(2, 3, 4, false, values.params, out, parent, false, [1,3]);','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},gridExampleImageCenter:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(1, 0, 0, false, values.params, out, parent, true, null, "center");','values.listViewPlugin.renderGridCellColumn(0, 1, 2, false, values.params, out, parent, false, [1,3], "center");','values.listViewPlugin.renderGridCellColumn(2, 3, 4, false, values.params, out, parent, false, [1,3], "center");','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},gridExampleX:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 1, false, values.params, out, parent, false, [1, 3], "center", "bottom");','values.listViewPlugin.renderGridCellColumn(1, 2, 2, false, values.params, out, parent, false, [2], "center", null, 3);','values.listViewPlugin.renderGridCellColumn(2, 3, 4, false, values.params, out, parent, false, [1, 3], "center", "center");','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},gridExampleV:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 1, false, values.params, out, parent, false, [1, 2], "center", "bottom");','values.listViewPlugin.renderGridCellColumn(1, 2, 2, false, values.params, out, parent, false, [3], "center", null, 3);','values.listViewPlugin.renderGridCellColumn(2, 3, 4, false, values.params, out, parent, false, [1, 2], "center", "center");','%}',{disableFormats:!0,cssGridTemplate:!0,cols:3,rows:3}],start:0,end:2},namedAreaGrid:{tpl:['{%','values.listViewPlugin.renderNamedAreaGrid(values, out, parent);','%}',{disableFormats:!0,namedGridTemplate:!0}]},gridDefinedOneColumn:{tpl:['{%','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','%}',{disableFormats:!0,cssGridTemplate:!0}],start:0,end:0},gridDefinedTwoColumns:{tpl:['{%','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','%}',{disableFormats:!0,cssGridTemplate:!0}],start:0,end:2},gridDefinedThreeColumns:{tpl:['{%','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','%}',{disableFormats:!0,cssGridTemplate:!0}],start:0,end:2},gridDefinedFourColumns:{tpl:['{%','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','%}',{disableFormats:!0,cssGridTemplate:!0}],start:0,end:3},gridDefinedFiveColumns:{tpl:['{%','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','values.listViewPlugin.renderDefinedCellColumn(false, values.params, out, parent);','%}',{disableFormats:!0,cssGridTemplate:!0}],start:0,end:4},gridExampleFlex:{tpl:['{%','values.listViewPlugin.renderGridCellColumn(0, 0, 0, false, values.params, out, parent, true, null, "left", "bottom");','values.listViewPlugin.renderGridCellColumn(1, 1, 2, false, values.params, out, parent, false, [1,2], null, null, 3);','values.listViewPlugin.renderGridCellColumn(2, 3, 3, false, values.params, out, parent, false, [1], null, "center");','%}',{disableFormats:!0,flexGridTemplate:!0,cols:3,rows:3}],start:0,end:2}},constructor:function(a){a=a||{};a.fullRow=a.fullRow||!1;this.callParent([a]);this.mixins.observable.constructor.call(this)},init:function(c){var a=this;a.gridId=c.controlId;var b=ABP.util.LocalStorage.getForLoggedInUser(a.gridId+'listtemplate');if(b){a.setTemplate(b)}else {var d=a.getTemplate();if(!d){a.setTemplate('triData')}}a.cmp.toggleListView=a.toggleListView.bind(a);c.listViewPlugin=a},toggleListSettings:function(){var c=this,a=c.listSettings;if(a){var b=a.isVisible();a[b?'hide':'show']()}},onListNodeDrop:function(n,l){var c=this,f=c.gridId,e=c.getTemplate(),d=c.templates[e],i=d?d.end:0,h=d?d.start:0,m=l.view,k=m.getStore(),g=k.getRange(),b,j=g.length;for(var a=0;a<j;a++){b=g[a];if(a>=h&&a<=i){b.set('listPriority',a);ABP.util.LocalStorage.setForLoggedInUser(f+e+'priority'+b.get('field'),a)}else {b.set('listPriority',undefined);ABP.util.LocalStorage.removeForLoggedInUser(f+e+'priority'+b.get('field'))}}c.doUpdateTemplate(c.getTemplate())},toggleListView:function(){this.setFullRow(!this.getFullRow())},templateListSorter:function(e,f){var b=e.get('listPriority'),d=f.get('listPriority'),a=e.get('fullColumnIndex'),c=f.get('fullColumnIndex');if(b<=d){return -1}else {if(b>d){return 1}else {if(a<=c){return -1}else {if(a>c){return 1}}}}},updateFullRow:function(a){this.doUpdateFullRow(a)},updateTemplate:function(d){var a=this,c=a.gridId,e=a.templates,b=e[d];a.listTemplate=Ext.destroy(a.listTemplate);if(b){b=new Ext.XTemplate(Ext.clone(b.tpl));a.listTemplate=b;if(c){ABP.util.LocalStorage.setForLoggedInUser(c+'listtemplate',d)}}else {ABP.util.LocalStorage.removeForLoggedInUser(c+'listtemplate')}a.doUpdateTemplate(d)},renderFullRow:function(b,f,e){var c=this,d=c.listTemplate,a={};a.listViewPlugin=c;a.params=b;a.record=b.record;a.recordIndex=b.recordIndex;a.rowIndex=b.rowIndex;d.applyOut(a,f,e);a.record=a.params=a.listViewPlugin=null},renderNamedAreaGrid:function(a,d,c){var e=this,b=e.namedGridAreaTpl;cellValues={};cellValues.listViewPlugin=a.listViewPlugin;cellValues.cells=a.params.cells;b.applyOut(cellValues,d,c)},renderCellColumn:function(k,m,n,j,e,p,l){var h=this,b={params:e},d=h.priorities||{},f=[],i=h.cellColumnFieldsTpl;for(var a=m;a<=n;a++){if(d[a]){for(var c in d[a]){c=d[a][c];if(!(c.column instanceof Ext.Base)){var o=e.columns.length;for(var a=0;a<o;a++){var g=e.columns[a];if(g.dataIndex===c.column.dataIndex){c.column=g;break}}}}}f.push(d[a])}b.cellColumn=k;b.includeLabel=j||!1;b.cellColumnPriorities=f;i.applyOut(b,p,l);b.cellColumn=b.cellColumnPriorities=b.params=null},renderGridCellColumn:function(k,q,s,j,e,u,o,l,m,n,p,r){var h=this,a={params:e},d=h.priorities||{},f=[],i=h.gridcellColumnFieldsTpl;for(var b=q;b<=s;b++){if(d[b]){for(var c in d[b]){c=d[b][c];if(!(c.column instanceof Ext.Base)){var t=e.columns.length;for(var b=0;b<t;b++){var g=e.columns[b];if(g.dataIndex===c.column.dataIndex){c.column=g;break}}}}}f.push(d[b])}a.cellColumn=k;a.rowsToFill=m;a.fillColumn=l?1:0;a.fillCls='abp-list-view-cellColumn-fill';a.noFillCls='abp-list-view-cellColumn-nofill';a.justify=n||'left';a.align=p||'left';a.flex=r||1;a.includeLabel=j||!1;a.cellColumnPriorities=f;i.applyOut(a,u,o);a.cellColumn=a.cellColumnPriorities=a.params=null},renderDefinedCellColumn:function(o,j,r,g){var m=this,b={params:j},f=m.priorities||{},k=[],n=m.gridcellColumnFieldsTpl,h=g.getParent().config.__data.listView.template,a=g.parent;if(a.cellColumnIndex!==0&&!a.cellColumnIndex){a.cellColumnIndex=0}var d=h.cellColumns[a.cellColumnIndex];var i=d.cells?[]:null;if(i){Ext.Array.each(d.cells,function(a){i.push(a.rowNumber+1)})}if(a.cellIndex!==0&&!a.cellIndex){a.cellIndex=0}var p=d.cells?d.cells.length+a.cellIndex:h.numRows+a.cellIndex;for(var c=a.cellIndex;c<p;c++){if(f[c]){for(var e in f[c]){e=f[c][e];if(!(e.column instanceof Ext.Base)){var q=j.columns.length;for(var c=0;c<q;c++){var l=j.columns[c];if(l.dataIndex===e.column.dataIndex){e.column=l;break}}}}a.cellIndex++}k.push(f[c])}b.cellColumn=a.cellColumnIndex;a.cellColumnIndex++;b.rowsToFill=i;b.fillColumn=d.fillColumn?1:0;b.fillCls='abp-list-view-cellColumn-fill';b.noFillCls='abp-list-view-cellColumn-nofill';b.justify=d.horizontalAlign||'left';b.align=d.verticalAlign||'left';b.flex=d.flex||1;b.includeLabel=o||!1;b.cellColumnPriorities=k;n.applyOut(b,r,g);b.cellColumn=b.cellColumnPriorities=b.params=null;if(a.cellIndex===g.cells.length&&a.cellColumnIndex===h.cellColumns.length){a.cellIndex=0;a.cellColumnIndex=0}},renderCell:function(a,f,e,d){var b=d.params;var c=a.column.tdCls;a.column.tdCls=(c||'')+' abp-list-view-field-value abp-list-view-field-value-'+e;b.view.renderCell(a.column,b.record,b.recordIndex,b.rowIndex,a.column.fullColumnIndex-1,f);a.column.tdCls=c},renderAreaCell:function(k,l){var d=k.cells,g=d.length;var h=['a','b','c','d','e'];for(var b=0;b<g;b++){var a=d[b],c=a.config,e=c.horizontalAlign,f=c.verticalAlign,i=h[a.colIdx],j=a.rowIdx;l.push('<td priority="'+b+'" data-index="'+a.name+'" class="cell-placeholder abp-list-view-field-value abp-grid-cell-type-'+a.xtype+'" style="grid-area: '+(i+j)+'; justify-self: '+e+'; align-self: '+f+';"></td>')}},onTemplateChange:function(c,b){var a=this;a.setTemplate(b);if(a.setListSettings){a.setListSettings()}},updatePriorities:function(o){var e=this,q=e.getTemplate(),n=e.cmp.columnApi,r=o.length,a,m,p,j,l,h,i=[],c=null,k,d=null;for(var b=0;b<r;b++){a=o[b];a=a.colDef?a.colDef:a;k=(n?n.getColumn(a.field):a)||a;l=a.dataIndex?a.dataIndex:a.getDataIndex?a.getDataIndex():Ext.isString(a.field)?a.field:null;p=a.text?a.text:a.getText?a.getText():a.headerName;m=a.getCell?a.getCell():null;if(m){if(m.xtype==='expandercell'){continue}}j=parseInt(ABP.util.LocalStorage.getForLoggedInUser(e.gridId+q+'priority'+l));a.listPriority=Ext.isNumber(j)?j:a.listPriority;h={listViewPlugin:e,fullColumnIndex:k.fullColumnIndex,column:k,fieldName:l,fieldLabel:p};if(Ext.isNumber(a.listPriority)||Ext.isString(a.listPriority)){if(!d){d={}}h.priority=a.listPriority;if(!d[a.listPriority]){d[a.listPriority]=[]}d[a.listPriority].splice(0,0,h)}else {if(e.autoFillMain||e.autoFillBody){i.push(h)}}if(Ext.isNumber(a.bodyPriority)||Ext.isString(a.bodyPriority)){if(!c){c={}}h.priority=a.bodyPriority;if(!c[a.bodyPriority]){c[a.bodyPriority]=[]}c[a.bodyPriority].splice(0,0,h)}}if(i.length>0){var f;var g=0;if(e.autoFillMain){for(var b=0;b<15;b++){if(d&&!Ext.isEmpty(d[b])){continue}else {f=i[g];if(Ext.isEmpty(f)){break}if(!Ext.isEmpty(f.bodyPriority)&&!e.allowBodyDuplication){g++;b--;continue}else {if(!d){d={}}f.priority=b;if(!d[b]){d[b]=[]}d[b].splice(0,0,f);g++}}}}if(e.autoFillBody&&g<i.length-1){var g=0;for(var b=0;b<10;b++){if(c&&!Ext.isEmpty(c[b])){continue}else {f=i[g];if(Ext.isEmpty(f)){break}if(!Ext.isEmpty(f.listPriority)&&!e.allowMainDuplication){g++;b--;continue}else {if(!c){c={}}f.priority=b;if(!c[b]){c[b]=[]}c[b].splice(0,0,f);g++}}}}}e.priorities=d;e.bodyPriorities=c},destroy:function(){delete this.bodyPriorities;delete this.priorities;delete this.listTemplate;this.callParent(arguments)}});Ext.define('ABPControlSet.view.grid.plugin.ListView',{override:'ABPControlSet.base.view.grid.plugin.ListView',requires:['Ext.view.Table'],rowTpl:null,constructor:function(b){b=b||{};var c=this,a=b.cmp;if(a&&!(a instanceof ABPControlSet.base.view.grid.AGGrid)){a.viewConfig=a.viewConfig||{};a.viewConfig.rowTpl=this.rowTpl;a.viewConfig.hasVariableRowHeight=function(){var a=this,e=a.panel,c=e.listViewPlugin,d=c?c.getFullRow():!1;return d||a.__proto__.hasVariableRowHeight.apply(a,arguments)};a.viewConfig.collectData=function(){var c=this,g=c.panel,a=g.listViewPlugin,e=a?a.getFullRow():!1,d=a?a.listTemplateClsPreface+a.getTemplate():'';var f=c.__proto__.collectData.apply(c,arguments);c.rowValues.fullRow=e;c.rowValues.templateCls=d;return f}}c.callParent([b])},init:function(b){var a=this;a.callParent(arguments);a.addSettings();if(a.showTitle){a.toggleTool=Ext.widget({xtype:'tool',iconCls:'icon icon-list-style-bullets',handler:this.toggleListView,scope:this});a.cmp.addTool(a.toggleTool)}},addSettings:function(){var a=this,b=a.cmp;if(a.showTitle){a.settingsTool=Ext.widget({xtype:'tool',iconCls:'icon icon-gearwheels',handler:this.toggleListSettings,hidden:!0,scope:this});b.addTool(a.settingsTool)}var c=ABP.util.LocalStorage.getForLoggedInUser(a.gridId+'listtemplate');a.listSettings=Ext.widget({xtype:'container',dock:'right',hidden:!0,width:200,padding:4,layout:{type:'vbox',align:'stretch'},cls:'abp-list-view-settings',items:[{xtype:'abpcombobox',fieldLabel:'Template',labelAlign:'top',displayField:'display',valueField:'value',itemId:'templateCombo',forceSelection:!0,listeners:{change:a.onTemplateChange,scope:a},store:Ext.create('ABPControlSet.store.ListViewTemplates'),value:c||'triData'},{xtype:'treepanel',itemId:'listOrder',flex:1,scrollable:'y',hideHeaders:!0,columns:[{xtype:'gridcolumn',dataIndex:'text',flex:1}],store:Ext.create('Ext.data.TreeStore',{sorters:[{sorterFn:a.templateListSorter.bind(a)}]}),listeners:{drop:a.onListNodeDrop,scope:a},viewConfig:{getRowClass:a.getPriorityRowClass.bind(a),plugins:{treeviewdragdrop:{containerScroll:!0}}},rootVisible:!1}]});b.on('columnschanged',a.setListSettings,a);b.addDocked(a.listSettings);a.setListSettings()},getPriorityRowClass:function(e,h,g,f){var c=this,d=c.getTemplate(),b=f.indexOf(e),a=c.templates[d];if(a&&a.start<=b&&a.end>=b){return 'abp-list-order-inside-range'}else {return 'abp-list-order-outside-range'}},setListSettings:function(){var c=this,d=c.listSettings,h=d.down('#listOrder'),f=h.getStore(),e=c.cmp,a,g=e.getColumns(),b=[];g.forEach(function(c){a=c.text;a=(a||'').trim();if(c.dataIndex){b.push({leaf:!0,text:Ext.isEmpty(a)?c.dataIndex:a,field:c.dataIndex,listPriority:c.listPriority,fullColumnIndex:c.fullColumnIndex})}});f.setRoot({expanded:!0,children:b})},doUpdateFullRow:function(b){var c=this,a=c.cmp;if(a){a.toggleCls('abp-panel-list-view',b);if(b){c.updatePriorities(a.rendered?a.getColumns():a.columns)}if(a.rendered){var f=a.getView();if(f){f.toggleCls('abp-list-view',b)}c.resetGrid(b)}else {if(b){a.viewConfig=a.viewConfig||{};a.viewConfig.cls=a.viewConfig.cls||'';a.viewConfig.cls+=' abp-list-view'}}var e=c.settingsTool,d=c.listSettings;if(e){e.setVisible(b)}if(!b&&d){d.setVisible(!1)}var g=a.headerCt;if(g){a.setHideHeaders(b)}else {a.hideHeaders=b}}},doUpdateTemplate:function(d){var b=this,a=b.cmp;if(a){var c=b.getFullRow();if(c){b.updatePriorities(a.rendered?a.getColumns():a.columns)}b.resetGrid(c)}},resetGrid:function(e){var f=this,c=f.cmp;if(c&&c.rendered){var a=c?c.getView():null;if(a){a.variableRowHeight=e;a.refreshSizePending=!0;if(a.bufferedRenderer){var b=a.bufferedRenderer,d=b.getFirstVisibleRowIndex();delete b.rowHeight;b.scroller.refresh();b.refreshView();b.scrollTo(d)}else {a.refresh()}}}},destroy:function(){delete this.listSettings;delete this.toggleTool;delete this.settingsTool;this.callParent(arguments)}},function(){var a=[].concat(Ext.view.Table.prototype.rowTpl);if(a&&Ext.isObject(a[a.length-1])){a.pop()}var b=['<tpl if="fullRow">','{%','var dataRowCls = values.recordIndex === -1 ? "" : " '+Ext.baseCSSPrefix+'grid-row";','%}','<tr class="{[values.rowClasses.join(" ")]} {[dataRowCls]} {templateCls}"',' role="{rowRole}" {rowAttr:attributes}>','{%','parent.view.panel.listViewPlugin.renderFullRow(values, out, parent)','%}','</tr>','<tpl else>'];b=b.concat(a);b.push('</tpl>',{disableFormats:!0,priority:0});this.prototype.rowTpl=b});Ext.define('ABPControlSet.base.view.grid.plugin.AGListView',{extend:'ABPControlSet.base.view.grid.plugin.ListView',alias:'plugin.aglistview',init:function(b){var a=this;a.callParent(arguments);a.mon(b,{beforeembed:a.onBeforeEmbed,scope:a})},addSettings:Ext.emptyFn,onBeforeEmbed:function(h,d){if(d){var a=this;var g=d.components||{};var b=d.sideBar;if(b!==!1){var e=function(){};var c={toolPanels:Ext.isObject(b)?b.toolPanels||[]:[]};b=b===!0?'columns':b;if(Ext.isString(b)){c.defaultToolPanel=b;c.toolPanels.push(b)}var f=ABP.util.LocalStorage.getForLoggedInUser(a.gridId+'listtemplate');e.prototype.init=function(b){a.listSettings=Ext.widget({xtype:'container',padding:4,hidden:!0,cls:'abp-list-view-settings',layout:{type:'vbox',align:'stretch'},listeners:{el:{painted:{fn:function(a){a.component.setSize('100%','100%');a.component.updateLayout();a.component.down('#listOrder').setHideHeaders(!0)},single:!0}}},items:[{xtype:'abpcombobox',fieldLabel:'Template',labelAlign:'top',displayField:'display',valueField:'value',itemId:'templateCombo',forceSelection:!0,listeners:{change:a.onTemplateChange,scope:a},store:Ext.create('ABPControlSet.store.ListViewTemplates'),value:f||'triData'},{xtype:Ext.toolkit==='classic'?'treepanel':'tree',itemId:'listOrder',flex:1,scrollable:'y',hideHeaders:!0,store:Ext.create('Ext.data.TreeStore'),columns:[{xtype:'gridcolumn',dataIndex:'text',flex:1}],listeners:{drop:a.onListNodeDrop,scope:a},viewConfig:Ext.toolkit==='classic'?{plugins:{treeviewdragdrop:{containerScroll:!0}},getRowClass:a.getRowClass.bind(a)}:undefined,rootVisible:!1}],renderTo:Ext.getBody()});b.api.addEventListener('gridColumnsChanged',a.setListSettings.bind(a))};e.prototype.getGui=function(){a.listSettings.show();return a.listSettings.el.dom};c.toolPanels.push({id:'listViewSettings',labelDefault:'List View',labelKey:'listView',iconKey:'list-view',toolPanel:e})}Ext.apply(d,{embedFullWidthRows:!0,getRowStyle:a.getRowStyle.bind(a),sideBar:c,components:g,embedFullWidthRows:!0,getRowHeight:a.getRowHeight.bind(a),groupUseEntireRow:!0,groupRowRenderer:a.groupRowRenderer.bind(a),fullWidthCellRenderer:a.fullWidthRenderer.bind(a),isFullWidthCell:a.isFullWidthCell.bind(a)})}},setListSettings:function(g){if(this.listSettings){var f=this,c=f.cmp.columnApi,e=this.listSettings.down('#listOrder').getStore(),d=c.getAllColumns(),a,b=[];d.forEach(function(c){a=c.colDef.headerName;a=(a||'').trim();if(c.colDef.field){b.push({leaf:!0,text:Ext.isEmpty(a)?c.colDef.field:a,field:c.colDef.field})}});e.setRoot({expanded:!0,children:b})}},isFullWidthCell:function(a){return this.getFullRow()},getRowStyle:function(c){var b=this,a=b.getFullRow();if(a){return {display:'table'}}},getRowHeight:function(f){var c=this,d=c.getTemplate(),e=c.getFullRow();if(e){if(d==='duoImage'){return 80}else {var b=f.api.gridPanel.getGui(),a=b?b.clientWidth:0;if(a<700){return 240}else {if(a<900){return 180}else {return 105}}}}else {return 32}},fullWidthRenderer:function(a){var e=this,f=[],h=e.getTemplate(),d=a.api.rowRenderer.rowCompsByIndex[a.rowIndex];Ext.apply(a,{record:a.node,recordIndex:a.rowIndex,rowComp:d});e.renderFullRow(a,f,a);var b=document.createElement('tr');b.className=(b.className||'')+' abp-full-width-list-row '+e.listTemplateClsPreface+h;b.innerHTML=f.join('');var c=d.cellComps;var g=Object.values?Object.values(c):Object.keys(c).map(function(b){return c[b]});d.callAfterRowAttachedOnCells(g,b);return b},groupRowRenderer:function(a){},renderCell:function(l,n,m,k){var j=l.column,d=k.params,g=d.eGridCell,i=d.rowComp;var b=[];i.createNewCell(j,g,b,[]);if(b.length>0){var h=b.join('');var a=h.replace('div','td');var e=a.lastIndexOf('div');var c=a.substring(e);c=c.replace('div','td');var f=a.substring(0,e);n.push((f+c).replace('class="','class="abp-list-view-field-value abp-list-view-field-value-'+m+' '))}},doUpdateFullRow:function(b){var c=this,a=c.cmp;if(a&&a.gridApi){a.toggleCls('abp-ag-list-view',b);a.gridApi.headerRootComp.setVisible(!b);c.resetGrid(b)}},doUpdateTemplate:function(){var a=this;if(a.cmp&&a.cmp.rendered){this.resetGrid(this.getFullRow())}},resetGrid:function(c){var b=this,a=b.cmp;if(a){if(c){b.updatePriorities(a.columnApi.getAllColumns())}a.gridApi.resetRowHeights();a.gridApi.redrawRows()}}});Ext.define('ABPControlSet.view.grid.plugin.AGListView',{override:'ABPControlSet.base.view.grid.plugin.AGListView'});Ext.define('ABPControlSet.base.view.grid.AGGrid',{extend:'Ext.Panel',requires:['ABPControlSet.base.view.grid.plugin.AGListView'],layout:'fit',agGrid:null,columnDefs:null,rowData:null,gridApi:null,isUsingSenchaStore:!1,listOnTop:!1,listView:!1,gridHeight:null,cls:['ag-theme-balham'],bodyCls:'abp-ag-grid-body',border:!0,config:{store:null},constructor:function(a){a=a||{};a.items=[{xtype:'component',itemId:'agGrid',style:{maxWidth:'calc(100% - 1px)',height:'100%',minHeight:Ext.isNumber(a.gridHeight)?a.gridHeight+'px':Ext.isString(a.gridHeight)?a.gridHeight:'100%'}}];a.listView=Ext.isBoolean(a.listView)?a.listView:this.listView===!1?!1:!0;if(a.listView){a.plugins=a.plugins||{};a.plugins.aglistview=a.plugins.aglistview||!0}a.store=Ext.create('ABPControlSet.store.AGGrid');this.callParent([a])},beginEmbed:function(){var a=this,c=a.down('#agGrid'),g=a.getHidden(),d=c.getEl?c.getEl():c.el||c.element;if(g){a.on({show:a.beginEmbed,single:!0});return}if(d){a.on('destroy',a.destroyAGGrid);a.embeddedEl=d;if(typeof agGrid==='object'){var f=document.querySelector('#'+d.id);var b=a.getOptions()||{};b.parentComponent=a;b.onCellValueChanged=a.changeCellValue;b.suppressLoadingOverlay=!0;b.suppressNoRowsOverlay=!0;if(a.fireEvent('beforeembed',a,b)!==!1){a.agGrid=new agGrid.Grid(f,b);a.gridApi=b.api;a.columnApi=b.columnApi;var e=a.getStore();if(e instanceof ABPControlSet.store.AGGrid){e.setColumnApi(a.columnApi);e.setGridApi(a.gridApi)}a.fireEvent('embed',a,a.agGrid,a.gridApi,a.columnApi)}}else {d.setHtml('Necessary files to use the ag-grid were not initialized properly. Please review the AGGrid component documentation for details on how to include the proper files.')}a.afterEmbed(a.agGrid,a.gridApi,a.columnApi)}},afterEmbed:Ext.emptyFn,embeddedEl:null,copyDataFromStore:function(){var e=this;var d=e.getStore();var c=d.getData().items.map(function(a){return a.data});var b=[];var a=0;for(;a<c.length;a++){b[a]=JSON.parse(JSON.stringify(c[a]))}return b},changeCellValue:function(b){var a=this.parentComponent;var d=a.getStore();if(d){var c=d.findRecord('id',b.data.id);if(c){c.set(b.data);a.fireEvent(ABPControlSet.common.types.Events.AGGridUpdate,a,c)}}else {a._update(null,b.data,null,null,null,null)}},addRowValue:function(d){var a=this;var c=a.getStore();var b=Ext.create('Ext.data.Model',d.data);if(c){c.add(b);a.fireEvent(ABPControlSet.common.types.Events.AGGridAdd,a,a.up('container'),c.indexOf(b))}else {a._add(null,b,null,null)}},removeRowValue:function(e){var a=this;var b=a.getStore();var f=e.data.map(function(a){return a.id});var d=0;var c;if(b){for(;d<f.length;d++){c=b.findRecord('id',f[d]);b.remove(c)}a.fireEvent(ABPControlSet.common.types.Events.AGGridRemove,a,a.up('container'),b.indexOf(c))}else {a._remove(null,e,null,null,null)}},getOptions:Ext.emptyFn,onChange:Ext.emptyFn,destroyAGGrid:function(){var a=this;delete a.embeddedEl;a.agGrid.destroy();delete a.agGrid;delete a.gridApi;delete a.columnApi}});Ext.define('ABPControlSet.base.mixin.Column',{extend:'Ext.Mixin',mixinConfig:{id:'abpcolumn'},config:{fieldFormatter:null,fieldFormat:null},constructor:function(){this.callParent(arguments);this.hookFormatRenderer()},hookFormatRenderer:Ext.EmptyFn,columnFormatRenderer:Ext.emptyFn});Ext.define('ABPControlSet.mixin.Column',{override:'ABPControlSet.base.mixin.Column',hookFormatRenderer:function(){if(!this.renderer){this.renderer=this.columnFormatRenderer}},columnFormatRenderer:function(a,e){var b=e.column,c=b.getFieldFormatter(),d=b.getFieldFormat();if(Ext.isFunction(c)){return c(b,d,(Ext.isEmpty(a)?'':a).toString(),!1,a)}else {return a}}});Ext.define('ABPControlSet.base.view.grid.Column',{extend:'Ext.grid.column.Column',xtype:'abpcolumn',requires:['ABPControlSet.base.mixin.Column'],mixins:['ABPControlSet.base.mixin.Column'],constructor:function(a){a=a||{};this.callParent([a]);this.mixins.abpcolumn.constructor.call(this)}});Ext.define('ABPControlSet.common.Constants',{statics:{COLUMN_WIDTH_SAMPLE_PERCENTAGE:0.05,MINIMUM_COLUMN_WIDTH:40,COLUMN_HEADER_RIGHT_ALIGN_PADDING:6,COLUMN_HEADER_REQUIRED_PADDING:12,COLUMN_HEADER_EXTRA_PADDING:4,COLUMN_MENU_TRIGGER_PADDING:15,COLUMN_SORT_ARROW_PADDING:15,COLUMN_FILTER_ICON_PADDING:10,RESPONSIVE_SNAPPOINT_WIDTH_1:510,MAP_URL_FORMAT_STRING:'https://www.google.com/maps/search/?api=1&query={0}'}});Ext.define('ABPControlSet.base.view.grid.plugin.Grid',{extend:'Ext.plugin.Abstract',requires:['ABPControlSet.common.Constants'],id:'abpgrid',alias:'plugin.abpgrid',getTableView:Ext.emptyFn,getHeaderContainer:Ext.emptyFn,getNecessaryCells:Ext.emptyFn,sizeToContent:function(){var a=this.cmp;var d=a.recordsPerPage;if(a.recordsPerPageSizing&&Ext.isNumber(d)&&!a.hidden&&!a.destroyed&&!a.destroying){var b=a.getStore();var g=this.getTableView();if(b&&g){var k=b.isBufferedStore?b.getTotalCount():b.getCount();var j=b.isBufferedStore?b.data.getCount():b.getCount();var h=k<j?j:k;var e=0;var c=d;var l=a.currentRecordsPerPageCalc;if(d>h){c=h}if(c===l){return}if(a.fireEvent('beforesizetocontent',a)!==!1){var i=Ext.getScrollbarSize(!0);if(i){e=i.height||0}a.fireEvent('beforeheightsizetocontent',a);a.setHeight(null);var f=22;if(a.rowLines){f+=1}var m=Math.max(c,1)*f+e;g.setMinHeight(e+f);g.setHeight(m);a.currentRecordsPerPageCalc=c}}}},sizeColumnsToContent:function(a,h){var i=this.cmp;if(i.columnSizing){a=a||!1;if(!a){var d=this.getTableView();if(d){var g=d.body;var b=g?g.dom:null;if(!b||b.children&&b.children.length===0){a=!0}else {var f=d.headerCt;var e=f?f.el:null;var c=e?e.query('.x-box-target')[0]:null;if(!c||c.children&&c.children.length===0){a=!0}}}}if(a){Ext.defer(this.doSizeColumnsToContent,1,this,[h])}else {this.doSizeColumnsToContent(h)}}},doSizeColumnsToContent:function(o){var b=this.cmp;var k=this.getHeaderContainer();if(k&&!b.hidden&&(!b.destroyed&&!b.destroying)){var l=this.getTableView();if(b.fireEvent('beforesizecolumnstocontent',b)!==!1){var i=k.query('gridcolumn');var n=i.length;var a;var c;var f;var e;var g=[];var j;i.reverse();for(var d=0;d<n;d++){a=i[d];if(a.isVisible()&&!a.flex){if(l.isLockingView){f=a.up('grid');e=f?f.getView?f.getView():f:null}else {e=l}if(e){j=a.__maxContentWidth;a.__maxContentWidth=this.getContentWidth(e.el,a,o);if(a.__maxContentWidth===!1){if(Ext.isFunction(e.getMaxContentWidth)){a.__maxContentWidth=e.getMaxContentWidth(a)}}if(j!=a.__maxContentWidth){g.push(a)}}}}var m=g.length;var h=!1;for(var d=0;d<m;d++){a=g[d];if(a.isVisible()&&!a.flex){c=a.__maxContentWidth;if(Ext.isNumber(a.minColWidth)&&c<a.minColWidth){c=a.minColWidth}else {if(Ext.isNumber(a.maxColWidth)&&c>a.maxColWidth){c=a.maxColWidth}}a.greatestWidth=a.greatestWidth||0;if(c>a.greatestWidth){if(h===!1){b.fireEvent('beforecolumnsupdated',b);h=!0}a.greatestWidth=c;a.setWidth(c)}}}if(h===!0){b.fireEvent('aftercolumnsupdated',b)}}}},getContentWidth:function(C,b,D){var p=this.getNecessaryCells(C,b,D);var n;if(Ext.isEmpty(n)){n=Ext.os.deviceType==='Desktop'}var e=0,d=ABPControlSet.common.Constants,v=8,i=p[0];if(i){if(Ext.isEmpty(i.innerText)&&i.innerHTML){return !1}else {var o=Ext.fly(i);if(o){var m=new Ext.util.TextMetrics(i);var B=parseInt(o.getStyle('padding-left'),10)||0;var z=parseInt(o.getStyle('padding-right'),10)||0;var u=z+B;var a=[];var g=0;var w;var x=p.length;var k;var l=Math.ceil(x*d.COLUMN_WIDTH_SAMPLE_PERCENTAGE);for(var c=0;c<x;c++){k=p[c].innerText;w=k.length;if(w>g){if(l>a.length){a.push(k)}else {var t;for(var f=0;f<a.length;f++){if(g===0||a[f].length===g){t=f}}a[t]=k}g=0;for(var f=0;f<a.length;f++){if(g===0||a[f].length<g){g=a[f].length}}}}var y=Math.max;var j;var s=a.length>l?l:a.length;if(!n){v=m.getWidth('A');for(var c=0;c<s;c++){j=a[c].length*v+u;e=y(e,j)}}else {for(var c=0;c<s;c++){j=m.getWidth(Ext.htmlEncode(a[c]))+u;e=y(e,j)}}Ext.destroy(m)}}}if(b.el){var h=b.allowBlank===!1?d.COLUMN_HEADER_REQUIRED_PADDING:d.COLUMN_HEADER_EXTRA_PADDING;var r=new Ext.util.TextMetrics(b.el);h+=r.getWidth(b.text)||0;Ext.destroy(r);if(b.align==='right'){h+=d.COLUMN_HEADER_RIGHT_ALIGN_PADDING}if(b.allowFilter){var A=b.getFilterValue();if(!Ext.isEmpty(A)){h+=d.COLUMN_FILTER_ICON_PADDING}}if(!Ext.isEmpty(b.sortState)){h+=d.COLUMN_SORT_ARROW_PADDING}var q=b.triggerBuffer?e+b.triggerBuffer:e;if(!b.menuDisabled){h+=d.COLUMN_MENU_TRIGGER_PADDING}e=q<h?h:q}return e<d.MINIMUM_COLUMN_WIDTH?d.MINIMUM_COLUMN_WIDTH:e}});Ext.define('ABPControlSet.view.grid.plugin.Grid',{override:'ABPControlSet.base.view.grid.plugin.Grid',init:function(a){if(a.columnSizing||a.recordsPerPageSizing){var b=this.getTableView();a.on({afterheightsizetocontent:function(b){b.resumeLayouts(!0)},beforeheightsizetocontent:function(b){b.suspendLayouts()},aftercolumnsupdated:function(b){b.resumeLayouts(!0)},beforecolumnsupdated:function(b){b.suspendLayouts()}});b.addListener({itemadd:this.onViewItemAdd,boxready:function(){this.sizeColumnsToContent(!1)},scope:this})}},onViewItemAdd:function(c,d,b){Ext.suspendLayouts();var a=this.cmp;if(a.sizeColumnsToContent){this.sizeColumnsToContent(!1,b)}if(a.recordsPerPageSizing){this.sizeToContent()}Ext.resumeLayouts(!0)},getNecessaryCells:function(g,f,b){var a=[];var d=f.getCellInnerSelector();if(Ext.isArray(b)){var e=b.length;for(var c=0;c<e;c++){a.push(b[c].querySelector(d))}}else {a=g.query(d)}return a},getTableView:function(){return this.cmp.getView()},getHeaderContainer:function(){return this.cmp.headerCt}});Ext.define('ABPControlSet.base.mixin.Component',{extend:'Ext.Mixin',requires:['ABPControlSet.base.view.contextmenu.plugin.ContextMenu'],config:{responsiveWidth:null,backgroundColor:null,foregroundColor:null},mixinConfig:{id:'abpcomponent'},constructor:function(a){a=a||{};if(a.contextMenu){this.addCSPlugin(a,'abpcontextmenu')}this.callParent([a])},getContextMenuData:Ext.emptyFn,addCSPlugin:function(a,b){if(a){a.plugins=a.plugins||{};if(Ext.isObject(a.plugins)&&!a.plugins[b]){a.plugins[b]=b}else {if(Ext.isArray(a.plugins)&&!a.plugins.indexOf(b)>-1){a.plugins.push(b)}}}},removeCSPlugin:function(a,b){if(a){if(Ext.isObject(a.plugins)&&a.plugins[b]){delete a.plugins[b]}else {if(Ext.isArray(a.plugins)&&a.plugins.indexOf(b)>-1){a.plugins=Ext.Array.remove(a.plugins,b)}}}},updateBackgroundColor:function(b){var a=this;var c=Ext.isClassic?a.el&&a.rendered?a.el:a.protoEl:a.element?a.element:null;if(c){c.setStyle('background-color',b)}else {a.style=a.style||{};a.style.backgroundColor=b}},updateForegroundColor:function(b){var a=this;var c=Ext.isClassic?a.el&&a.rendered?a.el:a.protoEl:a.element?a.element:null;if(c){c.setStyle('color',b)}else {a.style=a.style||{};a.style.color=b}},getBackgroundColor:function(){var a=this;var b=Ext.isClassic?a.el&&a.rendered?a.el:a.protoEl:a.element?a.element:null;if(b){return b.getStyle('background-color')}else {if(Ext.isObject(a.style)){return a.style.backgroundColor}else {return a.callParent()}}},getForegroundColor:function(){var a=this;var b=Ext.isClassic?a.el&&a.rendered?a.el:a.protoEl:a.element?a.element:null;if(b){return b.getStyle('color')}else {if(Ext.isObject(a.style)){return a.style.color}else {return a.callParent()}}},__flushValueViewModel:function(){var d=this,c=d.bind||{},b=c['value'],a=b?b.owner:null;if(a){a.notify()}},updateResponsiveWidth:function(a){this.responsiveWidth=a;if(this.rendered){if(this.updateLayout){this.updateLayout()}else {this.setWidth(this.getWidth())}}},userSetValue:function(c){var a=this,b=!Ext.isEmpty(a.focusValue)?a.focusValue:Ext.isFunction(a.getValue)?a.getValue():a.value;if(Ext.isFunction(this.setValue)){if(Ext.isFunction(a.isEqual)&&!a.isEqual(c,b)||c!==b){a.focusValue=b;a.setValue(c)}}}});Ext.define('ABPControlSet.mixin.Component',{override:'ABPControlSet.base.mixin.Component',config:{tooltip:null},constructor:function(a){a.onRender=this.onRenderComponent;this.callParent([a])},onRenderComponent:function(){var b=this;var a=b.getTooltip();if(a){b.setTooltip(a,!0)}this.superclass.onRender.apply(this,arguments)},getHidden:function(){return !this.getVisible()},getDisabled:function(){return this.isDisabled()},getTooltipEl:function(){return this.el},getTooltip:function(){var a=this.callParent();if(Ext.isObject(a)){return a.getText?a.getText:a.getHtml?a.getHtml():a.text||a.html}return a},clearTip:function(){var b=this,a=this.getTooltipEl();if(a){if(Ext.quickTipsActive&&Ext.isObject(b.getTooltip())){Ext.tip.QuickTipManager.unregister(a)}else {if(a.dom){a.dom.removeAttribute('qtip')}}}},setTooltip:function(a,c){var d=this,b=this.getTooltipEl()||null;if(b){if(!c||!a){d.clearTip()}if(a){if(!Ext.isObject(a)){a={text:a}}if(Ext.quickTipsActive&&Ext.isObject(a)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.id},a))}else {b.dom.setAttribute('qtip',a)}}}this.callParent([a])}});Ext.define('ABPControlSet.base.mixin.Button',{extend:'ABPControlSet.base.mixin.Component',config:{icons:null,iconFontSize:null},setIconFontSize:function(a){var b=this,c=b.getIconFontSize();if(!Ext.isEmpty(c)&&Ext.isEmpty(a)||!Ext.isEmpty(a)){b.updateButtonIconStyle({'font-size':Ext.isNumber(a)?a+'px':a})}this.callParent(arguments)},updateButtonIconStyle:Ext.emptyFn});Ext.define('ABPControlSet.mixin.Button',{override:'ABPControlSet.base.mixin.Button',setIcons:function(a){a=a||[];var b=this,g=b.getIcons(),c=b.btnIconEl;if(Ext.isString(a)){a=a.split(',')}if(b.glyph){b.setGlyph(null)}b.icons=a;if(c){c.removeCls(b.iconCls);var e='';var f=a.length;for(var d=0;d<f;d++){e+='url('+a[d]+')'+(f===d+1?'':',')}c.setStyle('background-image',e);c.setStyle('background-size','contain');b._syncHasIconCls();b.updateLayout()}},updateForegroundColor:function(b){var a=this;a.callParent(arguments);if(a.rendered){var c=a.btnInnerEl;if(c){c.setStyle('color',b)}}else {a.on('render',function(){a.btnInnerEl.setStyle('color',b)},a)}},updateButtonIconStyle:function(b){var a=this;if(a.rendered){if(a.btnIconEl){a.btnIconEl.setStyle(b)}}else {a.on('render',function(){if(a.btnIconEl){a.btnIconEl.setStyle(b)}})}}});Ext.define('ABPControlSet.base.mixin.CardContainer',{extend:'Ext.Mixin',mixinConfig:{id:'abpcardcontainer'},singletons:null,constructor:function(a){a=a||{};a.singletons=new Ext.util.Collection({keyFn:function(b){return b['cardId']}});this.callParent([a])},showView:function(k,g,f){f=f||!1;g=g||!1;Ext.suspendLayouts();var b=this,l=b.getLayout(),i=Ext.toolkit==='modern'?b.setActiveItem.bind(b):l.setActiveItem.bind(l),c=b.items,n=c.length;var a=c.findBy(function(a){return a['cardId']===k});var e=b.singletons.get(k);if(e){var j=e.lastHostId;if(j){a=c.findBy(function(a){return a['cardId']===j});if(a){a.add(e)}}}if(a){if(a.isHost){var m=a.hostedCardId,d=b.singletons.get(m);if(d){a.add(d);d.lastHostId=d.hostCardId=a.cardId}}var h=c.indexOf(a);if(g){b.removeAll(!0)}else {if(f&&h<n){b.destroyNewer(h)}}if(c.indexOf(a)===-1){a=b.add(a)}if(i){i(a)}Ext.resumeLayouts(!0);return !0}Ext.resumeLayouts(!0);return !1},destroyNewer:function(e){var d=this,a,c=d.items,f=c.length;for(var b=f;b>e;b--){a=c.getAt(b);if(a){if(a.isHost){a.removeAll(!1)}d.remove(a,{destroy:!0})}}},addView:function(a,i,h){i=i||!1;h=h===!1?!1:!0;var b=this,m=a,f=b.items,e=b.getLayout(),j=Ext.toolkit==='modern'?b.setActiveItem.bind(b):e.setActiveItem.bind(e),n=e.getActiveItem?e.getActiveItem():b.getActiveItem?b.getActiveItem():null,g=f.indexOf(n);Ext.suspendLayouts();var o=f.length;if(i){b.removeAll(!0)}else {if(h&&o>g&&g!==-1){b.destroyNewer(g)}}if(a){if(a.singleton===!0){var l=!0;var c=b.singletons.get(a.cardId);if(c){var k=c.lastHostId;var d=c.hostCardId;if(k===d){a=f.findBy(function(b){return b['cardId']===k});if(a){a.add(c);l=!1}else {a=m}}}if(l){if(!c){b.singletons.add(a)}var d=a.hostCardId||Ext.id();a.lastHostId=d;a=Ext.widget({xtype:'container',isHost:!0,layout:'fit',cardId:d,hostedCardId:a.cardId,items:[a]})}}a=b.add(a);if(j){j(a)}}else {a=!1}Ext.resumeLayouts(!0);return a},forwardView:function(){var a=this,d=a.items,b=a.getLayout(),f=Ext.toolkit==='modern'?a.setActiveItem.bind(a):b.setActiveItem.bind(b);var c,g=b.getActiveItem?b.getActiveItem():a.getActiveItem?a.getActiveItem():null,e=d.indexOf(g);if(e!==-1){c=d.getAt(e+1)}if(c&&f){f(c)}},backView:function(e,d){var a=this,c=a.getLayout(),i=Ext.toolkit==='modern'?a.setActiveItem.bind(a):c.setActiveItem.bind(c),h=c.getActiveItem?c.getActiveItem():a.getActiveItem?a.getActiveItem():null,f=a.items;Ext.suspendLayouts();d=d||!1;e=e||1;var g=h?f.indexOf(h):null,b=Ext.isNumber(g)?g-e:null;if(Ext.isNumber(b)){var j=f.getAt(b<0?0:b);if(d){if(b<0){a.removeAll(!0)}else {a.destroyNewer(b)}}if(j&&i&&b>=0){i(j)}}Ext.resumeLayouts(!0)}});Ext.define('ABPControlSet.base.mixin.Field',{extend:'ABPControlSet.base.mixin.Component',config:{fieldLabel:null,fieldFormatter:null,fieldFormat:null,fieldFormatOnLoad:!0,required:null,spellcheck:!0,labelForegroundColor:null,labelHidden:null,blankText:null,sizeToInnerContent:null,tagForReadOnly:null},mixinConfig:{after:{setValue:'onValueUpdate',destroy:'doCleanup',setReadOnly:'onReadOnlyUpdate',afterRender:'onAfterRender'}},__linkedLabel:null,constructor:function(a){a=a||{};this.addCSPlugin(a,'abpfield');if(a.linkedLabel){this.addCSPlugin(a,'abplinkedlabel')}this.callParent([a])},onValueUpdate:function(e){var a=this,c=a.getFieldFormatOnLoad();if(c&&!a.userTyping&&!a.containsFocus){var b=a.getFieldFormatter();var d=a.getFieldFormat();if(Ext.isFunction(b)){a.setFieldFormattedValue(b,d,!1)}}if(a.getSizeToInnerContent()){a.doSizeToInnerContent()}if(a.getTagForReadOnly()){a.doReadOnlyTagUpdate()}},updateSizeToInnerContent:function(a){this.toggleCls('abp-size-to-content-input',a);if(a){this.doSizeToInnerContent()}},onAfterRender:Ext.emptyFn,doReadOnlyTagUpdate:function(){var a=this,c=a.getReadOnly(),b=a.readOnlyElement,d=a.getValue();if(b){a.toggleCls('abp-read-only-link-field',c);if(Ext.isModern){b.setHtml(Ext.String.htmlEncode(a.getInputValue()))}else {b.setHtml(Ext.String.htmlEncode(a.getRawValue()))}if(a.getTagForReadOnly()==='a'){b.set({'href':a.formatUsageUrl(d)});if(a.usage==='url'||a.usage==='address'){b.set({'target':'_blank','rel':'noopener noreferrer'})}}}},formatUsageUrl:function(b){var c=this,a;switch(c.usage){case 'phone':a='tel:{0}';break;case 'email':a='mailto:{0}';break;case 'address':a=ABPControlSet.common.Constants.MAP_URL_FORMAT_STRING;break;default:a='{0}';break;}return Ext.String.format(a,b)},onReadOnlyUpdate:function(){var a=this;if(a.getTagForReadOnly()){var c=a.getReadOnly(),b=a.readOnlyElement;if(b){a.toggleCls('abp-read-only-link-field',c)}}},doSizeToInnerContent:Ext.emptyFn,getBackgroundColor:function(){var a=this.getInputElement();if(a){return a.getStyle('background-color')}else {return this._backgroundColor}},getForegroundColor:function(){var a=this.getInputElement();if(a){return a.getStyle('color')}else {return this._foregroundColor}},updateBackgroundColor:function(b){var a=this.getInputElement();if(a&&this.rendered){a.setStyle('background-color',b)}},updateForegroundColor:function(b){var a=this.getInputElement();if(a&&this.rendered){a.setStyle('color',b)}},getLabelForegroundColor:function(){var b=this;var a=b.getLabel();if(Ext.isObject(a.style)){return a.style.color}else {return b.callParent()}},updateLabelForegroundColor:function(b){var c=this;var a=c.labelElement;if(a){a.setStyle('color',b)}},getBlankText:function(a){return this.blankText},setBlankText:function(a){this.blankText=a},setFieldFormattedValue:Ext.emptyFn,doCleanup:function(){if(this.inputTextMetrics){this.inputTextMetrics=this.inputTextMetrics.destroy()}if(this.readOnlyElement){this.readOnlyElement=this.readOnlyElement.destroy()}}});Ext.define('ABPControlSet.mixin.Field',{override:'ABPControlSet.base.mixin.Field',constructor:function(a){a=a||{};if(a.required===!0){a.allowBlank=!1}this.callParent([a])},getTooltipEl:function(){return this.inputEl},getRequired:function(){return !this.allowBlank},updateRequired:function(b){var a=this;a.required=b===!0?!0:!1;a.allowBlank=!b;if(a.__linkedLabel){a.__linkedLabel.toggleCls('abp-mandatory',!a.allowBlank)}if(!a.hideLabel&&a.labelEl){a.labelEl.toggleCls('abp-mandatory',!a.allowBlank)}},getReadOnly:function(){return this.readOnly},getInputElement:function(){return this.inputEl},updateSpellcheck:function(a){var b=this;if(b.rendered){var c=this.getInputElement();if(c){c.set({spellcheck:a.toString(),autocorrect:a?'on':'off'})}}else {var d=Ext.Template.create(b.inputAttrTpl);b.inputAttrTpl=[d.html+' spellcheck="'+a.toString()+'" autocorrect="'+(a?'on':'off')+'"']}},updateBackgroundColor:function(b){var a=this;if(a.rendered){this.callParent(arguments)}else {a.fieldStyle=a.fieldStyle||{};a.fieldStyle.backgroundColor=b}},updateForegroundColor:function(b){var a=this;if(a.rendered){this.callParent(arguments)}else {a.fieldStyle=a.fieldStyle||{};a.fieldStyle.color=b}},getBackgroundColor:function(){var a=this;var b=a.getInputElement();if(b){return b.getStyle('background-color')}else {if(Ext.isObject(a.fieldStyle)){return a.fieldStyle.backgroundColor}else {return a._backgroundColor}}},getForegroundColor:function(){var a=this;var b=a.getInputElement();if(b){return b.getStyle('color')}else {if(Ext.isObject(a.fieldStyle)){return a.fieldStyle.color}else {return a._foregroundColor}}},onAfterRender:function(){var a=this,c=a.getTagForReadOnly();if(c){var b=a.bodyEl;if(b){a.readOnlyElement=b.createChild({tag:a.getTagForReadOnly(),reference:'readOnlyElement',tabindex:a.inputTabIndex,cls:Ext.baseCSSPrefix+'form-text-default abp-read-only-link'});a.doReadOnlyTagUpdate()}}},getLabelHidden:function(){var a=this;return a.getHideLabel()},setLabelHidden:function(a){var b=this;b.setHideLabel(a)},setFieldFormattedValue:function(b,d,e){var a=this.getRawValue(),c=b(this,d,(Ext.isEmpty(a)?'':a).toString(),e,a);this.setRawValue(c)}});Ext.define('ABPControlSet.base.mixin.Checkbox',{extend:'ABPControlSet.base.mixin.Field',config:{fieldLabel:null},lastClickTime:null,IOS_USER_CLICK_IS_CHANGE_SOURCE_TIMEOUT:300,constructor:function(a){a=a||{};if(a.linkedLabel){this.addCSPlugin(a,'abplinkedlabel')}this.callParent([a])}});Ext.define('ABPControlSet.mixin.Checkbox',{override:'ABPControlSet.base.mixin.Checkbox',updateForegroundColor:function(b){var a=this;if(a.rendered){var c=a.displayEl;if(c){c.setStyle('color',b)}}else {a.on('render',function(){a.displayEl.setStyle('color',b)},a)}},updateBackgroundColor:function(b){var a=this;if(a.rendered){var c=a.displayEl;if(c){c.setStyle('background-color',b)}}else {a.on('render',function(){a.displayEl.setStyle('background-color',b)},a)}},getBackgroundColor:function(){var a=this;if(a.rendered){var b=a.displayEl;if(b){b.getStyle('background-color')}}else {return a._backgroundColor}},getForegroundColor:function(){var a=this;if(a.rendered){var b=a.displayEl;if(b){b.getStyle('color')}}else {return a._foregroundColor}}});Ext.define('ABPControlSet.base.mixin.ComboBox',{extend:'ABPControlSet.base.mixin.Field',config:{publishListValue:!1,listValue:null},constructor:function(a){a=a||{};a.publishes=a.publishes||[];a.publishes.push('listValue');this.callParent([a])}});Ext.define('ABPControlSet.base.mixin.CustomControl',{extend:'ABPControlSet.base.mixin.Component',beginEmbed:function(){var a=this,c=a.getHidden(),b=a.embeddedEl;if(c){a.on({show:a.beginEmbed,single:!0,scope:this,priority:999});return}if(b){a.on('destroy',a.destroyEmbedded);a.embed(a.embeddedEl)}},embed:Ext.emptyFn,embeddedEl:null,destroyEmbedded:function(){delete this.embeddedEl}});Ext.define('ABPControlSet.base.mixin.Grid',{extend:'ABPControlSet.base.mixin.Component',config:{readOnly:null,required:null},constructor:function(a){a=a||{};this.addCSPlugin(a,'abpgrid');this.callParent([a])},getContextMenuData:function(d,b){var a=d.position||{},c=a.column||{},e=ABPControlSet.common.Common.getComponentFromElement(b);return {component:e,record:a.record,rowIdx:a.rowIdx,colIdx:a.colIdx,dataIndex:c.dataIndex}}});Ext.define('ABPControlSet.mixin.Grid',{override:'ABPControlSet.base.mixin.Grid',updateBackgroundColor:function(b){var a=this,c=a.getHeader();if(c){c.setStyle('background-color',b)}else {a.header=a.header||{};a.header.style=a.header.style||{};a.header.style.backgroundColor=b}this.callParent(arguments)}});Ext.define('ABPControlSet.base.mixin.Icon',{extend:'Ext.Component',config:{value:null},setValue:function(a){var b=this.currentIconCls;if(a!==b){this.removeCls(b);this.currentIconCls=a;this.addCls(a)}}});Ext.define('ABPControlSet.base.mixin.Image',{extend:'ABPControlSet.base.mixin.Component',config:{fieldLabel:null,src:null,cropStyle:null},getBackgroundColor:function(){console.log('getBackgroundColor unsupported for abpimage.')},getForegroundColor:function(){console.log('getForegroundColor unsupported for abpimage.')},setBackgroundColor:function(){console.log('setBackgroundColor unsupported for abpimage.')},setForegroundColor:function(){console.log('setForegroundColor unsupported for abpimage.')},updateBackgroundColor:function(a){console.log('setBackgroundColor unsupported for abpimage.')},updateForegroundColor:function(a){console.log('setForegroundColor unsupported for abpimage.')},getTooltipEl:function(){var a=this;if(a.rendered){var b=a.down('#user-image');return b?b.el:a.el}},updatePlaceholder:function(a){var b=this.down('#placeholder');if(b&&!Ext.isString(a)){a=''}b.setHtml(a)},onImageLoaded:function(){var a=this;a.showLoadedImage();a.hidePlaceHolderText();a.hidePlaceHolderImage()},privates:{showLoadedImage:function(){var a=this.down('#user-image');if(a){a.show();a.addCls('loaded')}},hidePlaceHolderText:function(){var a=this.down('#placeholder');if(a){a.hide()}},hidePlaceHolderImage:function(){if(this.getSrc()!==''){var a=this.down('#placeholder-image');a.hide()}},configureImageClassName:function(b,c){var a='';if(b&&b!=='none'){a='cropped';if(b==='oval'){a+=' oval'}}return a},configureDimensions:function(a){if(a.cropStyle==='circle'){var c=a.height||0,d=a.width||0,b=c<d?c:d;return {height:b,width:b}}else {return {height:a.height,width:a.width}}}}});Ext.define('ABPControlSet.mixin.Image',{override:'ABPControlSet.base.mixin.Image',renderConfig:{placeholder:null,readOnly:null},updateSrc:function(b){var a=this;if(a.rendered){var c=a.down('image');if(c){c.setSrc(b)}else {a.items[0].src=b}}else {a.items[0].src=b}},updateReadOnly:function(a){var b=this.down('#image-picker');if(a){this.removeCls('abp-image-upload')}else {this.addCls('abp-image-upload')}b.setReadOnly(a);b.setHidden(a);return this}});Ext.define('ABPControlSet.base.mixin.Panel',{extend:'ABPControlSet.base.mixin.Component',headerTitle:null,config:{headerForegroundColor:null,headerBackgroundColor:null,bodyBackgroundColor:null},setHeaderTitle:function(a){this.setTitle(a)},getHeaderTitle:function(){var b=this;var a=b.getTitle();if(a){return a}else {return b.callParent()}},updateForegroundColor:function(a){ABP.util.Logger.logWarn("Setting an abppanel's foregroundColor is not defined.")},updateBodyForegroundColor:function(a){ABP.util.Logger.logWarn("Setting an abppanel's bodyForegroundColor is not defined.")},getForegroundColor:function(){ABP.util.Logger.logWarn("Getting an abppanel's foregroundColor is not defined.")},getBodyForegroundColor:function(){ABP.util.Logger.logWarn("Getting an abppanel's bodyForegroundColor is not defined.")}});Ext.define('ABPControlSet.mixin.Panel',{override:'ABPControlSet.base.mixin.Panel',updateHeaderForegroundColor:function(b){var a=this;if(a.rendered){a.updateHeaderTitleColor(b)}else {a.on('render',function(){a.updateHeaderTitleColor(b)},a)}},updateHeaderBackgroundColor:function(b){var a=this;if(a.rendered){a.updateHeaderBackColor(b)}else {a.on('render',function(){a.updateHeaderBackColor(b)},a)}},updateBodyBackgroundColor:function(b){var a=this;if(a.rendered){a.updateBodyBackColor(b)}else {a.on('render',function(){a.updateBodyBackColor(b)},a)}},getHeaderBackgroundColor:function(){var c=this;if(c.rendered){var b=c.getHeader();if(b){var a=b.el;if(a&&a.getStyle){return a.getStyle('background-color')}}}else {return this._headerBackgroundColor}},getHeaderForegroundColor:function(){var c=this;if(c.rendered){var b=c.getHeader();if(b){var d=b.getTitle();if(d){var a=d.el;if(a&&a.getStyle){return a.getStyle('color')}}}}else {return this._headerForegroundColor}},getBodyBackgroundColor:function(){var b=this;if(b.rendered){var a=b.body;if(a&&a.getStyle){return a.getStyle('background-color')}}else {return this._backgroundColor}},privates:{updateHeaderBackColor:function(c){me=this;var b=me.getHeader();if(b){var a=b.el;if(a){a.setStyle('background-color',c)}}},updateHeaderTitleColor:function(d){me=this;var b=me.getHeader();if(b){var c=b.getTitle();if(c){var a=c.el;if(a&&a.setStyle){a.setStyle('color',d)}}}},updateBodyBackColor:function(a){me=this;me.setBodyStyle('background-color',a)}}});Ext.define('ABPControlSet.base.mixin.RadioGroup',{extend:'ABPControlSet.base.mixin.Field',config:{store:null,labelField:null,valueField:null},constructor:function(a){a=a||{};this.removeCSPlugin(a,'abpfield');this.addCSPlugin(a,'abpradiogroup');this.callParent([a])},updateStore:function(a){if(Ext.isString(a)){var b=this.up('form'),c=b.getViewModel();a=c.getStore(a)}if(Ext.isObject(a)){if(a.getCount()>0){this.onStoreUpdate()}else {a.on('datachanged',this.onStoreUpdate,this)}}},updateRadioItems:function(){var a=this,f=a.getLabelField(),g=a.getValueField(),i=a.getStore(),e=[],b,d=i.getRange(),h=d.length;a.removeAll();for(var c=0;c<h;c++){b=d[c];e.push({inputValue:b.get(g),boxLabel:b.get(f)})}a.add(e)}});Ext.define('ABPControlSet.mixin.RadioGroup',{override:'ABPControlSet.base.mixin.RadioGroup',constructor:function(a){a=a||{};if(a.required===!0){a.allowBlank=!1}this.callParent([a])},getTooltipEl:function(){return this.el},updateRequired:function(a){var b=this;a=a===!0?!0:!1;b.allowBlank=!a;if(b.rendered){b.validate()}},updateForegroundColor:function(b){var a=this;if(a.rendered){a.__renderedRadioGroupUpdateForegroundColor(b)}else {a.on('afterrender',function(){a.__renderedRadioGroupUpdateForegroundColor(b)},a)}},__renderedRadioGroupUpdateForegroundColor:function(f){var a=this;var c=a.items&&a.items.getRange?a.items.getRange():a.items||[],e=c.length;var d=Ext.Array.pluck(c,'displayEl');for(var b=0;b<e;b++){d[b].setStyle('color',f)}},updateBackgroundColor:function(b){var a=this;if(a.rendered){a.__renderedRagioGroupUpdateBackgroundColor(b)}else {a.on('afterrender',function(){a.__renderedRagioGroupUpdateBackgroundColor(b)},a)}},__renderedRagioGroupUpdateBackgroundColor:function(f){var a=this;var c=a.items&&a.items.getRange?a.items.getRange():a.items||[],e=c.length;var d=Ext.Array.pluck(c,'displayEl');for(var b=0;b<e;b++){d[b].setStyle('background-color',f)}}});Ext.define('ABPControlSet.base.mixin.SegmentedButton',{extend:'ABPControlSet.base.mixin.Component',config:{}});Ext.define('ABPControlSet.base.mixin.Separator',{extend:'ABPControlSet.base.mixin.Component',afterRender:function(){if(this.getWidth()>this.getMaxWidth()){this.setWidth(this.getMaxWidth())}else {if(this.getWidth()<this.getMinWidth()){this.setWidth(this.getMinWidth())}}if(this.spacing){this.setMargin(this.spacing)}}});Ext.define('ABPControlSet.base.mixin.TabPanel',{extend:'ABPControlSet.base.mixin.Component',updateBackgroundColor:function(a){var c=this,b=c.getTabBar();b.setStyle('background-color',a);this.callParent(arguments)}});Ext.define('ABPControlSet.base.mixin.Text',{extend:'ABPControlSet.base.mixin.Field',config:{}});Ext.define('ABPControlSet.mixin.Text',{override:'ABPControlSet.base.mixin.Text'});Ext.define('ABPControlSet.base.mixin.TextArea',{extend:'ABPControlSet.base.mixin.Field',config:{spellcheck:!1}});Ext.define('ABPControlSet.base.mixin.TextDisplay',{extend:'ABPControlSet.base.mixin.Field',config:{markupType:null}});Ext.define('ABPControlSet.util.Markdown',{singleton:!0,parseMarkdown:function(a){this.initializeCustomMarked();if(a&&a.length){marked.setOptions({sanitize:!0});return marked(a)}else {return a}},privates:{customRenderingInitialized:!1,initializeCustomMarked:function(){if(!this.customRenderingInitialized){var a=new marked.Renderer();a.link=function(b,a,d){var c=marked.Renderer.prototype.link.call(this,b,a,d);return c.replace('<a',"<a target='_blank' ")};marked.setOptions({renderer:a});this.customRenderingInitialized=!0}}}});Ext.define('ABPControlSet.mixin.TextDisplay',{override:'ABPControlSet.base.mixin.TextDisplay',requires:['ABPControlSet.util.Markdown'],updateRequired:Ext.emptyFn,updateMarkupType:function(b){var a=this.getValue();if(b==='markdown'){this.setHtml(ABPControlSet.util.Markdown.parseMarkdown(a));this.addCls('abp-markdown')}else {this.setHtml(a);this.removeCls('abp-markdown')}}});Ext.define('ABPControlSet.base.mixin.Trigger',{extend:'Ext.Mixin',config:{tooltip:null,disabled:null,icon:null,hidden:null},mixinConfig:{after:{setDisabled:'afterSetDisabled'}},afterSetDisabled:Ext.emptyFn,updateHidden:function(a){this.hidden=a;if(a){this.hide();if(this.component){this.component.hidden=a;this.component.hide()}}else {this.show();if(this.component){this.component.hidden=a;this.component.show()}}},updateTooltip:function(a){if(this.component){if(this.component.setTooltip){this.component.setTooltip(a)}else {this.component.tooltip=a}}},updateIcon:function(a){if(this.component){if(this.component.setIconCls){this.component.setIconCls(a)}else {this.component.iconCls=a}}}});Ext.define('ABPControlSet.mixin.Trigger',{override:'ABPControlSet.base.mixin.Trigger',afterSetDisabled:function(){var a=this.component,b=this.getDisabled();if(a){if(a.setDisabled){a.setDisabled(b);var c=a.focusEl;if(c){c.setTabIndex(b?-1:0)}}else {a.disabled=b;a.tabIndex=b?-1:0}}}});Ext.define('ABPControlSet.mixin.Tooltip',{extend:'Ext.Mixin',config:{tooltip:null},constructor:function(a){a.onRender=this.onRenderComponent;this.callParent([a])},onRenderComponent:function(){var b=this;var a=b.getTooltip();if(a){b.setTooltip(a,!0)}this.superclass.onRender.apply(this,arguments)},getTooltipEl:function(){return this.el},getTooltip:function(){var a=this.callParent();if(Ext.isObject(a)){return a.getText?a.getText:a.getHtml?a.getHtml():a.text||a.html}return a},clearTip:function(){var b=this,a=this.getTooltipEl();if(a){if(Ext.quickTipsActive&&Ext.isObject(b.getTooltip())){Ext.tip.QuickTipManager.unregister(a)}else {if(a.dom){a.dom.removeAttribute('qtip')}}}},setTooltip:function(a,d){var c=this,b=c.rendered?this.getTooltipEl():null;if(b){if(!d||!a){c.clearTip()}if(a){if(!Ext.isObject(a)){a={text:a}}if(Ext.quickTipsActive&&Ext.isObject(a)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.id},a))}else {b.dom.setAttribute('qtip',a)}}}this.callParent([a])}});Ext.define('ABPControlSet.layout.Accordion',{extend:'Ext.layout.container.Accordion',alias:'layout.abpaccordion',type:'abpaccordion',fill:!0,titleCollapse:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:undefined,animate:!0,activeOnTop:!1,multi:!1,wrapOver:!0,beforeRenderItems:function(d){var c,e=d.length,a;for(var b=0;b<e;b++){a=d[b];if(!Ext.isFunction(a.addBodyCls)){a.addBodyCls=Ext.emptyFn}}this.callParent(arguments);for(var b=0;b<e;b++){a=d[b];c=a.getHeader?a.getHeader():null;if(a.titleCollapse&&c&&c.toggleCls){c.toggleCls('abp-accordion-title-collapse',!0)}}},updatePanelClasses:function(g){var e=g.visibleItems,f=e.length,d=!0,b,c,a;for(b=0;b<f;b++){c=e[b];a=c.header;if(a){a.addCls(Ext.baseCSSPrefix+'accordion-hd');if(d){a.removeCls(Ext.baseCSSPrefix+'accordion-hd-sibling-expanded')}else {a.addCls(Ext.baseCSSPrefix+'accordion-hd-sibling-expanded')}if(b+1===f&&c.collapsed){a.addCls(Ext.baseCSSPrefix+'accordion-hd-last-collapsed')}else {a.removeCls(Ext.baseCSSPrefix+'accordion-hd-last-collapsed')}d=c.collapsed}}}});Ext.define('ABPControlSet.common.CSSGrid',{extend:'Ext.Mixin',responsiveGridTplFormat:'1fr',gridTplFormat:'1fr',gridTplFormatIE:'1fr',defaultTopGroupName:'__0__',fillRowWidth:!0,columnPrecedence:!1,defaultMinColumnWidth:180,gridContainerStyled:!1,baseCls:'css-grid-container',baseResponsiveCls:'css-grid-container-responsive',groupCls:'css-grid-container-group',gridItemCls:'css-grid-container-item',itemBodyCls:'css-grid-container-item-body',responsive:Ext.toolkit==='modern'?!0:!1,fillEmptySpace:!1,baseColumnWidth:null,maxColumns:null,minColumnWidth:1,columnSpacing:null,rowSpacing:null,defaultSpacing:4,contentJustify:null,containerSpacing:null,runCalculations:function(c,g){var a=this,b=a.getTargetWidth(),d=a.getRenderTarget();b=Ext.isString(b)?parseInt(b):b;if(d&&!Ext.isEmpty(b)){if(a.responsive&&a.calculateLayoutInfo(c,b,g)){var e=a.getGroups(c);for(var f in e){e[f].configured=e[f].calculated=!1}a.calculateItems(c,a.columnWidth,a.columns,a.defaultTopGroupName);a.updateGridContainer(d,a.columnWidth,a.columns)}else {if(!a.responsive){a.calculateLayoutInfo(c,b);a.calculateFill(c);a.updateGridContainer(d,a.columnWidth,a.columns);a.calculateItems(c)}}}},getTargetWidth:function(){var b=this;if(Ext.toolkit==='modern'){var e=b.getRenderTarget(),c=e?e.el:null;return c?c.getWidth():undefined}else {var f=b.owner;if(f.bodyResponsiveWidth&&f.bodyFixedWidth){var d=b.gridCt;return d.getStyle('width')||d.getWidth()}else {var a=b.ownerContext.targetContext;return a.getProp('width')||a.getStyle('width')||(a.lastBox?a.lastBox.width:a.getDomProp('width'))}}},findAllAt:function(d,f,r){var t=this,s=r.length,a,q,o=[],k,n,c,g,h,b,e=f,l=!0,p=!1,i=!1,j=!1;for(var m=0;m<s;m++){a=r[m];q=Ext.toolkit==='classic'?a instanceof Ext.form.Label:a instanceof Ext.Label;c=(d?a.responsiveCol:a.responsiveRow)||0;g=(d?a.responsiveColSpan:a.responsiveRowSpan)||1;if(c===f||c<f&&g>1&&c+g-1>=f){j=a.responsiveFillViaChild===!0?!0:!1;i=j||(d?Ext.isBoolean(a.responsiveFillWidth)?a.responsiveFillWidth:!!a.responsiveFill:Ext.isBoolean(a.responsiveFillHeight)?a.responsiveFillHeight:!!a.responsiveFill);l=l===!1?!1:i;e=i?c<e?c:e:e;h=!1;b=d?a.width||a.responsiveWidth||a.minWidth:a.height||a.responsiveHeight||a.minHeight;p=g===1&&c===f;k=t.getItemSpacing(a);n=d?k.left:k.top;if(!Ext.isEmpty(b)){h=Ext.isString(b)&&b.indexOf('%')!==-1;b=parseInt(b)/g+(h?'%':0);b=Ext.isNumber(b)?Math.round(b+n*(d&&q?1:2)):b}o.push({single:p,fillViaChild:j,fill:i,allFill:l,earliestFillIndex:e,size:b,isPercent:h,item:a})}}return o},translateItemsForResponsiveTemplate:function(d,p){var q=this,o=p.length,a,n,l=[],i,k,m,f,b,c=0,j=!0,g=!1,h=!1;for(var e=0;e<o;e++){a=p[e];n=Ext.toolkit==='classic'?a instanceof Ext.form.Label:a instanceof Ext.Label;m=(d?a.responsiveColSpan:a.responsiveRowSpan)||1;h=a.responsiveFillViaChild===!0?!0:!1;g=h||(d?Ext.isBoolean(a.responsiveFillWidth)?a.responsiveFillWidth:!!a.responsiveFill:Ext.isBoolean(a.responsiveFillHeight)?a.responsiveFillHeight:!!a.responsiveFill);j=j===!1?!1:g;c=g?e<c?e:c:c;f=!1;b=d?a.width||a.responsiveWidth||a.minWidth:a.height||a.responsiveHeight||a.minHeight;i=q.getItemSpacing(a);k=d?i.left:i.top;if(!Ext.isEmpty(b)){f=Ext.isString(b)&&b.indexOf('%')!==-1;b=parseInt(b)/m+(f?'%':0);b=Ext.isNumber(b)?Math.round(b+k*(d&&n?1:2)):b}l.push({single:o===1,fillViaChild:h,fill:g,allFill:j,earliestFillIndex:c,size:b,isPercent:f,item:a})}return l},calculateMaxRowAndColumn:function(l){var b=this,j=l.length,a,f,d,i=0,g,e,k=0,c=!0;for(var h=0;h<j;h++){a=l[h];if(!Ext.isEmpty(a.responsiveCol)||!Ext.isEmpty(a.responsiveColSpan)){c=!1}f=a.responsiveCol||0;d=a.responsiveColSpan||1;if(f+d>i){b.maxColumn=i=f+d}if(!Ext.isEmpty(a.responsiveRow)||!Ext.isEmpty(a.responsiveRowSpan)){c=!1}g=a.responsiveRow||0;e=a.responsiveRowSpan||1;if(g+e>k){b.maxRow=k=g+e}}if(c){b.maxRow=b.maxColumn=j}},calculateLayoutInfo:function(b,d,e){var a=this,k=a.responsive;if(k){var c=!1,f=a.oldWidth,h=a.defaultTopGroupName,i=a.columns,j=a.columnWidth;if(!Ext.isEmpty(f)&&d===f&&e!==!0){c=!1}else {a.calculateMaxRowAndColumn(b);var g=a.getColumnsAndColumnWidth(b,d,a.maxColumns,a.baseColumnWidth);a.columns=g.columns;a.columnWidth=g.columnWidth;if(e===!0||(a.columns!==i||a.columnWidth!==j)){c=!0}a.configureItems(b,h,a.columns,a.columnWidth)}if(c){a.oldWidth=d}return c}else {a.calculateMaxRowAndColumn(b);a.columnStyle=a.calculateColumnsTemplate(b);a.rowStyle=a.calculateRowsTemplate(b)}},calculateRowsTemplate:function(c){c=c||[];var d=this,e='',f,a={used:!1,earliestFillIndex:0},g=d.maxRow;for(var b=0;b<=g-1;b++){f=d.findAllAt(!1,b,c);if(a.used&&a.earliestFillIndex<b){a.used=!1}e+=d.calculateItemTemplate(f,!1,a)+' '}return e},calculateColumnsTemplate:function(d){d=d||[];var e=this,c='',f,g=e.maxColumn,a={used:!1,earliestFillIndex:g-1};for(var b=g-1;b>=0;b--){f=e.findAllAt(!0,b,d);if(a.used&&a.earliestFillIndex<b){a.used=!1}c=' '+e.calculateItemTemplate(f,!0,a)+c}return c},calculateItemTemplate:function(h,m,l){h=h||[];var i=h.length,f='';if(i){var d,e,t,b,g,j,n,a,k,c,s,q,p,r;for(var o=0;o<i;o++){d=h[o];e=d.size;if(d.allFill||i===1&&d.single===!0&&(d.fill||d.fillViaChild===!0)){k=!0}if(i===1&&d.single===!0&&!Ext.isEmpty(e)){t=!0;if(d.isPercent&&Ext.isString(a)&&a.indexOf('%')!==-1){p=parseInt(a);a=p>e?a:e+'%'}else {if(e>a){a=e}else {if(Ext.isEmpty(a)){a=e}}}}if(d.fill===!0||d.fillViaChild===!0){g=m?g>d.earliestFillIndex?d.earliestFillIndex:g:g<d.earliestFillIndex?d.earliestFillIndex:g;n=s=!0;if(d.isPercent&&Ext.isString(c)&&c.indexOf('%')!==-1){q=parseInt(c);c=q>e?c:e+'%'}else {if(e>c||Ext.isEmpty(c)){c=e}}}if(d.isPercent&&Ext.isString(b)&&b.indexOf('%')!==-1){r=parseInt(b);b=r>e?b:e+'%'}else {if(e>b){b=e}else {if(Ext.isEmpty(b)){b=e}}}}if((n||s)&&!l.used){l.earliestFillIndex=g;j=!0;l.used=!0}if(Ext.isString(b)&&b.indexOf('%')!==-1){b=b+'%';if(b==='100%'){b='1fr'}}else {if(Ext.isNumber(b)){b=b+'px'}else {b=null}}if(Ext.isString(c)&&c.indexOf('%')!==-1){c=c+'%';if(c==='100%'){c='1fr'}}else {if(Ext.isNumber(c)){c=c+'px'}else {c=null}}if(b==='0px'||b==='0%'){f='0px'}else {if(t){if(Ext.isString(a)&&a.indexOf('%')!==-1){a=a+'%';if(a==='100%'){a='1fr'}}else {if(Ext.isNumber(a)){a=a+'px'}else {a=null}}if(m){f=Ext.isNumber(parseInt(a))?a:'auto'}else {f=Ext.isNumber(parseInt(a))?a?a:'auto':'max-content'}if(k){f='minmax('+f+', 1fr)'}}else {if(j||k){f=Ext.isNumber(parseInt(c))?c:c?'auto':'min-content';f='minmax('+f+', 1fr)'}else {if(m){f=Ext.isNumber(parseInt(b))?'max-content':j?'0px':'min-content'}else {f=Ext.isNumber(parseInt(b))?b:n?'auto':'min-content'}}}}}else {f='0px'}return f},calculateFill:function(d){var e=this,a,f=d.length,b;if(Ext.toolkit==='modern'){a=e.getContainer()}else {a=e.owner}for(var c=0;c<f;c++){b=d[c];if((b.responsiveFill||b.responsiveFillViaChild)&&a.responsiveFill!==!0&&a.responsiveFillViaChild!==!0){a.responsiveFillViaChild=!0}}},determineItemsWithColumnRowSorting:function(a){return a.sort(this.columnAndRowSort)},columnAndRowSort:function(a,b){if(a.responsiveRow===b.responsiveRow){if(a.responsiveCol<b.responsiveCol){return -1}else {if(a.responsiveCol===b.responsiveCol){return 0}return 1}}else {if(a.responsiveRow<b.responsiveRow){return -1}else {if(a.responsiveRow===b.responsiveRow){return 0}return 1}}},isColumnAndRowSortable:function(c){var b,a,d=c.length;for(b=0;b<d;b++){a=c[b];if(Ext.isEmpty(a.responsiveCol)||Ext.isEmpty(a.responsiveColSpan)||Ext.isEmpty(a.responsiveRow)||Ext.isEmpty(a.responsiveRowSpan)){return !1}}return !0},calculateItems:function(o,v,x,w){if(this.responsive){this.rowStyle=this.calculateResponsiveItems(o,v,x,w)}else {var n=this,p=o.length,a,b,e,g,i,d,f,y,h,l,j,m,k,c,s,r,u=n.maxRow,t=n.maxColumn;for(var q=0;q<p;q++){a=o[q];h=Ext.toolkit==='modern'?a.bodyWrapElement:a.bodyEl;c=null;g=Ext.toolkit==='classic'?a instanceof Ext.form.Label:a instanceof Ext.Label;i=n.getItemSpacing(a);b={};m=(a.responsiveRow||0)+1;k=a.responsiveRowSpan||1;l=(a.responsiveCol||0)+1;j=a.responsiveColSpan||1;s=p!=1&&a.responsiveFill&&m+(k-1)>=u?!0:!1;r=p!=1&&a.responsiveFill&&l+(j-1)>=t?!0:!1;if(Ext.isIE){Ext.apply(b,{'-ms-grid-row':m,'-ms-grid-row-span':k,'-ms-grid-column':l,'-ms-grid-column-span':j});if(a.cellAlign||g){Ext.apply(b,{'-ms-grid-column-align':a.cellAlign||(g?'flex-end':'safe')})}}else {Ext.apply(b,{'grid-row-start':m,'grid-row-end':'span '+(s?'end':k),'grid-column-start':l,'grid-column-end':'span '+(r?'end':j)});if(a.cellAlign||g){Ext.apply(b,{'justify-self':a.cellAlign||(g?'flex-end':'safe')});if(Ext.browser.is.Firefox&&g){Ext.apply(b,{'align-self':'center'})}}}d=a.responsiveMinHeight||a.minHeight||0;if(Ext.isString(d)&&d.indexOf('%')!==-1){}else {if(Ext.isNumber(d)){d=d+'px'}}e=a.responsiveMinWidth||a.minWidth||0;if(Ext.isString(e)&&e.indexOf('%')!==-1){}else {if(Ext.isNumber(e)){e=e+'px'}}f=a.responsiveWidth||a.width;if(Ext.isString(f)&&f.indexOf('%')!==-1){}else {if(Ext.isNumber(f)){f=f+'px'}}itemHeight=a.responsiveHeight||a.height;if(Ext.isString(itemHeight)&&itemHeight.indexOf('%')!==-1){}else {if(Ext.isNumber(itemHeight)){itemHeight=itemHeight+'px'}}if((Ext.toolkit==='modern'?a instanceof Ext.field.Field:a instanceof Ext.form.field.Base)&&h){c=c||{};if(a.responsiveFill===!0){Ext.apply(c,{'width':'100%'})}else {if(a.responsiveFillWidth===!0){Ext.apply(c,{'width':'100%'})}else {Ext.apply(c,{'width':f})}}if(!Ext.isEmpty(e)){Ext.apply(c,{'minWidth':e})}if(!Ext.isEmpty(d)){Ext.apply(c,{'minHeight':d})}if(h){if(h.dom){Ext.apply(h.dom.style,c)}else {h.setStyle(c)}}}if(!Ext.isEmpty(e)&&Ext.isEmpty(b.minWidth)){b.minWidth=e}if(!Ext.isEmpty(d)&&Ext.isEmpty(b.minHeight)){b.minHeight=d}if(!Ext.isEmpty(f)&&Ext.isEmpty(b.width)){b.width=f}if(!Ext.isEmpty(itemHeight)&&Ext.isEmpty(b.height)){b.height=itemHeight}if(a.responsiveFill===!0||a.responsiveFillViaChild==!0){b.width='100%';b.height=(Ext.toolkit==='modern'?a instanceof Ext.field.Field:a instanceof Ext.form.field.Base)?'auto':'100%'}else {if(Ext.isEdge||Ext.isIE){b.minWidth='calc(100% - '+(i.left+i.right)+'px)'}}if(!(a instanceof Ext.Container)||a.isLabelable){b[Ext.browser.is.Firefox&&!(a instanceof Ext.Button)?'padding':'margin']=n.getItemSpacingStyle(i)}if(a.setStyle){a.setStyle(b)}else {if(a.protoEl&&a.protoEl.setStyle){a.protoEl.setStyle(b)}}}}},calculateResponsiveItems:function(o,r,g,H){var b=this,a,v,u,t,z=!1,A=-1,p=-1,D=o.length,e,i,l,f=[],F,G,I=b.groups,J,w=Ext.toolkit==='modern',j=0,B={used:!1,earliestFillIndex:0},x=!1,s='',n,E,d=0,h=[],c,q,m;o=b.determineItemsWithColumnRowSorting(o);if(Ext.isEmpty(r)||Ext.isEmpty(g)){return}for(var y=0;y<D;y++){a=o[y];u=a.responsiveRow;v=a.el;m=b.getItemSpacing(a);v.toggleCls(b.gridItemCls,!0);if(d+a.colspan>g||u>A&&p===j+1){x=f.length===0;f=x?[a]:f;d=0;j++;for(c=0;c<g;c++){if(h[c]>0){h[c]--}}l=b.translateItemsForResponsiveTemplate(!1,f);n=b.calculateItemTemplate(l,!1,B);s+=' '+n;f=x?[]:[a]}else {while(d>=g||h[d]>0){if(d>=g){for(c=0;c<g;c++){if(h[c]>0){h[c]--}}}else {d++}}f.push(a)}var C=!!(a.layout?a.layout.contentJustify:!1);e={'justify-self':a.cellAlign||'stretch','align-self':a.rowAlign,'-ms-grid-row':(j+1).toString(),'-ms-grid-column-span':Ext.isIE?a.colspan||1:undefined,'-ms-grid-column':Ext.isIE?(d+1).toString():undefined,'grid-column-start':(d+1).toString(),'grid-column-end':'span '+a.colspan,'grid-row-start':(j+1).toString(),'width':C?'100%':'auto'};if(w?a instanceof Ext.field.Field:a instanceof Ext.form.field.Base){i=w?a.bodyWrapElement:a.bodyEl;if(i){i.toggleCls(b.itemBodyCls,!0)}}else {if(a instanceof Ext.Container){i=w?a.bodyWrapElement:a.body;if(i){i.toggleCls(b.itemBodyCls,!0)}}}if(Ext.isEdge){e.minWidth='100%'}if(a.fixedWidth){var k=a.responsiveWidth||a.responsiveMaxWidth||a.responsiveMinWidth;if(Ext.isString(k)){e['max-width']=k}else {if(k>=r*g){k=r*g}e['max-width']=k+'px'}}t=a instanceof Ext.Container;if(!Ext.isEmpty(b.containerSpacing)&&t){e['margin-left']=z&&p===j?Ext.isString(b.containerSpacing)?b.containerSpacing:b.containerSpacing+'px':'0px'}z=t;q=b.getItemSpacingStyle(m);if(a instanceof Ext.Button){e.width='calc(100% - '+(m.right+m.left)+'px)';e.margin=q}else {e.padding=q}v.setStyle(e);for(c=a.colspan||1;c;--c){h[d]=a.rowspan||1;++d}A=u;p=j}if(f.length>0){l=b.translateItemsForResponsiveTemplate(!1,f);n=b.calculateItemTemplate(l,!1,B);s+=' '+n}return s},getItemSpacing:function(b){var g=this,a=b.el?b.el:b.element,f=b instanceof Ext.Button,h=g.columnSpacing,i=g.rowSpacing,c=Ext.dom.Element.parseBox(g.defaultSpacing),e=Ext.isEmpty(b.spacing)?c:Ext.dom.Element.parseBox(b.spacing),n=Ext.toolkit==='classic'?b instanceof Ext.form.Label:b instanceof Ext.Label,d={};if(!Ext.isEmpty(h)){c.left=c.right=h}if(!Ext.isEmpty(i)){c.top=c.botton=i}if(a){var m=(f?a.getMargin('t'):a.getPadding('t'))||undefined,k=(f?a.getMargin('r'):a.getPadding('r'))||undefined,j=(f?a.getMargin('b'):a.getPadding('b'))||undefined,l=(f?a.getMargin('l'):a.getPadding('l'))||undefined;if(m){d.top=m}if(k){d.right=k}if(j){d.bottom=j}if(l){d.left=l}}Ext.applyIf(e,c);Ext.apply(e,d);if(n){e.right=0}return e},getItemSpacingStyle:function(a){return a.top+'px '+a.right+'px '+a.bottom+'px '+a.left+'px'},configureItems:function(f,u,c,l){var e=this,d=0,r=e.groups||e.getGroups(f),s=f.length,n,m,b,q,g,p,o,i,k=s>0?f[0].responsiveRow:null,a=c,h=0,t=e.fillRowWidth,j=!1;for(;d<s;d++){n=f[d];g=!1;q=0;p=n.responsiveGroup;b=r[p];if(b&&p!==u){if(b.configured){continue}else {g=e.getGroupColSpan(b.items,a,l)}}if(g){if(g>a){if(a!==c){if(t){e.stretchItemsForRow(f,h,a,c,d,l)}a=c;h=d;d--;j=!0;continue}else {g=g>c?c:g;q=g*l}}else {q=g*l}m=e.getColumnsAndColumnWidth(b.items,q);b.columns=m.columns;b.columnWidth=m.columnWidth;b.colspan=g;e.configureItems(b.items,p,m.columns,m.columnWidth);e.updateGridContainer(b.el,m.columnWidth,m.columns);b.configured=!0;if(r[b.parentGroup]&&!r[b.parentGroup].configured){r[b.parentGroup].configured=e.isParentGroupFinished('configured',b.parentGroup)}a=a-b.colspan;if(a>0){j=!1}else {j=!0;h=d;a=c}}else {i=Ext.isEmpty(n.responsiveRow)?null:n.responsiveRow;o=e.getItemColSpan(n,a,l);if(a===c&&o>=c){n.colspan=c;h=d+1;k=f[h]?f[h].responsiveRow:i;j=!0}else {if(o>a||i!==null&&k===null||i!==null&&k!==null&&i>k){if(t){e.stretchItemsForRow(f,h,a,c,d,l)}a=c;h=d;d--;k=i;j=!1}else {n.colspan=o;a-=o;if(a>0){k=i;j=!1}else {a=c;h=d;k=f[d+1]?f[d+1].responsiveRow:i;j=!0}}}}}if(s>0&&t&&!j){e.stretchItemsForRow(f,h,a,c,s,l)}},updateGridContainer:function(d,k,g){var a=this,f=a.owner||a.getContainer(),m=d.dom?d.dom:d,e=m?m.style:null,l=d?d.getWidth():null;if(e){var b={};if(!a.gridContainerStyled){d.toggleCls(a.baseCls,!0);if(a.responsive){d.toggleCls(a.baseResponsiveCls,!0)}a.gridContainerStyled=!0}var c=a.columnStyle,i=!1,h=a.rowStyle;if(a.responsive){if(a.contentJustify){b['justify-content']=a.contentJustify}if(a.fixedColumnWidth){c=Ext.String.repeat(a.fixedColumnWidth+'px',g,' ')}else {if(l&&l<k*g){i=!0}c=Ext.String.repeat(Ext.String.format(a.responsiveGridTplFormat,k),i?g-1:g,' ');if(g===1){c='100%'}else {if(i){c+=' 1fr'}}}if(f.bodyFixedWidth&&f.bodyResponsiveWidth){var j=f.bodyResponsiveWidth||f.bodyResponsiveWidth||f.bodyResponsiveWidth;if(Ext.isString(j)){b['max-width']=j}else {b['max-width']=j+'px'}}else {b['max-width']='100%'}}if(f.responsiveFillViaChild&&e['height']!=='100%'){b['height']='100%'}if(Ext.isIE&&c!==e['-ms-grid-columns']){b['-ms-grid-columns']=c}else {if(c!==e['grid-template-columns']){b['grid-template-columns']=c}}if(Ext.isIE&&h!==e['-ms-grid-rows']){b['-ms-grid-rows']=h}else {if(h!==e['grid-template-rows']){b['grid-template-rows']=h}}if(!Ext.Object.isEmpty(b)){d.setStyle(b)}}},getColumnWidth:function(f,g){var c=this,a,e,d,h=f.length,b=[];for(d=0;d<h;d++){e=f[d];if(Ext.isEmpty(e.responsiveColSpan)){a=e.responsiveWidth;if(Ext.isString(a)&&a.indexOf('%')===-1){a=parseInt(a)}if(a&&!isNaN(a)){b.push(c.nearestEven(a))}}}if(b.length>0){b.push(c.nearestEven(g));return Math.max(c.findGCD(b),c.minColumnWidth)}},findGCD:function(a){if(Object.prototype.toString.call(a)!=='[object Array]'){return !1}var c,b,e;c=a.length;if(!c){return null}b=a[0];for(var d=1;d<c;d++){e=a[d];b=this.gcdTwo(b,e)}return b},gcdTwo:function(b,a){if(typeof b!=='number'||typeof a!=='number'){return !1}b=Math.abs(b);a=Math.abs(a);while(a){var c=a;a=b%a;b=c}return b},getLargestColumnWidth:function(e){var a=0,c,b,f=e.length,d=null;for(c=0;c<f;c++){b=e[c];if(!Ext.isEmpty(b.responsiveColSpan)){a=b.responsiveWidth||0;a=a/(b.responsiveColSpan||1);a=isNaN(a)?1:a;if(a>d){d=a}}}return d},nearestEven:function(a){return 2*Math.round(a/2)},getItemColSpan:function(a,e,d){var b,c=0;if(!Ext.isEmpty(a.responsiveColSpan)){b=a.responsiveColSpan;var g=e*d,f=b*d;if(g<=f){b=e}if(Ext.isString(a.responsiveWidth)&&a.responsiveWidth.indexOf('%')!==-1){var h=parseInt(a.responsiveWidth.replace('%',''))/100;c=Math.round(h*e);f=c*d;if(g<f){b=e}else {b=c}}else {if(Ext.isNumber(a.responsiveWidth)){c=Math.round(a.responsiveWidth/d)||1;f=c*d;if(g<=f){b=c}}}}else {if(Ext.isString(a.responsiveWidth)&&a.responsiveWidth.indexOf('%')!==-1){var h=parseInt(a.responsiveWidth.replace('%',''))/100;b=Math.round(h*e)}else {if(Ext.isEmpty(a.responsiveWidth)){b=e}else {b=Math.round(a.responsiveWidth/d)||1;if(a.responsiveWidth>d*e){b+=1}}}if(Ext.isNumber(a.responsiveMinWidth)){c=Math.round(a.responsiveMinWidth/d)||1}else {if(Ext.isNumber(a.minWidth)){c=Math.round(a.minWidth/d)||1}}b=c>b?c:b}return b},stretchItemsForRow:function(m,g,b,p,e){var r=this,i=0,a,n,q=r.groups,l,c,f,d=0,j=0,k=!0,o=!1,h;if(e-g===1){n=m[g];n.colspan=p;l=q[n.responsiveGroup];if(l){l.colspan=p}}else {for(a=g;a<e;a++){if(!m[a].fixedWidth){i++}}if(i>0){d=b/i;j=d%1}else {o=!0}for(a=g;a<e;a++){c=m[a];f=c.colspan;if(!c.fixedWidth){if(d>0){if(b>0){h=j!==0?k?Math.floor(d):Math.ceil(d):d;if(a==e-1){c.colspan=f+b;b=0}else {c.colspan=f+h;b-=h}if(j!==0){k=!k}}}}else {if(o&&a==e-1){c.colspan=f+b}}}}},isParentGroupFinished:function(g,f){var i=this,a,d=i.groups,c=d[f],e=c.ownItems?c.ownItems.length:0,b=c.groups,h=b?b.length:0;if(e){return !1}for(a=0;a<h;a++){if(!d[b[a]][g]){return !1}}return !0},isPartOfGroup:function(c,a){var f=this,e=f.groups,d=c.responsiveGroup,b=e[c.responsiveGroup];if(b){return !!(d===a||Ext.Array.contains(b.groups,a))}return !1},getGroups:function(k){var e=this,a,c,f=e.defaultTopGroupName,h,b=e.groups||{},l=k.length,d,g;if(Ext.toolkit==='modern'){var j=e.getContainer();c=j.bodyElement?j.bodyElement:j}else {c=e.getRenderTarget()}c=c.dom||c;for(var i in b){b[i].ownItems=[];b[i].items=[];b[i].groups=[]}for(g=0;g<l;g++){a=k[g];h=c;a.responsiveParentGroup=a.responsiveParentGroup||f;if(!Ext.isEmpty(a.responsiveParentGroup)){if(!b[a.responsiveParentGroup]){if(a.responsiveParentGroup===f){d=c}else {d=document.createElement('div')}h=d;b[a.responsiveParentGroup]={el:d,color:'#'+Math.floor(Math.random()*16777215).toString(16),items:[],groups:[],ownItems:[]}}else {h=b[a.responsiveParentGroup].el}b[a.responsiveParentGroup].items.push(a)}if(!Ext.isEmpty(a.responsiveParentGroup)&&!Ext.Array.contains(b[a.responsiveParentGroup].groups,a.responsiveGroup)){b[a.responsiveParentGroup].groups.push(a.responsiveGroup)}a.responsiveGroup=a.responsiveGroup||f;if(!Ext.isEmpty(a.responsiveGroup)){if(!b[a.responsiveGroup]){if(a.responsiveGroup===f){d=c}else {d=document.createElement('div')}b[a.responsiveGroup]={el:d,parentGroup:a.responsiveParentGroup,color:'#'+Math.floor(Math.random()*16777215).toString(16),items:[],groups:[],ownItems:[]}}b[a.responsiveGroup].items.push(a);b[a.responsiveGroup].ownItems.push(a)}}return e.groups=b},getGroupColSpan:function(a,g,h){var b=this;if(b.isColumnAndRowSortable(a)){return b.getLargestColumnCount(a)}else {var f,e=0,d,i=a.length;for(var c=0;c<i;c++){f=a[c];d=b.getItemColSpan(f,g,h);e+=d}return e}},getLargestColumnCount:function(f){var c=0,b,g,e,d,h=f.length,a=0;for(b=0;b<h;b++){d=f[b];g=(d.responsiveCol||0)+1;e=d.responsiveColSpan||1;c=g+(e-1);if(c>a){a=c}}a=a===0?h:a;return a},getColumnsAndColumnWidth:function(f,c,b,a){var e=this,d=b?b:undefined,j=Math.max(Math.floor(e.getLargestColumnCount(f)),1);if(e.fixedColumnWidth){a=e.fixedColumnWidth}else {if(!Ext.isEmpty(a)&&Ext.isEmpty(b)){b=Math.max(Math.floor(c/a),1)}else {if(!Ext.isEmpty(b)&&Ext.isEmpty(a)){a=Math.min(Math.floor(c/b),c)}else {if(Ext.isEmpty(b)&&Ext.isEmpty(a)){a=e.getColumnWidth(f,c);if(Ext.isEmpty(a)){d=d||j;var i=Math.max(Math.floor(c/e.defaultMinColumnWidth),1);var h=Math.max(Math.floor(c/d),1);a=e.getLargestColumnWidth(f);a=a<h?a:h;a=e.defaultMinColumnWidth>a?e.defaultMinColumnWidth:a;d=Math.max(Math.floor(c/a),1);d=i<d?i:d}if(!Ext.isEmpty(d)){b=d;a=Math.max(Math.floor(c/b),1)}else {b=Math.max(Math.floor(c/a),1)}}}}}var g=Math.max(Math.floor(c/a),1);return {columns:g<b?g:b,columnWidth:a}}});Ext.define('ABPControlSet.layout.CSSGrid',{extend:'Ext.layout.container.Container',requires:['ABPControlSet.common.CSSGrid'],mixins:['ABPControlSet.common.CSSGrid'],alias:'layout.cssgrid',type:'cssgrid',setsItemSize:!1,needsItemSize:!0,autoSizePolicy:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:0},usesContainerHeight:!1,usesContainerWidth:!0,usesHeight:!1,usesWidth:!0,childEls:['gridCt'],renderTpl:['<div id="{ownerId}-gridCt" data-ref="gridCt" role="presentation">','{%this.renderBody(out,values)%}','</div>'],doLayout:function(){var b=this,a=b.owner;if(a&&a.updateLayout){a.updateLayout()}},getInsertPosition:function(b,a){b=b.dom?b.dom:b;var c=b.childNodes;if(a!==undefined){if(Ext.isNumber(a)&&c){a=c[a]}}return a},visibleItemCount:null,calculate:function(a){var b=this;if(b.responsive){var c=a?a.visibleItems||b.getLayoutItems():[];b.runCalculations(c,b.visibleItemCount!==c.length);b.visibleItemCount=c.length;if(!a.hasDomProp('containerChildrenSizeDone')){b.done=!1}else {var f=a.targetContext,e=a.widthModel.shrinkWrap,d=a.heightModel.shrinkWrap,h=d||e,j=h&&f.el.dom,g=h&&f.getPaddingInfo();if(e){a.setContentWidth(j.offsetWidth+g.width,!0)}if(d){a.setContentHeight(j.offsetHeight+g.height,!0)}}}else {var b=this,i=a.props,k=b.getRenderTarget();if(a.hasDomProp('containerChildrenSizeDone')){if(a.widthModel.shrinkWrap&&isNaN(i.width)){a.setContentWidth(k.getWidth(),!0)}if(a.heightModel.shrinkWrap&&isNaN(i.height)){a.setContentHeight(k.getHeight(),!0)}return}b.done=!1}},beginLayoutCycle:function(b){var a=this;a.callParent(arguments);if(!a.responsive){a.runCalculations(b?b.visibleItems||a.getLayoutItems():[])}},renderItems:function(i,h){var c=this,l=i.length;if(c.responsive&&l>1){var j=0,g,a,d,f=c.getGroups(i),k=0,e=0,b;for(var m in f){k++;f[m].appended=!1}if(k>1){for(;j<l;j++,e++){b=i[j];a=f[b.responsiveGroup];d=f[a.parentGroup];if(a&&!a.appended&&d&&d.el){g=c.getInsertPosition(d.el,e);if(g){d.el.insertBefore(a.el,g)}else {d.el.appendChild(a.el)}a.appended=!0}if(b&&!b.rendered){c.renderItem(b,a?a.el:h,e)}else {if(b.ignoreDomPosition){--e}else {if(!c.isValidParent(b,a?a.el:h,e)){c.moveItem(b,a?a.el:h,e)}else {c.configureItem(b)}}}}}else {c.callParent(arguments)}}else {c.callParent(arguments)}},getLayoutItems:function(){var c=this,d=[],e=c.callParent(),f=e.length,a,b;for(b=0;b<f;b++){a=e[b];if(!a.hidden||a.hideMode!=='display'||!c.responsive){d.push(a)}}return c.determineItemsWithColumnRowSorting(d)},getRenderTarget:function(){return this.gridCt}});Ext.define('ABPControlSet.layout.Table',{extend:'Ext.layout.container.Table',alias:'layout.abptable',type:'abptable',columns:2,determineItemsWithColumnRowSorting:function(a){return a.sort(this.columnAndRowSort)},columnAndRowSort:function(a,b){if(a.row===b.row){if(a.col<b.col){return -1}else {return 1}}else {if(a.row<b.row){return -1}else {return 1}}},getLayoutItems:function(){var e=this,c=[],d=e.callParent(),f=d.length,a,b;for(b=0;b<f;b++){a=d[b];a.width=a.responsiveWidth;a.row=a.row||a.responsiveRow;a.col=a.col||a.responsiveCol;a.rowspan=a.rowspan||a.responsiveRowSpan;a.colspan=a.colspan||a.responsiveColSpan;if(!a.hidden){c.push(a)}}return e.determineItemsWithColumnRowSorting(c)},renderChildren:function(){var a=this,u=a.getLayoutItems(),b,i=a.tbody.dom,n=i.rows,q=u.length,r=a.getHiddenItems(),h,g,b,f,e,c;for(c=0;c<q;c++){b=u[c];h=b.row;g=b.col;if(h>0){a.createRowsUpTo(i,h);n=i.rows}f=n[h];if(!f){f=i.insertRow(h);if(a.trAttrs){f.set(a.trAttrs)}}if(g>0){a.createCellsUpTo(f,g)}e=Ext.get(f.cells[g]||f.insertCell(g));if(!b.rendered){a.renderItem(b,e,0)}else {if(!a.isValidParent(b,e,h,g,i)){a.moveItem(b,e,0)}}if(a.tdAttrs){e.set(a.tdAttrs)}if(b.tdAttrs){e.set(b.tdAttrs)}e.set({colSpan:b.colspan||1,rowSpan:b.rowspan||1,cls:a.cellCls+' '+(b.cellCls||'')})}var w=n.length,l=[],s,t,j,k,m,o,p,v;for(var c=0;c<w;c++){k=n[c];p=k?k.cells:[];o=p.length;v=!0;if(o>0){j=[];for(var d=0;d<o;d++){m=p[d];if(m&&m.childElementCount===0){j.push(m.cellIndex)}}j.sort(function(a,b){return a-b});s=j.length;for(var d=s-1;d>=0;d--){k.deleteCell(j[d])}}else {l.push(k.rowIndex)}}l.sort(function(a,b){return a-b});t=l.length;for(var d=t-1;d>=0;d--){i.deleteRow(l[d])}for(c=0,q=r.length;c<q;++c){a.ensureInDocument(r[c].getEl())}},createRowsUpTo:function(b,c){for(var a=0;a<c;a++){if(!b.rows[a]){b.insertRow(a)}}},createCellsUpTo:function(b,c){for(var a=0;a<c;a++){if(!b.cells[a]){b.insertCell(a)}}}});Ext.define('ABPControlSet.view.CardContainer',{extend:'Ext.container.Container',xtype:'abpcardcontainer',requires:['ABPControlSet.base.mixin.CardContainer'],mixins:['ABPControlSet.base.mixin.CardContainer'],layout:{type:'card'},constructor:function(a){a=a||{};this.mixins.abpcardcontainer.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.CustomControl',{extend:'Ext.Component',xtype:'abpcustomcontrol',requires:['ABPControlSet.base.mixin.CustomControl'],mixins:['ABPControlSet.base.mixin.CustomControl'],constructor:function(a){a=a||{};a.childEls=['embeddedEl'];a.renderTpl=['<div id="{id}-embeddedEl" data-ref="embeddedEl" style="height:100%;width:100%;"></div>'];this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},initComponent:function(){this.callParent(arguments);this.on({afterrender:{fn:this.beginEmbed,scope:this,priority:999}})}});Ext.define('ABPControlSet.view.Window',{extend:'Ext.window.Window',xtype:'abpwindow',scaleWithContainer:!0,scaleWithContainerRatio:0.9,skipCenter:!1,startMaximizedOnSmallViewport:!1,initComponent:function(){this.callParent();this.initialWidth=this.width||0;this.initialHeight=this.height||0;this.isDesktop=Ext.platformTags.desktop},onDestroy:function(){this.unregisterContainerResizeOnce();this.callParent(arguments)},restore:function(a){this.callParent(a);if(this.resizedWhileMaximized&&this.scaleWithContainer){this.doScaleWithContainer();delete this.resizedWhileMaximized}},show:function(a,b,c){Ext.resumeLayouts(!0);return this.callParent(arguments)},onWindowResize:function(e,d,f){var a=this;a.callParent();var b=a.getScreenOrientation();if(!b){b=e>d?'landscape':'portrait'}var c=this.oldOrientation!==b;if(c){this.oldOrientation=b}if(a.maximized&&a.scaleWithContainer&&(this.isDesktop||c)){a.resizedWhileMaximized=!0}if(!a.isDestroyed&&!a.maximized&&a.scaleWithContainer&&(this.isDesktop||c)&&!this.masked){a.doScaleWithContainer({width:e,height:d})}},onShow:function(){var a=this;a.callParent(arguments);if(a.scaleWithContainer){if(a.maximized){this.resizedWhileMaximized=!0}else {if(!Ext.platformTags.desktop){this.registerContainerResizeOnce()}a.doScaleWithContainer()}a.oldOrientation=a.getScreenOrientation()}},registerContainerResizeOnce:function(){var a=this;if(a.container&&!a._deferredResizeRegistered){a.container.on('resize',a.onDeferredContainerResizeOnce,a,{buffer:50});a._deferredResizeRegistered=!0}},unregisterContainerResizeOnce:function(){if(this._deferredResizeRegistered&&this.container){this.container.un('resize',this.onDeferredContainerResizeOnce,this);this._deferredResizeRegistered=!1}},onDeferredContainerResizeOnce:function(c,a,b){try{this.doScaleWithContainer()}finally{this.unregisterContainerResizeOnce()}},syncMonitorWindowResize:function(){var a=this,b=a._monitoringResize,d=a.constrain||a.constrainHeader||a.maximized||a.scaleWithContainer,c=a.hidden||a.destroying||a.isDestroyed;if(d&&!c){if(!b){Ext.on('resize',a.onWindowResize,a,{buffer:Ext.platformTags.desktop?80:160});a._monitoringResize=!0}}else {if(b){Ext.un('resize',a.onWindowResize,a);a._monitoringResize=!1}}},doScaleWithContainer:function(e){var a=this;var f=a.scaleWithContainerRatio;var g=a.floatParent;var h=g?g.getTargetEl():a.container;var b=e?e:h.getSize();var c=a.getSize();var d=c;if(c.width>b.width||b.width<a.initialWidth||a.initialWidth<=0){d.width=b.width*f}else {if(c.width<Math.min(b.width,a.initialWidth)&&b.width>a.initialWidth){d.width=a.initialWidth}}if(c.height>b.height||b.height<a.initialHeight||a.initialHeight<=0){d.height=(b.height==0?a.initialHeight:b.height)*f}else {if(c.height<Math.min(b.height,a.initialHeight)&&b.height>a.initialHeight){d.height=a.initialHeight}}a.setBox(d,!1);if(this.skipCenter!==!0){this.center()}if(!a.isDesktop){a.focus()}},getScreenOrientation:function(){if(Ext.supports.Orientation&&screen.orientation){var b=screen.orientation.type||'';var a=b.split('-');var c=a[0];return c}return null}});Ext.define('ABPControlSet.view.button.Button',{extend:'Ext.button.Button',xtype:'abpbutton',requires:['ABPControlSet.base.mixin.Button'],mixins:['ABPControlSet.base.mixin.Button'],privates:{_hasIcon:function(){var b=this.callParent(arguments);var a=this.getIcons();return b?!0:a&&a.length>0?!0:!1}},constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a]);var b=a.bind?a.bind.text:undefined;if(!b){if(a.bind){if(a.bind.tooltip&&!a.bind.ariaLabel){a.bind.ariaLabel=a.bind.tooltip}}if(!a.bind||!a.bind.ariaLabel){ABP.util.Logger.logAria("The button '"+this.itemId+"' does not contain an ARIA-LABEL attribute.",'1.1.1',this)}}},setAriaLabel:function(a){var c=this;if(c.rendered){var b=c.el.dom;if(a){b.setAttribute('aria-label',a)}else {b.removeAttribute('aria-label')}}},setAriaExpanded:function(b){var a=this;if(a.rendered){var c=a.el.dom;c.setAttribute('aria-expanded',b)}},onClick:function(b){var a=this;a.callParent(arguments);if(typeof appInsights=='object'){appInsights.trackEvent({name:'buttonclick',button:a.name||a.itemId||a.automationCls,text:a.getText()})}}});Ext.define('ABPControlSet.view.button.Segmented',{extend:'Ext.button.Segmented',xtype:'abpsegmentedbutton',mixins:['ABPControlSet.base.mixin.SegmentedButton'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},initComponent:function(){this.on({'change':this.fireUserChanged});this.callParent(arguments)},privates:{fireUserChanged:function(a,b,c){Ext.defer(function(){if(a.containsFocus||a.hasFocus){a.__flushValueViewModel();a.fireEvent(ABPControlSet.common.types.Events.UserChanged,a,b,c)}},1)}}});Ext.define('ABPControlSet.view.component.Icon',{extend:'Ext.Component',xtype:'abpicon',mixins:['ABPControlSet.base.mixin.Icon']});Ext.define('ABPControlSet.view.component.StepProgressBar',{extend:'Ext.Component',xtype:'abpstepprogressbar',tpl:['<div class="abp-step-progress-container">','<ul class="abp-step-progress-list">','<tpl for="steps">','<tpl if="complete">','<li id="abp-step-number-id-{stepNum}" class="abp-step-progress-complete abp-step-progress-step">','<span class="abp-step-progress-btn-wrapper">','<span class="abp-step-progress-step-button">{stepCompleteLabel}</span>','</span>','<span class="abp-step-progress-step-label">{label}</span>','</li>','<tpl elseif="current">','<li id="abp-step-number-id-{stepNum}" class="abp-step-progress-current abp-step-progress-step">','<span class="abp-step-progress-btn-wrapper">','<span class="abp-step-progress-step-button">{stepLabel}</span>','</span>','<span class="abp-step-progress-step-label">{label}</span>','</li>','<tpl else>','<li id="abp-step-number-id-{stepNum}" class="abp-step-progress-undone abp-step-progress-step">','<span class="abp-step-progress-btn-wrapper">','<span class="abp-step-progress-step-button">{stepLabel}</span>','</span>','<span class="abp-step-progress-step-label">{label}</span>','</li>','</tpl>','</tpl>','</ul>','</div>']});Ext.define('ABPControlSet.view.tree.CheckboxTreeItem',{extend:'Ext.list.TreeItem',xtype:'checkboxtreelistitem',checkedCls:Ext.baseCSSPrefix+'treelist-item-checked',element:{reference:'element',tag:'li',cls:Ext.baseCSSPrefix+'treelist-item',children:[{reference:'rowElement',cls:Ext.baseCSSPrefix+'treelist-row',children:[{reference:'wrapElement',cls:Ext.baseCSSPrefix+'treelist-item-wrap',children:[{reference:'iconElement',cls:Ext.baseCSSPrefix+'treelist-item-icon'},{reference:'textElement',cls:Ext.baseCSSPrefix+'treelist-item-text'},{reference:'expanderElement',cls:Ext.baseCSSPrefix+'treelist-item-expander'},{reference:'checkboxElement',cls:Ext.baseCSSPrefix+'treelist-item-checkbox'}]}]},{reference:'itemContainer',tag:'ul',cls:Ext.baseCSSPrefix+'treelist-container'},{reference:'toolElement',cls:Ext.baseCSSPrefix+'treelist-item-tool'}]},onClick:function(){var b=this,a=b.getNode();if(a){checked=!a.get('checked');a.set('checked',checked);b.doNodeUpdate(a)}b.callParent(arguments)},privates:{doNodeUpdate:function(c){var a=this,d=a.checkedCls;a.callParent([c]);var e=c.get('checked');var b=a.element;if(b){b.toggleCls(d,e)}}}});Ext.define('ABPControlSet.view.tree.Tree',{extend:'Ext.list.Tree',xtype:'abptree',requires:['ABPControlSet.base.mixin.Component','ABPControlSet.view.tree.CheckboxTreeItem'],mixins:['ABPControlSet.base.mixin.Component'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},getItemConfig:function(b,c){var a=this.callParent(arguments);if(b.get('checkbox')===!0){a.xtype='checkboxtreelistitem';a.checked=!!b.get('checked')}return a}});Ext.define('ABPControlSet.view.contextmenu.ContextMenu',{extend:'ABPControlSet.view.tree.Tree',xtype:'abpcontextmenu',config:{currentCmp:null,currentContext:null},margin:0});Ext.define('ABPControlSet.view.errors.ErrorList',{extend:'Ext.Component',xtype:'abperrors',cls:'abp-errors x-unselectable',ariaRole:'alert',ariaAttributes:{'aria-atomic':'true'},liquidLayout:!0,config:{title:'',messageType:1,errors:[],collapsible:!1,closable:!1,closeAction:'destroy'},constructor:function(a){a=a||{};this.callParent([a])},childEls:['iconEl','titleEl','messagesEl','collapseToolEl','closeToolEl','countEl'],renderTpl:['<div class="abp-errors-outer">','<div class="abp-errors-icon">','<span id="{id}-iconEl" data-ref="iconEl" class="{icon}"></span>','</div>','<div class="errors-message-content">','<div class="abp-errors-header-container">','<div id="{id}-titleEl" data-ref="titleEl" class="abp-errors-title">{title:htmlEncode}</div>','<div class="abp-errors-tools">','<span id="{id}-countEl" data-ref="countEl" class="abp-errors-badge"></span>','<tpl if="collapsible">','<span id="{id}-collapseToolEl" data-ref="collapseToolEl" role="button" tabindex="-1" class="x-tool-tool-el x-tool-img icon-navigate-up"></span>','</tpl>','<span id="{id}-closeToolEl" data-ref="closeToolEl" role="button" tabindex="-1" class="x-tool-tool-el x-tool-img x-tool-close"></span>','</div>','</div>','<ul id="{id}-messagesEl" data-ref="messagesEl" class="abp-errors-list {.:this.getStyle(values)}">','<tpl for="messages">','<li class="abp-errors-message">','<tpl if="fieldId">','<span role="link" tabindex="-1" data-fieldid="{fieldId}">{text}</span>','<tpl else>','{text}','</tpl>','</li>','</tpl>','</ul>','</div>','</div>',{getStyle:function(b,a){if(!a.messages.length){return 'x-hidden'}return ''}}],messagesTpl:['<tpl for="messages">','<li class="abp-errors-message">','<tpl if="fieldId">','<span role="link" tabindex="-1" data-fieldid="{fieldId}">{text}</span>','<tpl else>','{text}','</tpl>','</li>','</tpl>'],initRenderData:function(){var a=this,b,c=a.getMessagesData();b=Ext.apply({title:a.title,icon:a.getIconClass(a.messageType),messages:c,collapsible:a.collapsible},a.callParent());return b},afterRender:function(){var a=this;if(a.el){a.el.addCls(a.getElClass(a.getMessageType()));a.el.dom.setAttribute('aria-expanded',!0);a.el.on({click:a.onClick,scope:a})}if(a.closeToolEl){if(!a.closable){a.closeToolEl.addCls('x-hidden')}a.closeToolEl.on({click:a.close,scope:a})}if(a.collapseToolEl){a.collapseToolEl.on({click:a.toggleExpand,scope:a})}a.updateExpandable()},applyMessageType:function(a){if(a==='error'){a=1}else {if(a==='warning'){a=2}else {if(a==='info'){a=3}}}return a},updateMessageType:function(c,b){var a=this;if(a.rendered){if(b){a.iconEl.removeCls(a.getIconClass(b));a.el.removeCls(a.getElClass(b))}a.iconEl.addCls(a.getIconClass(c));a.el.addCls(a.getElClass(c));a.updateLayout()}},updateTitle:function(b){var a=this;if(a.rendered){a.titleEl.setHtml(b);a.updateLayout()}},updateErrors:function(d){var a=this;if(a.rendered){var b=a.initRenderData();var c=new Ext.XTemplate(a.messagesTpl);c.overwrite(a.messagesEl,b);if(b.messages.length){a.messagesEl.removeCls('x-hidden');if(a.expanded){a.countEl.removeCls('x-hidden')}}else {a.messagesEl.addCls('x-hidden');a.countEl.addCls('x-hidden')}a.updateExpandable();a.updateLayout({isRoot:!0})}},updateClosable:function(b){var a=this;if(a.rendered){if(b){a.closeToolEl.removeCls('x-hidden')}else {a.closeToolEl.addCls('x-hidden')}}},close:function(){if(this.fireEvent('beforeclose',this)!==!1){this.doClose()}},privates:{expanded:!0,toggleExpand:function(){var a=this;a.expanded=!a.expanded;if(!a.messagesEl){return}if(a.expanded){a.beginExpand()}else {a.beginCollapse()}},beginCollapse:function(){var a=this;if(!a.messagesEl){return}a.expandedHeight=a.getHeight();a.el.dom.setAttribute('aria-expanded',!1);a.el.animate({duration:200,dynamic:!0,to:{height:53},listeners:{afteranimate:function(){a.countEl.removeCls('x-hidden');a.updateLayout()},scope:a}})},beginExpand:function(){var a=this;if(!a.messagesEl){return}a.countEl.addCls('x-hidden');a.el.dom.setAttribute('aria-expanded',!0);var b=a.expandedHeight;a.el.animate({duration:200,dynamic:!1,to:{height:b},listeners:{afteranimate:function(){delete a.expandedHeight;a.updateLayout()},scope:a}})},doClose:function(){this.fireEvent('close',this);this[this.closeAction]()},doDestroy:function(){var a=this;a.callParent()},getIconClass:function(a){if(a===1){return 'icon-sign-warning'}if(a===2){return 'icon-about'}return 'icon-information'},getElClass:function(a){if(a===1){return 'abp-errors-error'}if(a===2){return 'abp-errors-warning'}return 'abp-errors-information'},getMessagesData:function(){var b=this,a=[];Ext.each(b.errors,function(c,d){var b={};if(Ext.isString(c)){b.text=c}else {b.text=c.text;b.fieldId=c.fieldId}a.push(b)});return a},onClick:function(a,c){if(a.target.tagName!=='SPAN'){return}if(a.target.dataset.fieldid){var b={fieldId:a.target.dataset.fieldid};this.fireEvent('navigateField',b,a)}},updateExpandable:function(){var a=this,b=a.getErrors();if(!a.rendered){return}a.countEl.addCls('x-hidden');if(a.collapseToolEl){if(b&&b.length>0){a.countEl.setHtml(b.length);a.collapseToolEl.removeCls('x-hidden');a.expanded=!0}else {a.collapseToolEl.addCls('x-hidden');a.expanded=!1;a.countEl.setHtml('')}}}}});Ext.define('ABPControlSet.view.field.Checkbox',{extend:'Ext.form.field.Checkbox',xtype:'abpcheckbox',requires:['ABPControlSet.base.mixin.Checkbox'],mixins:['ABPControlSet.base.mixin.Checkbox'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},onChangeEvent:function(a){this.lastChangeEventTrusted=a.browserEvent.isTrusted;this.updateValueFromDom();this.lastChangeEventTrusted=null},initComponent:function(){this.on({'change':this.fireUserChanged});this.callParent(arguments)},privates:{fireUserChanged:function(a,b,c){if(this.lastChangeEventTrusted){a.__flushValueViewModel();a.fireEvent(ABPControlSet.common.types.Events.UserChanged,a,b,c)}return}}});Ext.define('ABPControlSet.view.picker.layout.BoundList',{extend:'Ext.layout.component.BoundList',alias:'layout.abpboundlist',beginLayout:function(a){var c=this,d=c.owner,b=d.actionToolbar;c.callParent(arguments);if(b){a.actionToolbarContext=a.context.getCmp(b)}},getLayoutItems:function(){var b=this.callParent(arguments)||[];var a=this.owner.actionToolbar;if(a){b.push(a)}return b},publishInnerHeight:function(a,g){var f=a.toolbarContext,b=a.actionToolbarContext,c=0;if(b&&b.target&&b.target.isVisible(!0)){var e=b.getProp('height');if(e===undefined){this.done=!1;return}c+=e}if(f){var d=f.getProp('height');if(d===undefined){this.done=!1;return}c+=d}a.listContext.setHeight(g-a.getFrameInfo().height-c)},calculateOwnerHeightFromContentHeight:function(c){var b=this.callParent(arguments)||0,a=c.actionToolbarContext;if(a&&a.target&&a.target.isVisible(!0)){b+=a.getProp('height')}return b}});Ext.define('ABPControlSet.view.picker.ComboList',{extend:'Ext.view.BoundList',requires:['ABPControlSet.view.picker.layout.BoundList'],xtype:'abpcombolist',componentLayout:'abpboundlist',initComponent:function(){var a=this;if(a.listActions){a.emptyText='&nbsp';a.actionToolbar=a.createActionToolbar()}a.callParent()},getRefItems:function(){var b=this.callParent()||[],a=this.actionToolbar;if(a){b.push(a)}return b},onContainerClick:function(b){var a=this.actionToolbar;if(a&&a.rendered&&b.within(a.el)){return !1}return this.callParent(arguments)},doDestroy:function(){this.actionToolbar=Ext.destroy(this.actionToolbar);this.callParent()},createActionToolbar:function(){var a=this;return Ext.create('Ext.toolbar.Toolbar',{id:a.id+'-action-toolbar',itemId:'actiontoolbar',padding:4,defaults:{height:30,onlyShowWhenEmpty:!1,hidden:!0},border:!1,items:['->'].concat(a.listActions),ownerCt:a,ownerLayout:a.getComponentLayout()})},renderTpl:['<div id="{id}-listWrap" data-ref="listWrap"',' class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="',Ext.baseCSSPrefix,'list-plain"','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>','>','</ul>','</div>','{%','var pagingToolbar=values.$comp.pagingToolbar;','if (pagingToolbar) {','Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);','}','%}','{%','var actionToolbar=values.$comp.actionToolbar;','if (actionToolbar) {','Ext.DomHelper.generateMarkup(actionToolbar.getRenderTree(), out);','}','%}',{disableFormats:!0}],privates:{finishRenderChildren:function(){var a=this.actionToolbar;this.callParent(arguments);if(a){a.finishRender()}}}});Ext.define('ABPControlSet.view.field.ComboBox',{extend:'Ext.form.field.ComboBox',xtype:'abpcombobox',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Field','ABPControlSet.view.picker.ComboList','ABPControlSet.base.mixin.ComboBox'],mixins:['ABPControlSet.base.mixin.ComboBox'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},createPicker:function(){var a=this;a.listConfig=a.listConfig||{};Ext.apply(a.listConfig,{xtype:'abpcombolist',listActions:a.listActions});return a.callParent(arguments)},afterQuery:function(){var c=this,b=0,i=c.getStore(),h=i.getCount(),f=c.getPicker(),a=f?f.down('#actiontoolbar'):null,e=a?a.items.getRange()||[]:[],g=e.length;for(var d=1;d<g;d++){action=e[d];if(action&&action.onlyShowWhenEmpty){if(h===0){action.show();b++}else {action.hide()}}else {action.show();b++}}if(a){a[b?'show':'hide']()}c.callParent(arguments)},setValue:function(b){if(this.getPublishListValue()){var a=this.findRecordByValue(b);if(a&&!a.phantom){this.setListValue(b)}else {this.setListValue(undefined)}}this.callParent(arguments)}});Ext.define('ABPControlSet.view.field.Currency',{extend:'Ext.form.FieldContainer',xtype:'abpcurrency',requires:['ABPControlSet.base.mixin.Field'],mixins:['ABPControlSet.base.mixin.Field'],layout:{type:'hbox',align:'stretch'},cls:'abp-currencybox',searchString:'',showRight:!1,renderConfig:{value:null,currencyCode:null,store:null,readOnly:!1,formatString:'000,000.00'},constructor:function(a){a=a||{};a.currencyDisplayField=a.currencyDisplayField||'display';a.currencyValueField=a.currencyValueField||'value';a.store=a.store||this.buildStore(a);var b=a.showRight=a.showRight||!1;a.items=[b?this.buildNumberField(a):this.buildCombo(a),b?this.buildCombo(a):this.buildNumberField(a)];this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},updateReadOnly:function(c){var d=this,a=d.down('abpnumber'),b=d.down('abpcombobox');if(a){a.setReadOnly(c)}if(b){b.setReadOnly(c)}},updateValue:function(b){var c=this,a=c.down('abpnumber');if(a){a.setValue(b)}},updateStore:function(b){var d=this,a=d.down('abpcombobox');if(a){var c=b?b.getCount()<=1:!0;if(b){a.bindStore(b);a.setSelection(b.getAt(0));a.setValue(d.config.currencyCode)}a.setDisabled(c);a.setHideTrigger(c)}},updateCurrencyCode:function(b){var c=this,a=c.down('abpcombobox');if(a){a.setValue(b)}},buildCombo:function(a){return {xtype:'abpcombobox',displayField:a.currencyDisplayField||'display',valueField:a.currencyValueField||'value',editable:!1,enableKeyEvents:!0,tabIndex:-1,hideTrigger:!a.store||a.store.getCount()<=1,disabledCls:a.showRight?'abp-currency-combo-single-right':'abp-currency-combo-single',cls:['abp-currency-combo',a.showRight?'abp-currency-right':'abp-currency-left'],onDownArrow:Ext.emptyFn,listeners:{afterRender:this.onComboAfterRender,collapse:this.onComboCollapse,select:this.onComboSelect}}},onComboSelect:function(a,b){a.up('abpcurrency').setCurrencyCode(a.getValue())},onComboKeyUp:function(a,c){var b=a.up('abpcurrency');b.keyupHandler(c)},buildNumberField:function(a){return {xtype:'abpnumber',hideTrigger:!0,decimalPrecision:a.decimalPrecision?a.decimalPrecison:2,allowThousandSeparator:!0,decimalSeparator:a.decimalSeparator?a.decimalSeparator:'.',thousandSeparator:a.thousandSeparator?a.thousandSeparator:',',allowDecimals:!0,enableKeyEvents:!0,keyNavEnabled:!1,repsonsiveFill:!0,inputType:null,minValue:a.minValue||a.minValue===0?a.minValue:Number.NEGATIVE_INFINITY,maxValue:a.maxValue?a.maxValue:Number.MAX_VALUE,step:a.step?a.step:1,value:a.value?a.value:null,cls:['abp-currency-number',a.showRight?'abp-currency-left':'abp-currency-right'],listeners:{blur:this.onNumberBlur,change:this.onNumberChange,keydown:this.onNumberKeyDown,afterRender:this.onNumberAfterRender}}},onNumberBlur:function(b){var a=b.up('abpcurrency');if(a){a.formatNumberField(b,b.getValue(),a.getFormatString())}},onNumberChange:function(c,b,d){var a=c.up('abpcurrency');if(Math.abs(b-d)===1){a.formatNumberField(c,b,a.getFormatString())}a.setValue(b)},formatNumberField:function(a,e,d){var b=Ext.util.Format.thousandSeparator,c=Ext.util.Format.decimalSeparator;Ext.util.Format.thousandSeparator=a.thousandSeparator;Ext.util.Format.decimalSeparator=a.decimalSeparator;a.setRawValue(Ext.util.Format.number(e,d));Ext.util.Format.thousandSeparator=b;Ext.util.Format.decimalSeparator=c},buildStore:function(a){var d=[],b=a.currencyDisplayField,c=a.currencyValueField;if(Ext.isArray(a.availableCurrencies)){a.availableCurrencies.forEach(function(f){var e={};e[b]=e[c]=f;d.push(e)})}return Ext.create('Ext.data.Store',{fields:[b,c],data:d})},onNumberKeyDown:function(a,b){var g=a.up('abpcurrency');if(b.ctrlKey||b.keyCode===32||b.altKey||/^[A-Z]$/i.test(b.browserEvent.key)){g.keyupHandler(b);b.stopEvent()}else {var c=a.getValue(),f=a.minValue,e=a.maxValue,d=a.step;if(b.keyCode===40){if(c-d>f){a.setValue(c-d)}else {a.setValue(f)}}else {if(b.keyCode===38){if(c+d<e){a.setValue(c+d)}else {a.setValue(e)}}}}},onComboAfterRender:function(a){a.setValue(a.lastValue)},onComboCollapse:function(a){Ext.defer(function(){a.up().down('abpnumber').focus()},0)},onNumberAfterRender:function(b){var a=b.up('abpcurrency');if(a){a.formatNumberField(b,b.getValue(),a.getFormatString())}},keyupHandler:function(c){var b=this,a=b.down('abpcombobox');b.initialValueChanged=!0;if(!a.isDisabled()){if(c.ctrlKey){var d=b.getStore(),e=d.indexOf(a.getSelection()),g=d.getCount();if(c.keyCode===38){if(e>0){a.setSelection(d.getAt(e-1))}else {a.setSelection(d.getAt(g-1))}}else {if(c.keyCode===40){if(e<g-1){a.setSelection(d.getAt(e+1))}else {a.setSelection(d.getAt(0))}}}}else {if(c.altKey){if(c.keyCode===38){a.collapse()}else {if(c.keyCode===40){a.expand()}}}else {b.searchString+=c.browserEvent.key;var f=b.getStore().query(b.config.currencyDisplayField,b.searchString,!1,!1);if(f.length>0){a.setSelection(f.getAt(0))}if(f.length<=1){b.searchString=''}}}}}});Ext.define('ABPControlSet.view.field.Date',{extend:'Ext.form.field.Date',xtype:'abpdate',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.view.field.plugin.RelativeDateTime','ABPControlSet.base.mixin.Field'],mixins:['ABPControlSet.base.mixin.Field'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.picker.DateTime',{extend:'Ext.picker.Date',alias:'widget.abpdatetimepicker',requires:['Ext.picker.Date','Ext.slider.Single','Ext.form.field.Time','Ext.form.Label'],isDateTimePicker:!0,timeKeyNav:null,timeValue:null,initComponent:function(){var a=this;var b=Ext.isDate(a.defaultValue)?a.defaultValue:Ext.Date.clearTime(new Date());var c=a.value?a.value:b;a.timeValue=a.value?a.value:null;a.callParent();a.value=b},beforeRender:function(){var a=this,c=a.pickerField,b=c.getValue()?new Date(c.getValue()):null;if(b){b.setSeconds(0)}a.timeField=Ext.widget({xtype:'abptime',ownerCt:a,padding:'8px 24px',width:'calc(100% - 48px)',isModern:!1,name:a.pickerField.name,ownerLayout:a.getComponentLayout(),hideLabel:!0,labelAlign:'top',labelSeparator:'',label:'Time',tabIndex:0,value:b,listeners:{select:a.changeTimeValue,scope:a},keyMap:{scope:a,enter:a.onEnterKey,tab:function(a){this.handleTabKey(a);return !0}}});a.callParent(arguments)},handleTabClick:function(a){this.handleDateClick(a,this.activeCell.firstChild,!0)},handleTabKey:function(b){var a=this,e=Ext.Date.clearTime(a.activeDate,!0),d=a.getSelectedDate(e),c=a.handler;if(b.currentTarget===this.eventEl.dom&&!b.shiftKey){return}if(b.currentTarget===this.timeField.dom&&b.shiftKey){this.eventEl.focus();return}if(!a.disabled&&d.dateValue&&!Ext.fly(d.parentNode).hasCls(a.disabledCellCls)){a.setValue(a.getDateTimeValue());a.fireEvent('select',a,a.value);if(c){Ext.callback(c,a.scope,[a,a.value],null,a,a)}if(a.pickerField&&a.pickerField.isEditorComponent){b.preventDefault()}a.onSelect()}else {a.fireEventArgs('tabout',[a])}},handleDateClick:function(h,c,g){var a=this,b=a.timeField.getValue();if(g!==!0){h.stopEvent()}if(!a.disabled&&c.dateValue&&!Ext.fly(c.parentNode).hasCls(a.disabledCellCls)){var f=b?b.getHours():null;var e=b?b.getMinutes():null;if(f&&e){var d=new Date(c.dateValue);d.setHours(f,e,0);a.selectAndClose(d)}else {a.setValue(new Date(c.dateValue))}}},getDateTimeValue:function(){var c=this,a=c.timeField.getValue(),b=c.getActive();var e=a?a.getHours():0;var d=a?a.getMinutes():0;b.setHours(e,d,0);return b},changeTimeValue:function(h,f){var b=this,d=f.data.date,a=b.pickerField.getValue()||new Date();console.log('DATETIME: '+a+' '+d);if(b.pickerField&&a){var c=new Date(d);var e=a.setHours(c.getHours(),c.getMinutes());var g=new Date(e);b.selectAndClose(g)}},beforeDestroy:function(){var a=this;if(a.rendered){Ext.destroy(a.timeField)}a.callParent()},privates:{finishRenderChildren:function(){var a=this;a.callParent();a.timeField.finishRender()},selectAndClose:function(c){var a=this,b=a.handler;a.setValue(c);a.value=c;a.fireEvent('select',a,a.value);if(b){b.call(a.scope||a,a,a.value)}a.hideOnSelect=!0;a.onSelect()}},renderTpl:['<div id="{id}-innerEl" data-ref="innerEl" role="presentation">','<div class="{baseCls}-header">','<div id="{id}-prevEl" data-ref="prevEl" class="{baseCls}-prev {baseCls}-arrow" role="presentation" title="{prevText}"></div>','<div id="{id}-middleBtnEl" data-ref="middleBtnEl" class="{baseCls}-month" role="heading">{%this.renderMonthBtn(values, out)%}</div>','<div id="{id}-nextEl" data-ref="nextEl" class="{baseCls}-next {baseCls}-arrow" role="presentation" title="{nextText}"></div>','</div>','<table role="grid" id="{id}-eventEl" data-ref="eventEl" class="{baseCls}-inner" cellspacing="0" tabindex="0">','<thead>','<tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" aria-label="{.}">','<div role="presentation" class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>','</th>','</tpl>','</tr>','</thead>','<tbody>','<tr role="row">','<tpl for="days">','{#:this.isEndOfWeek}','<td role="gridcell">','<div hidefocus="on" class="{parent.baseCls}-date"></div>','</td>','</tpl>','</tr>','</tbody>','</table>','<div role="presentation" class="{baseCls}-footer">{%this.renderTimeField(values, out)%}</div>','<tpl if="showToday">','<div id="{id}-footerEl" data-ref="footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>','</tpl>','<div id="{id}-todayText" class="'+Ext.baseCSSPrefix+'hidden-clip">{todayText}.</div>','<div id="{id}-ariaMinText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaMinText}.</div>','<div id="{id}-ariaMaxText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaMaxText}.</div>','<div id="{id}-ariaDisabledDaysText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaDisabledDaysText}.</div>','<div id="{id}-ariaDisabledDatesText" class="'+Ext.baseCSSPrefix+'hidden-clip">{ariaDisabledDatesText}.</div>','</div>',{firstInitial:function(a){return Ext.picker.Date.prototype.getDayInitial(a)},isEndOfWeek:function(a){a--;var b=a%7===0&&a!==0;return b?'</tr><tr role="row">':''},renderTodayBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.todayBtn.getRenderTree(),b)},renderMonthBtn:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.monthBtn.getRenderTree(),b)},renderTimeField:function(a,b){Ext.DomHelper.generateMarkup(a.$comp.timeField.getRenderTree(),b)}}],getTimePickerSide:function(){var a=this.el,c=Ext.getBody(),b=c.getViewSize().width;return b<a.getX()+a.getWidth()+140?'tl':'tr'},selectToday:function(){var a=this,c=a.todayBtn,b=a.handler;if(c&&!c.disabled){a.setValue(new Date());a.fireEvent('select',a,a.value);if(b){Ext.callback(b,a.scope,[a,a.value],null,a,a)}a.onSelect()}return a},setValue:function(a,b){this.value=a||this.defaultValue;if(this.value.getHours()!==0&&this.value.getMinutes()!==0){this.timeValue=a}return this.update(this.value)},update:function(b,a){this.callParent(arguments);this.timeField.setValue(this.timeValue)},selectedUpdate:function(g){var b=this,h=Ext.Date.clearTime(g,!0).getTime(),d=b.cells,e=b.selectedCls,c,f=d.getCount(),a;b.eventEl.dom.setAttribute('aria-busy','true');a=b.activeCell;if(a){Ext.fly(a).removeCls(e);a.setAttribute('aria-selected',!1)}for(c=0;c<f;c++){a=d.item(c);if(b.textNodes[c].dateValue===h){b.activeCell=a.dom;b.eventEl.dom.setAttribute('aria-activedescendant',a.dom.id);a.dom.setAttribute('aria-selected',!0);a.addCls(e);b.fireEvent('highlightitem',b,a);break}}b.eventEl.dom.removeAttribute('aria-busy')},getSelectedDate:function(f){var g=this,h=f.getTime(),d=g.cells,c=d.elements,e=c.length,b,a;for(a=0;a<e;a++){b=c[a].firstChild;if(b.dateValue===h){return b}}return null}});Ext.define('ABPControlSet.view.field.DateTime',{extend:'Ext.form.field.Date',alias:'widget.abpdatetime',requires:['ABPControlSet.view.picker.DateTime','ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.view.field.plugin.RelativeDateTime','ABPControlSet.base.mixin.Field'],initTime:'',initTimeFormat:'H:i',mixins:['ABPControlSet.base.mixin.Field'],config:{showNowTrigger:!0,triggers:{now:{handler:'onTriggerNowClick',scope:'this',cls:'icon-clock',focusOnMousedown:!0,weight:-1}}},listeners:{change:function(c,b){var a=!b&&this.editable&&!this.readonly&&!this.disabled&&this.getShowNowTrigger();if(a){this.triggers.now.show()}else {this.triggers.now.hide()}}},constructor:function(a){a=a||{};if(a.maxLength!=undefined){a.maxLength=undefined}a.format=Ext.form.field.Date.prototype.format+' '+Ext.form.field.Time.prototype.format;a.altFormats=this.altFormats+'|dmy H:i|dmy Hi|dmY H:i|dmY Hi';this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a]);this.triggers.now.setTooltip(ABP.util.Common.geti18nString('s_picker_date_nowText'))},createPicker:function(){var a=this.callParent(),b=Ext.clone(a.initialConfig);var c=Ext.isDate(a.pickerField.value)?a.pickerField.value:null;a.destroy();Ext.apply(b,{todayText:ABP.util.Common.geti18nString('s_picker_date_nowText')});return Ext.create('ABPControlSet.view.picker.DateTime',b)},createInitialDate:function(a){var c=this.minValue,b=this.maxValue;if(!a){return null}if(c&&c>a){a=c}else {if(b&&b<a){a=b}}return a},onExpand:function(){var a=Ext.isDate(this.rawDate)?this.rawDate:this.createInitialDate();this.picker.timeValue=a;this.picker.setValue(a)},getErrors:function(b){b=arguments.length>0?b:this.formatDate(this.processRawValue(this.getRawValue()));var a=this,e=Ext.String.format,c=a.superclass.superclass.getErrors.apply(this,arguments),d=a.disabledDays,k=a.disabledDatesRE,g=a.minValue,f=a.maxValue,n=d?d.length:0,j=0,l,h,m,i;if(b===null||b.length<1){return c}l=b;b=a.parseDate(b);if(!b){c.push(e(a.invalidText,l,Ext.Date.unescapeFormat(a.format)));return c}i=b.getTime();if(g&&i<g.getTime()){c.push(e(a.minText,a.formatDate(g)))}if(f&&i>f.getTime()){c.push(e(a.maxText,a.formatDate(f)))}if(d){m=b.getDay();for(;j<n;j++){if(m===d[j]){c.push(a.disabledDaysText);break}}}h=a.formatDate(b);if(k&&k.test(h)){c.push(e(a.disabledDatesText,h))}return c},onTriggerNowClick:function(){this.setValue(new Date())}});Ext.define('ABPControlSet.view.field.TextArea',{extend:'Ext.form.field.TextArea',xtype:'abptextarea',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.TextArea'],mixins:['ABPControlSet.base.mixin.TextArea'],grow:!0,constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.field.EntityLink',{extend:'ABPControlSet.view.field.TextArea',xtype:'abpentitylinkfield',cls:'abp-link-field',editable:!1,growMax:30,grow:!0,triggers:{link:{xtype:'abptrigger',xclass:'ABPControlSet.view.form.trigger.Trigger',icon:'icon-navigate-right',handler:function(d,a){var c=a.getValue(),b=a.getTriggerHandler();if(b){b(c,a.setValue.bind(a))}}}},config:{triggerHandler:Ext.emptyFn,valueField:'value',displayField:'text'},setValue:function(a){a=a||{};var c=this,e=c.getDisplayField(),f=c.getValueField(),b=a[e],d=a[f];if(Ext.isEmpty(b)){b=d}c.setRawValue(b)}});Ext.define('ABPControlSet.view.picker.Icon',{extend:'Ext.view.BoundList',xtype:'abpiconpicker',focusable:!0,componentCls:'abp-icon-picker',selectedItemCls:'abp-icon-picker-selected',itemCls:'abp-icon-picker-item',itemSelector:'abp-icon-picker-item',getInnerTpl:function(a){return '<span class="'+this.itemCls+'-inner {'+a+'}"/>'}});Ext.define('ABPControlSet.view.form.trigger.Trigger',{extend:'Ext.form.trigger.Trigger',alias:'trigger.abptrigger',cls:Ext.baseCSSPrefix+'form-trigger-cmp',extraCls:'mixin-trigger',requires:['ABPControlSet.base.mixin.Trigger'],mixins:['ABPControlSet.base.mixin.Trigger'],config:{disabled:!1},__handler:null,constructor:function(a){a=a||{};a.component={xtype:'tool',callback:this.triggerClick.bind(this),cls:'mixin-trigger-tool',maskOnDisable:!1,iconCls:a.icon,listeners:{focus:this.onTriggerFocus,scope:this}};a.__handler=a.__handler||a.handler;a.handler=null;this.callParent([a])},onTriggerFocus:function(b){var a=this.field;if(a){a.fireEvent(ABPControlSet.common.types.Events.TriggerFocus,this.id)}},triggerClick:function(){var a=this.field;if(a&&!this.getDisabled()&&!a.getDisabled()){if(a.fireEvent(ABPControlSet.common.types.Events.TriggerClick,this,a)!==!1){var b=this.__handler;if(b){Ext.callback(b,null,[this,a],0,a)}}}},onMouseDown:function(a){this.component.focus()},onFieldRender:function(){var b=this,a=b.component;b.callParent();if(!a.isComponent&&!a.isWidget){a=Ext.widget(a)}b.component=a;a.render(b.el)},destroy:function(){var a=this.component;if(a.isComponent||a.isWidget){a.destroy()}this.component=null;this.callParent()}});Ext.define('ABPControlSet.view.field.IconPicker',{extend:'Ext.form.field.ComboBox',xtype:'abpiconcombo',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Field','ABPControlSet.view.picker.Icon','ABPControlSet.view.form.trigger.Trigger'],mixins:['ABPControlSet.base.mixin.Field'],displayField:'icon',valueField:'icon',triggers:{iconTrigger:{xclass:'ABPControlSet.view.form.trigger.Trigger'}},constructor:function(a){a=a||{};a.store=ABPControlSet.common.Common.getIconStore();this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},onSelect:function(e,b){var d=this,c=b.get('icon');var a=d.getTriggers()['iconTrigger'];if(a){a.setIcon(c)}},setValue:function(c){var b=this;b.callParent(arguments);var a=b.getTriggers()['iconTrigger'];if(a){a.setIcon(c)}},createPicker:function(){var a=this,b,c=Ext.apply({xtype:'abpiconpicker',id:a.id+'-picker',pickerField:a,selectionModel:a.pickerSelectionModel,floating:!0,hidden:!0,store:a.getPickerStore(),displayField:a.displayField,preserveScrollOnRefresh:!0,ariaSelectable:a.ariaSelectable},a.listConfig,a.defaultListConfig);b=a.picker=Ext.widget(c);if(!b.initialConfig.maxHeight){b.on({beforeshow:a.onBeforePickerShow,scope:a})}b.getSelectionModel().on({beforeselect:a.onBeforeSelect,beforedeselect:a.onBeforeDeselect,focuschange:a.onFocusChange,select:a.onSelect,scope:a});b.getNavigationModel().navigateOnSpace=!1;return b}});Ext.define('ABPControlSet.view.field.Image',{extend:'Ext.form.FieldContainer',xtype:'abpimage',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Image'],mixins:['ABPControlSet.base.mixin.Image'],layout:'fit',cls:'abp-image',publishes:['src'],defaultPlaceHolder:Ext.getResourcePath('img/temp_abpimage-placeholder.png',null,'ABPControlSet'),renderConfig:{readOnly:null},constructor:function(a){a=a||{};var e=parseInt(a.height||a.minHeight||a.maxHeight||100);var d=a.readOnly=a.readOnly===!1?!1:!0;var b=this.configureDimensions(a);var c=this.configureImageClassName(a.cropStyle,b);a.height=b.height;a.width=b.width;if(!a.readOnly&&!a.src){a.src='';a.cls=('new-image '+(this.cls||'')+' '+(a.cls||'')).trim()}a.items=[{xtype:'component',itemId:'placeholder',html:a.placeholder||'',style:{'text-align':'center','font-size':e/20+'em'}},{xtype:'container',cls:('placeholder-img-wrapper '+c).trim(),itemId:'defaultImage',hidden:d,items:[{xtype:'image',itemId:'placeholder-image',src:this.defaultPlaceHolder}]},{xtype:'container',cls:('img-wrapper '+c).trim(),items:[{xtype:'image',itemId:'user-image',hidden:!0,src:a.src,listeners:{el:{click:this.onImageClick,dblclick:this.onImageDblClick,longpress:this.onImageLongPress,load:this.onImageLoaded,scope:this}}}]},{xtype:'filefield',itemId:'image-picker',name:a.name||'abp-image-upload-form',accept:'image/*',cls:Ext.toolkit==='modern'?'x-icon icon-pencil':'',buttonConfig:Ext.toolkit==='classic'?{iconCls:'icon-pencil',text:'',scale:'large',userCls:'large'}:null,inline:!0,hidden:d,listeners:{change:{element:'el',fn:this.onFileChange,scope:this}}},{xtype:'abpbutton',cls:'image-clear',iconCls:'icon-garbage-can',handler:function(){var b=this.up();b.clearImage()}}];this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},onImageLongPress:function(a){this.fireEvent(ABPControlSet.common.types.Events.ImageLongPress,a)},onImageDblClick:function(a){this.fireEvent(ABPControlSet.common.types.Events.ImageDoubleClick,a)},onImageClick:function(a){this.fireEvent(ABPControlSet.common.types.Events.ImageClick,a)},clearImage:function(){this.onFileChange({target:{files:[]}})},onFileChange:function(d){var b=this,a=d.target.files[0],c=new FileReader();if(!a&&!d.event){b.resetImagePicker();return}c.onload=function(a){b.setSrc(a.target.result);b.removeCls('new-image')};if(a){c.readAsDataURL(a)}},privates:{resetImagePicker:function(){var a=this,b=a.down('filefield');b.reset();a.setSrc('');a.showDefaultPlaceholder();a.addCls('new-image');a.removeCls('loaded')},showDefaultPlaceholder:function(){var b=this,a=b.down('#placeholder-image');a.setSrc(this.defaultPlaceHolder);a.show()}}});Ext.define('ABPControlSet.view.field.MultiEntityLink',{extend:'ABPControlSet.view.field.EntityLink',xtype:'abpmultientitylinkfield',config:{delimeter:', ',store:null},growMax:1000,setValue:function(b){b=b||[];var c=this,a,f=c.getStore(),l=b.length,g='',k=c.getDelimeter(),h,e,j=c.getValueField(),i=c.getDisplayField();for(var d=0;d<l;d++){a=b[d];h=a.get?a.get(j):a[j];e=(a.get?a.get(i):a[i])||h;g+=d!==0?k+e:e}if(f){f.removeAll();f.add(b)}c.setRawValue(g)},updateStore:function(a){var b=a&&a.getRange?a.getRange():null;if(b){this.setValue(b)}}});Ext.define('ABPControlSet.view.field.Number',{extend:'Ext.form.field.Number',xtype:'abpnumber',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Field'],mixins:['ABPControlSet.base.mixin.Field'],allowThousandSeparator:!1,thousandSeparator:null,inputType:'number',inputMode:'decimal',constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},initComponent:function(){this.on({'afterrender':this.afterRenderInit});this.callParent(arguments)},privates:{afterRenderInit:function(){if(this.inputMode&&this.inputEl&&this.inputEl.dom){this.inputEl.dom.setAttribute('inputmode',this.inputMode)}}}});Ext.define('ABPControlSet.view.field.RadioGroup',{extend:'Ext.form.RadioGroup',xtype:'abpradiogroup',requires:['ABPControlSet.base.view.field.plugin.RadioGroup','ABPControlSet.base.mixin.RadioGroup'],mixins:['ABPControlSet.base.mixin.RadioGroup'],simpleValue:!0,constructor:function(a){a=a||{};a.defaults=a.defaults||{};Ext.applyIf(a.defaults,{readOnly:a.readOnly,padding:'0 5 0 0'});this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},setReadOnly:function(c){var a=this;if(a.rendered){this.callParent(arguments)}else {var d=a.items&&a.items.getRange?a.items.getRange():a.items||[],b,e=d.length;for(b=0;b<e;b++){d[b].readOnly=c}this.readOnly=c}},onStoreUpdate:function(){if(this.rendered){this.updateRadioItems()}else {this.on('render',this.updateRadioItems,this)}}});Ext.define('ABPControlSet.view.field.Text',{extend:'Ext.form.field.Text',xtype:'abptext',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.Text'],mixins:['ABPControlSet.base.mixin.Text'],setReadOnly:function(a){if(a!==this.readOnly){this.callParent(arguments)}},constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.field.TextDisplay',{extend:'Ext.form.field.Display',xtype:'abptextdisplay',classCls:'abp-textdisplay',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.mixin.TextDisplay','ABPControlSet.util.Markdown'],mixins:['ABPControlSet.base.mixin.TextDisplay'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},setRawValue:function(a,b){var d=this.getMarkupType(),c=Ext.valueFrom(a,'');if(d==='markdown'){this.setHtml(ABPControlSet.util.Markdown.parseMarkdown(a));return this.callParent([c,b])}else {return this.callParent([c,b])}}});Ext.define('ABPControlSet.view.field.Time',{extend:'Ext.form.field.Time',xtype:'abptime',requires:['ABPControlSet.base.view.field.plugin.LinkedLabel','ABPControlSet.base.view.field.plugin.Field','ABPControlSet.base.view.field.plugin.RelativeDateTime','ABPControlSet.base.mixin.Field'],mixins:['ABPControlSet.base.mixin.Field'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.rightpane.interactions.InteractionsController',{extend:'Ext.app.ViewController',alias:'controller.interactionspane',listen:{controller:{'*':{interactions_populate:'populateContainer',rightPane_toggleTab:'handleToggleTab'}}},onToggle:function(){},populateContainer:function(b){var c=this;var a=c.getView();a.removeAll();a.add(b)},privates:{handleToggleTab:function(b){var a=this,c=a.getView();if(b.xtype===c.xtype){a.onToggle()}},baseRightPanePanel_toggleRightPane:function(){this.fireEvent('session_toggleRightPane')}}});Ext.define('ABPControlSet.view.rightpane.interactions.Interactions',{extend:'Ext.panel.Panel',requires:['ABPControlSet.view.rightpane.interactions.InteractionsController'],alias:'widget.interactionspane',controller:'interactionspane',scrollable:'vertical',focusableContainer:!0,initComponent:function(){var a=this;a.tools=(a.tools||[]).concat([{type:'close',automationCls:'rightpanel-btn-close',handler:'baseRightPanePanel_toggleRightPane'}]);this.callParent()},title:'Interactions',items:[]});Ext.define('ABPControlSet.common.types.Interaction',{items:null,fields:null,placement:null,rightPane:!0,rightPaneTitle:null,title:null,text:null,headerPriority:null,thumbbarPriority:null,bind:null,handler:null});Ext.define('ABPControlSet.base.plugin.Interactions',{extend:'Ext.AbstractPlugin',alias:'plugin.abpinteractions',requires:['ABPControlSet.view.rightpane.interactions.Interactions','ABPControlSet.common.types.Interaction'],groupDefaults:{xtype:'container',padding:0},itemDefaults:{flex:1,xtype:'abpbutton',scale:'medium'},config:{interactions:null,thumbarInteractions:null,headerInteractions:null,rightPaneInteractions:null},interactionsBar:null,__thumbarInteractions:null,__headerInteractions:null,__rightPaneInteractions:null,paneName:'interactions',init:function(b){var a=this,d=b.interactions,c={boxready:a.interactionOnShow,aftershow:a.interactionOnShow,beforehide:a.interactionOnHide,beforedestroy:a.interactionOnHide,scope:a};c[Ext.toolkit==='modern'?'painted':'render']={fn:a.interactionOnShow,scope:a,single:!0};a.setInteractions(d);delete b.interactions;b.on(c)},setInteractions:function(b){b=b||[];var a=this;a.callParent(arguments);a.__thumbarInteractions=[];a.__headerInteractions=[];a.__rightPaneInteractions=[];a.processInteractions(b,!1);a.setThumbarInteractions(a.__thumbarInteractions);if(Ext.toolkit==='classic'){a.setHeaderInteractions(a.__headerInteractions)}a.setRightPaneInteractions(a.__rightPaneInteractions)},interactionOnShow:function(){var b=this,c=b.getCmp(),a=c.getController();if(a){if(Ext.toolkit==='classic'){a.fireEvent('container_rightPane_initTab',b.paneName)}a.fireEvent('container_rightPane_showButton',b.paneName,!0);a.fireEvent('interactions_populate',b.getRightPaneInteractions());if(Ext.toolkit==='modern'){a.fireEvent('container_thumbbar_show',{buttons:b.getThumbarInteractions()})}}},interactionOnHide:function(){var b=this,c=b.getCmp(),a=c.getController();if(a){if(Ext.toolkit==='modern'){a.fireEvent('container_thumbbar_hide',!0)}a.fireEvent('container_rightPane_showButton',b.paneName,!1);a.fireEvent('container_rightPane_toggleTab',b.paneName,!1);a.fireEvent('interactions_populate',[])}},setThumbarInteractions:function(a){var b=this,d=b.getCmp();a=a||[];a=a.sort(function(b,c){return b.thumbbarPriority-c.thumbbarPriority});this.callParent([a]);var b=this,c=d.isVisible();if(c){b.interactionOnShow()}},setHeaderInteractions:function(a){var c=this,b=c.getTBar();a=a||[];a=a.sort(function(b,c){return b.headerPriority-c.headerPriority});if(Ext.toolkit==='classic'){if(b&&Ext.isArray(a)){if(b.removeAll){b.removeAll();b.add(a)}else {b.items=a}}}},getTBar:function(){var a=this,c=a.getCmp(),b=a.interactionsBar;if(!b){b=Ext.create({scrollable:'horizontal',xtype:'toolbar',docked:'top',dock:'top',cls:'interactions-toolbar'});a.interactionsBar=c.addDocked(b)[0]}return a.interactionsBar},setRightPaneInteractions:function(d){this.callParent(arguments);var a=this,c=a.getCmp(),b=c.isVisible();if(b){a.interactionsOnShow()}},processInteractions:function(a,i,j){var c=this,h=c.getCmp(),o=c.__thumbarInteractions,p=c.__headerInteractions,n=c.__rightPaneInteractions,g=h.getController(),q=h.getViewModel();i=a.items?!1:i;if(Ext.isObject(a)){a.viewModel={parent:q};if(a.handler&&g){var f=a.handler;a.handler=Ext.isObject(f)?f.fn.bind(f.scope||g):(Ext.isFunction(f)?f:g[f]?g[f]:Ext.emptyFn).bind(g)}a.refOwner=h;a.scope=g||h;if(Ext.toolkit==='modern'&&Ext.isNumber(a.thumbbarPriority)){var m=Ext.clone(a);delete m.text;o.push(m)}if(!i&&Ext.toolkit==='classic'&&Ext.isNumber(a.headerPriority)){var e=Ext.clone(a);if(e.items){c.processInteractions(e.items,!!j,e);Ext.applyIf(e,{defaultType:'abpbutton'});Ext.applyIf(e,c.groupDefaults);Ext.applyIf(e,{defaults:c.itemDefaults})}else {Ext.applyIf(e,c.itemDefaults)}p.push(e)}if(!i&&a.rightPane!==!1){var b=Ext.clone(a);if(Ext.toolkit==='classic'){b.getBubbleTarget=function(){return h}}if(b.items){var l=[],k=b.items.length;for(var d=0;d<k;d++){if(b.items[d].rightPane!==!1){l.push(b.items[d])}}b.items=l;c.processInteractions(b.items,!!j,b);Ext.applyIf(b,c.groupDefaults);Ext.applyIf(b,{defaults:c.itemDefaults})}else {Ext.applyIf(b,c.itemDefaults)}if(b.rightPaneTitle){b.title=b.rightPaneTitle}n.push(b)}return a}else {if(Ext.isArray(a)){var k=a.length;for(var d=0;d<k;d++){a[d]=c.processInteractions(a[d],!!j,j)}}}}});Ext.define('ABPControlSet.view.form.Form',{extend:'Ext.form.Panel',xtype:'abpform',requires:['ABPControlSet.base.mixin.Component','ABPControlSet.base.plugin.Interactions'],mixins:{abpcomponent:'ABPControlSet.base.mixin.Component'},plugins:{abpinteractions:!1},constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},getFields:function(){var c=this;var b=c.items.items;var a={};b.forEach(function(b,d,c){a[b.name]=b.value});return a}});Ext.define('ABPControlSet.view.form.Label',{extend:'Ext.form.Label',xtype:'abplabel',labelSeparator:'',constructor:function(a){a=a||{};a.cls=a.cls||'';a.cls+=' '+Ext.baseCSSPrefix+'form-item-label '+Ext.baseCSSPrefix+'form-item-label-default '+Ext.baseCSSPrefix+'form-item-label-right '+Ext.baseCSSPrefix+'form-item-label-inner '+Ext.baseCSSPrefix+'form-item-label-text';this.callParent([a])},trimLabelSeparator:function(){var b=this,c=b.labelSeparator,a=b.text||'',d=a.substr(a.length-1);return d===c?a.slice(0,-1):a},getElConfig:function(){var a=this,b=a.text,c=a.labelSeparator;if(!Ext.isEmpty(c)){b=a.trimLabelSeparator()+c}a.html=b?Ext.util.Format.htmlEncode(b):a.html||'';return Ext.apply(a.superclass.superclass.getElConfig.apply(this),{htmlFor:a.forId||''})},setText:function(a,d){var b=this,c=b.labelSeparator;b.text=a;d=!0;if(!Ext.isEmpty(c)){a=b.trimLabelSeparator()+c}this.callParent([a,d])}});Ext.define('ABPControlSet.view.grid.AGGrid',{extend:'ABPControlSet.base.view.grid.AGGrid',xtype:'abpaggrid',requires:['ABPControlSet.base.view.grid.AGGrid','ABPControlSet.base.mixin.Component'],mixins:['ABPControlSet.base.mixin.Component'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},initComponent:function(){this.callParent(arguments);this.on({afterrender:{fn:this.beginEmbed,scope:this,priority:999}})}});Ext.define('ABPControlSet.view.grid.Grid',{extend:'Ext.grid.Panel',xtype:'abpgrid',border:!0,requires:['ABPControlSet.base.view.grid.plugin.Grid','ABPControlSet.base.mixin.Grid'],mixins:['ABPControlSet.base.mixin.Grid'],listOnTop:!1,listView:!1,constructor:function(a){a=a||{};a.listView=Ext.isBoolean(a.listView)?a.listView:this.listView===!1?!1:!0;if(a.listView){a.plugins=a.plugins||{};a.plugins.listview=a.plugins.listview===!0?{}:a.plugins.listview;if(!Ext.isObject(a.plugins.listview)){a.plugins.listview={}}a.plugins.listview.fullRow=a.listOnTop||this.listOnTop;a.plugins.listview.template=a.listTemplate||this.listTemplate}this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.panel.Panel',{extend:'Ext.panel.Panel',xtype:'abppanel',requires:['ABPControlSet.base.mixin.Panel'],border:!0,mixins:['ABPControlSet.base.mixin.Panel'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.panel.TabPanel',{extend:'Ext.tab.Panel',xtype:'abptabpanel',requires:['ABPControlSet.base.mixin.TabPanel'],mixins:['ABPControlSet.base.mixin.TabPanel'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.tab.Tab',{extend:'Ext.tab.Tab',xtype:'abptab',requires:['ABPControlSet.base.mixin.Button'],mixins:['ABPControlSet.base.mixin.Button'],constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])}});Ext.define('ABPControlSet.view.visual.Separator',{extend:'Ext.menu.Separator',xtype:'abpseparator',cls:'abp-horizontal-separator',requires:['ABPControlSet.base.mixin.Separator'],mixins:['ABPControlSet.base.mixin.Separator'],afterRender:Ext.EmptyFn,constructor:function(a){a=a||{};this.mixins.abpcomponent.constructor.call(this,a);this.callParent([a])},setForegroundColor:function(a){this.setStyle('border-top-color',a)}});Ext.define('ABPControlSet.store.AGGrid',{extend:'Ext.data.Store',autoLoad:!1,processingAG:!1,processingExt:!1,config:{gridApi:null,columnApi:null},updateColumnApi:function(a){var c=this,b=[];if(a){b=c.transformColumnDefs(a.getAllColumns())}c.setFields(b)},updateGridApi:function(a){var b=this;if(a&&a.rowModel&&a.rowModel.getType().toLowerCase()=='inmemory'){a.addEventListener('modelUpdated',b.__syncData.bind(b));b.__syncData()}},listeners:{add:'extAdd',remove:'extRemove',update:'extUpdate'},transformColumnDefs:function(a){a=a||[];var d=[],b,e=a.length;for(var c;c<e;c++){b=a[c]?a[c].colDef:null;if(b){d.push({type:'string',fieldName:b['headerName'],name:b['field']})}}return d},__syncData:function(){var a=this,c=[],b=a.getGridApi();if(b&&!a.processingExt){a.processingAG=!0;b.forEachNodeAfterFilterAndSort(function(a){if(a.data){c.push(a.data)}});a.loadData(c);a.processingAG=!1}},extAdd:function(g,d,f,e){var a=this,c=a.getGridApi(),b={add:null};if(c&&!a.processingAG){a.processingExt=!0;b.add=d.map(function(a){return a.data});a.gridApi.updateRowData(b);a.processingExt=!1}},extRemove:function(h,d,g,e,f){var a=this,c=a.getGridApi(),b={remove:null};if(c&&!a.processingAG){b.remove=d.map(function(a){return a.data});a.processingExt=!0;a.gridApi.updateRowData(b);a.processingExt=!1}},extUpdate:function(i,c,f,e,g,h){var a=this,d=a.getGridApi(),b=c;if(d&&!a.processingAG){b=c.getData();a.processingExt=!0;a.gridApi.updateRowData({update:[b]});a.processingExt=!1}}});Ext.define('ABPControlSet.store.BufferedAGGrid',{extend:'ABPControlSet.store.AGGrid',requires:['ABPControlSet.store.AGGrid'],updateGridApi:function(a){this.callParent(arguments)}});Ext.define('ABPControlSet.store.ListViewTemplates',{extend:'Ext.data.Store',data:[{display:'Tri Image',value:'triImage'},{display:'Tri Data',value:'triData'},{display:'Duo Image',value:'duoImage'},{display:'Phone Number Display',value:'phoneNumberDisplay'},{display:'Phone Number Display In Form',value:'phoneNumberDisplayInForm'},{display:'Email Display',value:'emailDisplay'},{display:'Single Line Item',value:'singleLineItem'},{display:'Single Line Item with Trigger',value:'singleLineItemWithTrigger'},{display:'Two Line Item',value:'twoLineItem'},{display:'Two Line Item With Trigger',value:'twoLineItemWithTrigger'},{display:'Three Line Item',value:'threeLineItem'},{display:'Three Line Item With Trigger',value:'threeLineItemWithTrigger'},{display:'Header Line Item With Three Fields',value:'headerLineItemWithThreeFields'},{display:'Two Line Phone or Email',value:'twoLineItemWithPhoneOrEmail'}]});Ext.define('ABPControlSet.Initialize',{singleton:!0,requires:['ABPControlSet.base.view.*','ABPControlSet.base.mixin.*','ABPControlSet.mixin.*','ABPControlSet.layout.*','ABPControlSet.view.*','ABPControlSet.store.*']});Ext.define('ABPControlSet.common.Common',{singleton:!0,config:{iconStore:null},iconPrefix:'icon-',iconRe:/(?:^|\s)pickericon-(\S*)(?:\s|$)/,getComponentFromElement:function(a){var c=Ext.Viewport,b;if(a){c=null;while(c===null){b=Ext.getCmp(a.id);if(b instanceof Ext.Widget||b instanceof Ext.Component){c=b}else {a=a.offsetParent;if(!a){break}}}}return c},getIconStore:function(){var a=this.callParent(arguments);if(!a){var e=this,d=new RegExp('^\\.('+e.iconPrefix+'.*)::before$'),b=null;var c=[];Ext.iterate(Ext.util.CSS.getRules(),function(e,a){b=d.exec(a.selectorText);if(b){c.push({icon:b[1]})}});a=new Ext.data.Store({data:c});this.setIconStore(a)}return a}});Ext.define('ABPControlSet.common.types.AssociatedDataRoot',{rootPropName:'',decode:!1,matchProp:'',componentMatchProp:'',assoc:{}});Ext.define('ABPControlSet.common.types.Engine',{requires:['ABPControlSet.common.types.AssociatedDataRoot'],appId:null,sort:null,decode:!1,responsive:!0,generateModel:!1,modelFieldPropName:null,modelIdentifierPropName:null,flat:!0,rootComponentPropName:'.',associatedDataRoots:[],parentPropName:'',matchChildWithName:'',ownerPropName:'',childrenProps:[],originalDataPropName:'',assoc:{},advancedAssoc:{},xtypes:{},defaults:{},interactionsProp:null,interactionAssoc:null,interactionChildrenProps:null,interactionsSort:null,constructor:function(a){a=a||{};this.callParent(arguments);Ext.apply(this,a)}});Ext.define('ABPControlSet.common.FormEngine',{requires:['ABPControlSet.view.*','ABPControlSet.layout.*','ABPControlSet.common.types.*'],engine:null,__currentItems:null,processItem:Ext.emptyFn,processInteraction:Ext.emptyFn,processItemField:Ext.emptyFn,processAssociatedItem:Ext.emptyFn,processResult:function(a,b){return a},preProcessReference:function(a){return a},processAssociatedItemData:Ext.emptyFn,constructor:function(a){a=a||{};this.engine=a.engine||this.engine||{};this.callParent(arguments);if(!(this.engine instanceof ABPControlSet.common.types.Engine)){this.engine=new ABPControlSet.common.types.Engine(this.engine)}},processJson:function(c,r,n){var t=Ext.clone(this.engine);if(Ext.isString(c)){c=Ext.decode(c)}if(Ext.isObject(n)){Ext.apply(this.engine,n)}var a=this.engine,f;if(!a.rootComponentPropName||a.rootComponentPropName==='.'){f=c}else {f=this.findRoot(a.rootComponentPropName,c)}if(a.decode){f=Ext.decode(f)}var h=this.process(f),u=Ext.isArray(h)?[]:h.fields,q=Ext.isArray(h)?h:h.items;var m=a.associatedDataRoots,e,g,v=m.length,k=0,i='dynamic_',l=a.modelIdentifierPropName,b,j;if(a.generateModel&&l){b=this.getPropValue(c,l);if(b&&Ext.ClassManager.isCreated(i+b)){j=Ext.create(i+b);a.generateModel=!1}}for(;k<v;k++){e=m[k];if(e.rootPropName){g=this.findRoot(e.rootPropName,c);if(e.decode){try{var s=Ext.decode(g);g=s}catch(w){}}if(g){this.processDataAssociation(g,e,q)}}}var d;if(a.interactionsProp){var o=this.findRoot(a.interactionsProp,c);if(o){d=this.processInteractions(o)}}if(a.generateModel&&!j){b=b||Ext.id();Ext.define(i+b,{extend:'Ext.data.Model',fields:u||[]});j=Ext.create(i+b)}delete this.__currentItems;var p=this.processResult(q,j,d?Ext.isArray(d)?d:d.items||[d]:null);Ext.apply(this.engine,t);if(Ext.isFunction(r)){r(p)}else {return p}},processDataForForm:function(h,i){var e=this.engine;if(e.flat){var d=e.associatedDataRoots,a,b,g=d.length,c=0;for(;c<g;c++){a=d[c];if(a.rootPropName){b=this.findRoot(a.rootPropName,i);if(a.decode){try{var f=Ext.decode(b);b=f}catch(j){}}if(b){this.processDataAssociationForForm(b,a,h)}}}}else {}},process:function(e,q,g,p){var b;var c=this.engine;g=g||[];if(Ext.isArray(e)){if(Ext.isFunction(this.engine.sort)){e=Ext.Array.sort(e,this.engine.sort)}var i=[];var k=e.length;for(var d=0;d<k;d++){b=this.process(e[d],i,g,p)||null;if(Ext.isObject(b)&&b.items){i=i.concat(b.items)}else {if(Ext.isArray(b)){i=i.concat(b)}}}return {items:i,fields:g}}else {if(Ext.isObject(e)){q=q||[];g=g||[];b=this.associateData(e,c.assoc,p);if(!c.flat){var l=c.childrenProps||[];var h;var k=l.length;var f=[];for(var d=0;d<k;d++){h=e[l[d]];if(Ext.isArray(h)&&h.length){var a=this.process(h,null,g,l[d]);if(Ext.isObject(a)&&a.items){f=f.concat(a.items)}else {if(Ext.isArray(a)){f=f.concat(a)}}}else {if(Ext.isObject(h)){for(var r in h){var a=this.process(h[r],null,g,l[d]);if(Ext.isObject(a)&&a.items){f=f.concat(a.items)}else {if(Ext.isArray(a)){f=f.concat(a)}}}}}}if(f.length>0){b.items=f}}}}var a=[],m=this.processItem(b,b[c.originalDataPropName]);if(m===!1){b=null;a=[]}else {if(Ext.isObject(m)){var s=m.before||[],t=m.after||[];a=a.concat(s);if(!Ext.isEmpty(b.xtype)){a=a.concat([b])}a=a.concat(t)}else {a=[b]}}if(c.generateModel){var j,k=a.length,n,o;for(var d=0;d<k;d++){j=a[d];n=this.processItemField(j,j[c.originalDataPropName]);o=j[c.originalDataPropName]?j[c.originalDataPropName][c.modelFieldPropName]:null;if(n!==!1&&!Ext.isEmpty(o)){g.push(Ext.isObject(n)?n:{name:o})}}}if(b&&c.flat){this.__currentItems=this.__currentItems||{};this.__currentItems[b[c.matchChildWithName]]=b;if(!Ext.isEmpty(e[c.parentPropName])){this.addToParent(a,e[c.parentPropName]);return}else {if(!Ext.isEmpty(e[c.ownerPropName])){this.addToParent(a,e[c.ownerPropName]);return}}}if(Ext.isObject(a)){return a}else {return {items:a,fields:g}}},processInteractions:function(e,k){var a;var i=this.engine;if(Ext.isArray(e)){if(Ext.isFunction(this.engine.interactionsSort)){e=Ext.Array.sort(e,this.engine.interactionsSort)}var g=[];var j=e.length;for(var d=0;d<j;d++){a=this.processInteractions(e[d],k)||null;if(Ext.isObject(a)&&a.items){g=g.concat(a.items)}else {if(Ext.isArray(a)){g=g.concat(a)}}}return {items:g}}else {if(Ext.isObject(e)){a=this.associateData(e,i.interactionAssoc,k);a.appId=a.appId||i.appId;var h=i.interactionChildrenProps||[];var f;var j=h.length;var c=[];for(var d=0;d<j;d++){f=e[h[d]];if(Ext.isArray(f)&&f.length){var b=this.processInteractions(f,h[d]);if(Ext.isObject(b)&&b.items){c=c.concat(b.items)}else {if(Ext.isArray(b)){c=c.concat(b)}}}else {if(Ext.isObject(f)){for(var l in f){var b=this.processInteractions(f[l],h[d]);if(Ext.isObject(b)&&b.items){c=c.concat(b.items)}else {if(Ext.isArray(b)){c=c.concat(b)}}}}}}if(c.length>0){a.items=c}}}this.processInteraction(a,a[i.originalDataPropName]);return {items:[a]}},associateData:function(j,s,q){var l=this,b={},a=l.engine,d={},h=a.defaults,f=a.advancedAssoc,i=a.xtypes,g='xtype';Ext.apply(d,s);if(a.originalDataPropName){b[a.originalDataPropName]=j}function processXtype(c){var a=l.getPropValue(j,c);if(i[c]&&i[c][a]){b[g]=i[c][a]}else {if(i[a]){b[g]=i[a]}}if(f[c]&&f[c][a]){Ext.apply(d,f[c][a])}else {if(f[a]){Ext.apply(d,f[a])}}if(c&&h[c]&&h[c][a]){Ext.applyIf(b,Ext.clone(h[c][a]))}else {if(a&&h[a]){Ext.applyIf(b,Ext.clone(h[a]))}}return c}if(g in d){var e=d[g];if(Ext.isArray(e)){var n=e.length,p;for(var c=0;c<n;c++){p=l.getPropValue(j,e[c]);if(!Ext.isEmpty(p)){processXtype(e[c]);break}}}else {if(Ext.isString(e)){processXtype(e)}}}var k,m;for(var o in d){if(o===g){continue}else {m=d[o];if(m.indexOf('+')!==-1){var r=m.split('+');var n=r.length;k='';for(var c=0;c<n;c++){k+=l.getPropValue(j,r[c])||''}}else {k=l.getPropValue(j,m)}if(k!==undefined){b[o]=k}}}if(a.defaults['childrenProps']&&a.defaults['childrenProps'][q]){Ext.applyIf(b,Ext.clone(a.defaults['childrenProps'][q]))}return b},getPropValue:function(e,d){var b=d.split('.'),f=b.length;if(b.length>1){var a=e;for(var c=0;c<f;c++){a=this.doGet(a,b[c]);if(a==undefined){break}}return a}else {return this.doGet(e,d)}},doGet:function(b,a){var c=b[a];if(Ext.String.startsWith(a,'!')){a=a.substring(1,a.length);if(Ext.String.startsWith(a,'^')){a=a.substring(1,a.length);c=b[a]!=undefined?(b[a]+''||'').toLowerCase():undefined}else {c=b[a]!=undefined?!b[a]:undefined}}else {if(Ext.String.startsWith(a,'^')){a=a.substring(1,a.length);c=b[a]!=undefined?(b[a]+''||'').toUpperCase():undefined}}return c},processDataAssociation:function(a,b,d){if(Ext.isArray(a)){var f=a.length;for(var c=0;c<f;c++){this.processDataAssociation(a[c],b,d)||null}}else {if(Ext.isObject(a)){var g=this.associateData(a,b.assoc,this.engine);var e=this.findItem(d,b.componentMatchProp,a[b.matchProp]);this.processAssociatedItem(e,a,g,b.rootPropName)}}},processDataAssociationForForm:function(a,b,c){if(Ext.isArray(a)){var f=a.length;for(var d=0;d<f;d++){this.processDataAssociationForForm(a[d],b,c)||null}}else {if(Ext.isObject(a)){var g=this.associateData(a,b.assoc,this.engine);var e=c;if(Ext.isString(a[b.matchProp])){e=this.findItemOnForm(c,b.componentMatchProp,a[b.matchProp])}this.processAssociatedItemData(e,a,g,b.rootPropName)}}},addToParent:function(d,c){var e=this,b=e.__currentItems||{},a=b[c];if(a){a.items=a.items||[];a.items=a.items.concat(d)}},convertObjectsToArray:function(a,e){var c;for(var b in a){if(Ext.isObject(a[b])){var f=e.objectToArrayNames.length;c=null;for(var d=0;d<f;d++){if(e.objectToArrayNames[d].prop===b){c=e.objectToArrayNames[d];break}}if(c){if(Ext.isArray(a[c.newProp])){a[c.newProp]=a[c.newProp].concat(this.objectToArray(a[b],e))}else {a[c.newProp]=this.objectToArray(a[b],e)}if(c.newProp!==b){delete a[b]}}}else {if(Ext.isArray(a[b])){var f=a[b].length;for(var d=0;d<f;d++){this.convertObjectsToArray(a[b][d])}}}}return a},objectToArray:function(a,d){var c=[];for(var b in a){this.convertObjectsToArray(a[b],d);a[b][d.objectToPropName]=b;c.push(a[b])}return c},findRoot:function(d,a){for(var b in a){if(b===d){return a[b]}else {if(Ext.isObject(a[b])){var c=this.findRoot(d,a[b]);if(c){return c}}}}},findItem:function(b,c,d){var a=0,f=b.length;for(;a<f;a++){if(b[a][this.engine.originalDataPropName]&&b[a][this.engine.originalDataPropName][c]===d){return b[a]}else {if(Ext.isArray(b[a].items)){var e=this.findItem(b[a].items,c,d);if(e){return e}}}}},findItemOnForm:function(c,e,b){var a=this.findAssociatedPropMap(e);if(a){if(a==='reference'){var d=this.preProcessReference(b);if(d){return c.lookup(d)}}else {return c.down('['+a+'='+b+']')}}else {return c.down('['+e+'='+b+']')}},findAssociatedPropMap:function(b){if(Ext.isString(b)){var d=this.engine;var a=d.assoc;if(a){for(var c in a){if(a[c]===b){return c}}}}}});